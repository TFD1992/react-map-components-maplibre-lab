"use strict";(self.webpackChunkreact_map_components_maplibre_lab=self.webpackChunkreact_map_components_maplibre_lab||[]).push([[933],{319933:(t,e,r)=>{r.r(e),r.d(e,{Clippable:()=>gn,DIRECTIONS:()=>N,Draggable:()=>Rr,EdgeDraggable:()=>_n,InitialMoveable:()=>ra,MOVEABLE_ABLES:()=>Wn,MOVEABLE_EVENTS:()=>Xn,MOVEABLE_EVENTS_MAP:()=>qn,MOVEABLE_EVENTS_PROPS_MAP:()=>Hn,MOVEABLE_METHODS:()=>H,MOVEABLE_PROPS:()=>Yn,MOVEABLE_PROPS_MAP:()=>jn,Pinchable:()=>Se,Resizable:()=>yr,Rotatable:()=>kr,Roundable:()=>En,Scalable:()=>Nr,Snappable:()=>mr,Warpable:()=>Wr,default:()=>na,getElementInfo:()=>wn,makeAble:()=>E,makeMoveable:()=>aa});var n=r(794497),a=r(812397),i=r(888344),o=r(714175),s=r(419749),u=r(220650),l=r(32404),c=r(117749),f=r(667294),p=r(24711),d=r(239289),h=r(890028),g=r(640871),v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},v(t,e)};function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var b=function(){return b=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},b.apply(this,arguments)};function x(t,e,r){if(r||2===arguments.length)for(var n,a=0,i=e.length;a<i;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))}function E(t,e){var r;return b({events:{},props:(r={},r[t]=Boolean,r),name:t},e)}var S,D,M=(0,n.ZP)(),R=M.browser.webkit,C=R&&(S="undefined"==typeof window?{userAgent:""}:window.navigator,!!(D=/applewebkit\/([^\s]+)/g.exec(S.userAgent.toLowerCase()))&&parseFloat(D[1])<605),y="firefox"===M.browser.name,P=parseInt(M.browser.webkitVersion,10)>=612||parseInt(M.browser.version,10)>=15,z="moveable-",O="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n    outline: 1px solid transparent;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n\t").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),r=45*Math.round(t/45)%180,n="ns-resize";return 135===r?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}(t),"\n}\n")})).join("\n"),'\n\n.line.direction:before {\n    content: "";\n    position: absolute;\n    width: 100%;\n    height: calc(var(--moveable-line-padding, 0) * 1px);\n    bottom: 0;\n    left: 0;\n}\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n').concat(C?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),G=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],w=1e-4,T=1e-7,B=1e-9,A=Math.pow(10,10),k=-A,I=["n","w","s","e"],N=["n","w","s","e","nw","ne","sw","se"],_={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},F={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},W={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},H=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function j(t,e,r,n,a,i){var o,s;void 0===i&&(i="draggable");var u=null!==(s=null===(o=e.gestos[i])||void 0===o?void 0:o.move(r,t.inputEvent))&&void 0!==s?s:{},l=u.originalDatas||u.datas,c=l[i]||(l[i]={});return b(b({},a?oe(e,u):u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var q=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),b(b({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var r,n,a=!1;if(this.isFlag){var i=this.isDrag;r=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!i&&this.isDrag&&(a=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0;return this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function X(t,e){var r=e.clientX,n=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,u=i.rootMatrix,l=i.is3d,c=i.pos1,f=s.left,p=s.top,d=l?4:3,h=(0,o.h9)(ie(u,[r-f,n-p],d),c),g=J({datas:a,distX:h[0],distY:h[1]});return[g[0],g[1]]}function Y(t,e){var r=e.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,s=n.is3d,u=n.left,l=n.top,c=n.origin,f=n.offsetMatrix,p=n.targetMatrix,d=n.transformOrigin,h=s?4:3;r.is3d=s,r.matrix=a,r.targetMatrix=p,r.beforeMatrix=i,r.offsetMatrix=f,r.transformOrigin=d,r.inverseMatrix=(0,o.U_)(a,h),r.inverseBeforeMatrix=(0,o.U_)(i,h),r.absoluteOrigin=(0,o.WK)((0,o.PD)([u,l],c),h),r.startDragBeforeDist=(0,o.Kf)(r.inverseBeforeMatrix,r.absoluteOrigin,h),r.startDragDist=(0,o.Kf)(r.inverseMatrix,r.absoluteOrigin,h)}function L(t,e){var r=t.datas,n=t.originalDatas.beforeRenderable,a=r.transformIndex,u=n.nextTransforms,l=u.length,c=n.nextTransformAppendedIndexes,f=0;-1===a?("translate"===e?f=0:"rotate"===e&&(f=(0,i.cx)(u,(function(t){return t.match(/scale\(/g)}))),-1===f&&(f=u.length),r.transformIndex=f):f=(0,i.sE)(c,(function(t){return t.index===a&&t.functionName===e}))?a:a+c.filter((function(t){return t.index<a})).length;var p=function(t,e){var r=t.slice(0,e<0?void 0:e),n=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),u=e<0?[]:t.slice(e+1),l=(0,s.Qc)(r),c=(0,s.Qc)(n),f=(0,s.Qc)([a]),p=(0,s.Qc)(i),d=(0,s.Qc)(u),h=(0,s.rk)(l),g=(0,s.rk)(c),v=(0,s.rk)(p),m=(0,s.rk)(d),b=(0,o.ml)(h,v,4);return{transforms:t,beforeFunctionMatrix:h,beforeFunctionMatrix2:g,targetFunctionMatrix:(0,s.rk)(f),afterFunctionMatrix:v,afterFunctionMatrix2:m,allFunctionMatrix:b,beforeFunctions:l,beforeFunctions2:c,targetFunction:f[0],afterFunctions:p,afterFunctions2:d,beforeFunctionTexts:r,beforeFunctionTexts2:n,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:u}}(u,f),d=p.targetFunction,h="rotate"===e?"rotateZ":e;r.beforeFunctionTexts=p.beforeFunctionTexts,r.afterFunctionTexts=p.afterFunctionTexts,r.beforeTransform=p.beforeFunctionMatrix,r.beforeTransform2=p.beforeFunctionMatrix2,r.targetTansform=p.targetFunctionMatrix,r.afterTransform=p.afterFunctionMatrix,r.afterTransform2=p.afterFunctionMatrix2,r.targetAllTransform=p.allFunctionMatrix,d.functionName===h?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):l>f&&(r.isAppendTransform=!0,n.nextTransformAppendedIndexes=x(x([],c,!0),[{functionName:e,index:f,isAppend:!0}],!1))}function V(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function U(t,e,r){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,u=t.targetAllTransform,l=r?(0,o.ml)(u,e,4):(0,o.ml)(e,u,4),c=(0,o.ml)((0,o.U_)(r?i:n,4),l,4);return(0,o.ml)(c,(0,o.U_)(r?s:a,4),4)}function K(t){var e=t.datas,r=t.distX,n=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,u=e.absoluteOrigin,l=i?4:3;return(0,o.h9)((0,o.Kf)(a,(0,o.PD)(u,[r,n]),l),s)}function J(t,e){var r=t.datas,n=t.distX,a=t.distY,i=r.inverseBeforeMatrix,s=r.inverseMatrix,u=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,f=r.absoluteOrigin,p=u?4:3;return(0,o.h9)((0,o.Kf)(e?i:s,(0,o.PD)(f,[n,a]),p),e?l:c)}function Z(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Q(t,e){var r=(e[0]+1)/2,n=(e[1]+1)/2,a=[(0,i.AK)(t[0][0],t[1][0],r,1-r),(0,i.AK)(t[0][1],t[1][1],r,1-r)],o=[(0,i.AK)(t[2][0],t[3][0],r,1-r),(0,i.AK)(t[2][1],t[3][1],r,1-r)];return[(0,i.AK)(a[0],o[0],n,1-n),(0,i.AK)(a[1],o[1],n,1-n)]}function $(t,e,r,n){return(0,o.ml)(t,vt(e,n,r),n)}function tt(t){var e=at(t);return{setTransform:function(r,n){void 0===n&&(n=-1),e.startTransforms=(0,i.kJ)(r)?r:(0,i.WE)(r),rt(t,n)},setTransformIndex:function(e){rt(t,e)}}}function et(t,e){var r=at(t).startTransforms;rt(t,(0,i.cx)(r,(function(t){return 0===t.indexOf("".concat(e,"("))})))}function rt(t,e){var r=at(t),n=t.datas;if(n.transformIndex=e,-1!==e){var a=r.startTransforms[e];if(a){var i=(0,s.Qc)([a]);n.startValue=i[0].functionValue}}}function nt(t,e){at(t).nextTransforms=(0,i.WE)(e)}function at(t){return t.originalDatas.beforeRenderable}function it(t){return t.originalDatas.beforeRenderable.nextTransforms}function ot(t){return it(t).join(" ")}function st(t){return at(t).nextStyle}function ut(t,e,r,n,a){nt(a,e);var i=Rr.drag(t,j(a,t.state,r,n,!1)),o=i?i.transform:e;return b(b({transform:e,drag:i},Vt({transform:o},a)),{afterTransform:o})}function lt(t,e,r,n,a){var i=t.state,u=i.left,l=i.top,c=t.props.groupable,f=function(t,e,r){var n=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,u=e.beforeTransform,l=e.afterTransform,c=i?4:3,f=(0,s.Y6)([r]);return $(a,(0,o.mA)((0,o.ml)((0,o.ml)(u,f,4),l,4),4,c),n,c)}(t.state,a,e),p=c?u:0,d=c?l:0,h=ft(t,r,f),g=(0,o.h9)(n,h);return(0,o.h9)(g,[p,d])}function ct(t,e,r){return[t[0]/(e/2)-1,t[1]/(r/2)-1]}function ft(t,e,r){void 0===r&&(r=t.state.allMatrix);var n=t.state,a=n.width,i=n.height,o=n.is3d?4:3;return Pt(r,[a/2*(1+e[0]),i/2*(1+e[1])],o)}function pt(t,e){return Q(Yt(t.state),e)}function dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.tI.apply(void 0,x([z],t,!1))}function ht(t){t()}function gt(t){return t&&"none"!==t?(0,i.Kn)(t)?t:(0,s.Y6)(t):[1,0,0,1,0,0]}function vt(t,e,r){return(0,o.KF)(e,(0,o.Jm)(r,e),t,(0,o.Jm)(r.map((function(t){return-t})),e))}function mt(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function bt(t,e){void 0===e&&(e=$t(t));var r=e.transform;if(r&&"none"!==r)return e.transform;if("transform"in t){var n=t.transform.baseVal;if(!n)return"";var a=n.length;if(!a)return"";for(var i=[],o=function(t){var e=n[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},s=0;s<a;++s)o(s);return i.join(" ")}return""}function xt(t,e,r,n,a){var i,o,s,u,l,c=t&&t.ownerDocument?t.ownerDocument:document,f=c.documentElement||c.body,p=!1;if(!t||r)u=t;else{var d=null===(i=null==t?void 0:t.assignedSlot)||void 0===i?void 0:i.parentElement,h=t.parentElement;d?(p=!0,l=h,u=d):u=h}for(var g=!1,v=t===e||u===e,m="relative",b=1,x=parseFloat(null===(o=a)||void 0===o?void 0:o.zoom)||1,E=null==a?void 0:a.position;u&&u!==f;){e===u&&(v=!0);var S=$t(u),D=u.tagName.toLowerCase(),M=bt(u,S),R=S.willChange,C=parseFloat(S.zoom)||1;if(m=S.position,n&&1!==C){b=C;break}if(!r&&n&&1!==x&&E&&"absolute"!==E||"svg"===D||"static"!==m||M&&"none"!==M||"transform"===R)break;var y=null===(s=null==t?void 0:t.assignedSlot)||void 0===s?void 0:s.parentNode,P=u.parentNode;y&&(p=!0,l=P);var z=y||P;if(z&&11===z.nodeType){u=z.host,g=!0;break}u=z,m="relative"}return{offsetZoom:b,hasSlot:p,parentSlotElement:l,isCustomElement:g,isStatic:"static"===m,isEnd:v||!u||u===f,offsetParent:u||f}}function Et(t,e,r){var n,a,o,s=t.tagName.toLowerCase(),u=t.offsetLeft,l=t.offsetTop,c=(0,i.o8)(u),f=!c;return f||"svg"===s?o=(a=mt(r).map((function(t){return parseFloat(t)}))).slice():(o=(a=C?function(t){return mt($t(t,":before")).map((function(e,r){var n=(0,i.jL)(e),a=n.value,o=n.unit;return a*function(t,e,r){return"%"===e?Ct(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,o,0===r)}))}(t):mt(r).map((function(t){return parseFloat(t)}))).slice(),f=!0,n=function(t,e,r){if(!t.getBBox||!r&&"g"===t.tagName.toLowerCase())return[0,0,0,0];var n=t.getBBox(),a=Ct(t.ownerSVGElement),i=n.x-a.x,o=n.y-a.y;return[i,o,e[0]-i,e[1]-o]}(t,a,t===e&&"g"===e.tagName.toLowerCase()),u=n[0],l=n[1],a[0]=n[2],a[1]=n[3]),{tagName:s,isSVG:c,hasOffset:f,offset:[u||0,l||0],origin:a,targetOrigin:o}}function St(t,e,r){void 0===r&&(r=$t(t));var n=$t(document.body),a=n.position;if(!(e||a&&"static"!==a))return[0,0];var i=parseInt(n.marginLeft,10),o=parseInt(n.marginTop,10);return"absolute"===r.position&&("auto"===r.top&&"auto"===r.bottom||(o=0),"auto"===r.left&&"auto"===r.right||(i=0)),[i,o]}function Dt(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=(0,o.mA)(e,3,4))}))}function Mt(t){for(var e=t.parentElement,r=!1;e;){var n=$t(e).transform;if(n&&"none"!==n){r=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:r}}function Rt(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat((0,o.pQ)(t,!e).join(","),")")}function Ct(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||r,clientWidth:e,clientHeight:r}}function yt(t,e){var r=Ct(t),n=r.width,a=r.height,i=r.clientWidth,s=r.clientHeight,u=i/n,l=s/a,c=t.preserveAspectRatio.baseVal,f=c.align,p=c.meetOrSlice,d=[0,0],h=[u,l],g=[0,0];if(1!==f){var v=(f-2)%3,m=Math.floor((f-2)/3);d[0]=n*v/2,d[1]=a*m/2;var b=2===p?Math.max(l,u):Math.min(u,l);h[0]=b,h[1]=b,g[0]=(i-n)/2*v,g[1]=(s-a)/2*m}var x=(0,o.Wi)(h,e);return x[e*(e-1)]=g[0],x[e*(e-1)+1]=g[1],vt(x,e,d)}function Pt(t,e,r){return(0,o.Kf)(t,(0,o.WK)(e,r),r)}function zt(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map((function(e){return Pt(t,e,n)}))}function Ot(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),n=Math.min.apply(Math,e),a=Math.min.apply(Math,r),i=Math.max.apply(Math,e),o=Math.max.apply(Math,r);return{left:n,top:a,right:i,bottom:o,width:i-n,height:o-a}}function Gt(t,e,r,n){return Ot(zt(t,e,r,n))}function wt(t,e,r,n){var a=16===t.length?4:3,o=zt(t,r,n,a),s=o[0],u=s[0],l=s[1],c=o[1],f=c[0],p=c[1],d=o[2],h=d[0],g=d[1],v=o[3],m=v[0],b=v[1],x=Pt(t,e,a),E=x[0],S=x[1],D=Math.min(u,f,h,m),M=Math.min(l,p,g,b),R=Math.max(u,f,h,m);return u=u-D||0,{left:D,top:M,right:R,bottom:Math.max(l,p,g,b),origin:[E=E-D||0,S=S-M||0],pos1:[u,l=l-M||0],pos2:[f=f-D||0,p=p-M||0],pos3:[h=h-D||0,g=g-M||0],pos4:[m=m-D||0,b=b-M||0],direction:(0,i.c4)(zt(t,100,100,a))}}function Tt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Bt(t,e){return Tt([e[0]-t[0],e[1]-t[1]])}function At(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=(0,i.jv)(t,e));var a=Bt(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(a,"px")}}function kt(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=r.length,i=r.reduce((function(t,e){return t+e[0]}),0)/a,o=r.reduce((function(t,e){return t+e[1]}),0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function It(t,e){var r=t[e];return(0,i.Kn)(r)?b(b({},t),r):t}function Nt(t,e){void 0===e&&(e=t?$t(t):null);var r=t&&!(0,i.o8)(t.offsetWidth),n=0,a=0,o=0,s=0,u=0,l=0,c=0,f=0,p=0,d=0,h=0,g=0,v=1/0,m=1/0,b=1/0,x=1/0,E=0,S=0,D=!1;if(t)if(r||"svg"===t.tagName.toLowerCase()){var M=t.style,R="border-box"===e.boxSizing,C=parseFloat(e.borderLeftWidth)||0,y=parseFloat(e.borderRightWidth)||0,P=parseFloat(e.borderTopWidth)||0,z=parseFloat(e.borderBottomWidth)||0,O=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),G=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),w=O+(C+y),T=G+(P+z),B=e.position,A=0,k=0;if("clientLeft"in t){var I=null;if(I="absolute"===B?xt(t,document.body).offsetParent:t.parentElement){var N=$t(I);A=parseFloat(N.width),k=parseFloat(N.height)}}p=Math.max(O,(0,i.AA)(e.minWidth,A)||0),d=Math.max(G,(0,i.AA)(e.minHeight,k)||0),v=(0,i.AA)(e.maxWidth,A),m=(0,i.AA)(e.maxHeight,k),isNaN(v)&&(v=1/0),isNaN(m)&&(m=1/0),E=(0,i.AA)(M.width,0)||0,S=(0,i.AA)(M.height,0)||0,u=parseFloat(e.width)||0,l=parseFloat(e.height)||0,n=c=Math.abs(u-E)<1?(0,i.vX)(p,E||u,v):u,a=f=Math.abs(l-S)<1?(0,i.vX)(d,S||l,m):l,o=c,s=f,R?(b=v,x=m,h=p,g=d,c=n-w,f=a-T):(b=v+w,x=m+T,h=p+w,g=d+T,n=c+w,a=f+T),o=c+O,s=f+G}else{var _=t.getBBox();D=!0,u=n=_.width,l=a=_.height,c=n,f=a,o=n,s=a}return{svg:D,offsetWidth:n,offsetHeight:a,clientWidth:o,clientHeight:s,contentWidth:c,contentHeight:f,inlineCSSWidth:E,inlineCSSHeight:S,cssWidth:u,cssHeight:l,minWidth:p,minHeight:d,maxWidth:v,maxHeight:m,minOffsetWidth:h,minOffsetHeight:g,maxOffsetWidth:b,maxOffsetHeight:x}}function _t(t,e){return(0,i.jv)(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Ft(t,e){var r=t===document.body||t===document.documentElement,n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow="visible"!==$t(t).overflow,b(b({},e),n)}function Wt(t,e,r,n){var a=t.left,i=t.right,o=t.top,s=t.bottom,u=e.top,l=e.left,c={left:l+a,top:u+o,right:l+i,bottom:u+s,width:i-a,height:s-o};return r&&n?Ft(r,c):c}function Ht(t,e){var r=0,n=0,a=0,i=0;if(t){var o=t.getBoundingClientRect();r=o.left,n=o.top,a=o.width,i=o.height}var s={left:r,top:n,width:a,height:i,right:r+a,bottom:n+i};return t&&e?Ft(t,s):s}function jt(t,e,r,n){return t||(e?[0,0]:qt(r.target,n))}function qt(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function Xt(t,e){return[(0,o.PD)(e,t[0]),(0,o.PD)(e,t[1]),(0,o.PD)(e,t[2]),(0,o.PD)(e,t[3])]}function Yt(t){var e=t.left,r=t.top;return Xt([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function Lt(t,e){var r;null===(r=t[e])||void 0===r||r.unset(),t[e]=null}function Vt(t,e){if(e){var r=at(e);r.nextStyle=b(b({},r.nextStyle),t)}return{style:t,cssText:(0,i.RR)(t).map((function(e){return"".concat((0,i.wV)(e,"-"),": ").concat(t[e],";")})).join("")}}function Ut(t,e,r){var n=e.afterTransform||e.transform;return b(b({},Vt(b(b(b({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function Kt(t,e,r,n){var a=e.datas;a.datas||(a.datas={});var i=b(b({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function Jt(t,e,r){var n=e.datas,a="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),b(b({isDrag:a},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function Zt(t,e,r){t._emitter.on(e,r)}function Qt(t,e,r,n){return t.triggerEvent(e,r,n)}function $t(t,e){return window.getComputedStyle(t,e)}function te(t,e,r){var n={},a={};return t.filter((function(t){var i=t.name;if(n[i]||!e.some((function(e){return t[e]})))return!1;if(!r&&t.ableGroup){if(a[t.ableGroup])return!1;a[t.ableGroup]=!0}return n[i]=!0,!0}))}function ee(t,e){return t===e||null==t&&null==e}function re(t,e){var r=[],n=[];return t.forEach((function(a,i){var o=e(a,i,t),s=n.indexOf(o),u=r[s]||[];-1===s&&(n.push(o),r.push(u)),u.push(a)})),r}function ne(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function ie(t,e,r){return(0,o.Kf)((0,o.U_)(t,r),(0,o.WK)(e,r),r)}function oe(t,e){var r,n=t.is3d?4:3;return r=ie(t.rootMatrix,[e.distX,e.distY],n),e.distX=r[0],e.distY=r[1],e}function se(t,e,r,n,a){return(0,o.h9)(Pt(t,(0,o.PD)(r,e),a),n)}function ue(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function le(t){return Math.abs(t)<=T?0:t}function ce(t){return function(e){if(!e.isDragging(t))return"";var r=function(t,e){var r,n=t.targetGesto,a=t.controlGesto;return(null==n?void 0:n.isFlag())&&(r=n.getEventData()[e]),!r&&(null==a?void 0:a.isFlag())&&(r=a.getEventData()[e]),r||{}}(e,t),n=r.deg;return n?dt("view-control-rotation".concat(n)):""}}function fe(t,e){return void 0===e&&(e=[t]),function(r,n){if(n.isRequest)return!!e.some((function(t){return n.requestAble===t}))&&n.parentDirection;var a=n.inputEvent.target;return(0,i.pv)(a,dt("direction"))&&(!t||(0,i.pv)(a,dt(t)))}}function pe(t){var e={};for(var r in t)e[t[r]]=r;return e}function de(t,e){return t?t instanceof Element?t:(0,i.HD)(t)?e?document.querySelector(t):t:(0,i.mf)(t)?t():"current"in t?t.current:t:null}function he(t,e){return t?(!(r=t)||!(0,i.Kn)(r)||r instanceof Element||!(0,i.kJ)(r)&&!("length"in r)?[t]:[].slice.call(t)).reduce((function(t,r){return(0,i.HD)(r)&&e?x(x([],t,!0),[].slice.call(document.querySelectorAll(r)),!0):((0,i.kJ)(r)?t.push(he(r,e)):t.push(de(r,e)),t)}),[]):[];var r}function ge(t,e){var r=t.rootMatrix,n=t.is3d,a=n?4:3,i=(0,o.U_)(r,a);return n||(i=(0,o.mA)(i,3,4)),i[12]=0,i[13]=0,i[14]=0,(0,s.A8)(i,e)}function ve(t,e,r,n,a){var o=t[0],s=t[1],u=0,l=0;if(a&&o&&s){var c=(0,i.jv)([0,0],e),f=(0,i.jv)([0,0],n),p=Tt(e),d=Math.cos(c-f)*p;if(n[0])if(n[1]){var h=2*n[0]*o,g=2*n[1]*s,v=Tt([h+e[0],g+e[1]])-Tt([h,g]),m=(0,i.jv)([0,0],[r,1]);u=Math.cos(m)*v,l=Math.sin(m)*v}else l=(u=d)/r;else u=(l=d)*r}else u=n[0]*e[0],l=n[1]*e[1];return[u,l]}function me(t,e,r,n){var a,i=r.ratio,o=r.startOffsetWidth,s=r.startOffsetHeight,u=0,l=0,c=n.distX,f=n.distY,p=n.parentDistance,d=n.parentDist,h=n.parentScale,g=r.fixedDirection,v=[0,1].map((function(e){return Math.abs(t[e]-g[e])})),m=[0,1].map((function(t){var e=v[t];return 0!==e&&(e=2/e),e}));if(d)u=d[0],l=d[1],e&&(u?l||(l=u/i):u=l*i);else if(h)u=(h[0]-1)*o,l=(h[1]-1)*s;else if(p){var b=o*v[0],x=s*v[1],E=Tt([b,x]);u=p/E*b*m[0],l=p/E*x*m[1]}else{var S=J({datas:r,distX:c,distY:f});S=m.map((function(t,e){return S[e]*t})),u=(a=ve([o,s],S,i,t,e))[0],l=a[1]}return{distWidth:u,distHeight:l}}function be(t,e){if(e){if("left"===t)return{x:"0%",y:"50%"};if("top"===t)return{x:"50%",y:"50%"};if("center"===t)return{x:"50%",y:"50%"};if("right"===t)return{x:"100%",y:"50%"};if("bottom"===t)return{x:"50%",y:"100%"};var r=t.split(" "),n=r[0],a=r[1],i=be(n||""),o=be(a||""),s=b(b({},i),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return"left"===t?{x:"0%"}:"right"===t?{x:"100%"}:"top"===t?{y:"0%"}:"bottom"===t?{y:"100%"}:t?"center"===t?{value:"50%"}:{value:t}:{}}function xe(t,e,r){var n=be(t,!0),a=n.x,o=n.y;return[(0,i.AA)(a,e)||0,(0,i.AA)(o,r)||0]}function Ee(t,e){return t.length===e.length&&t.every((function(t,r){var n=e[r],a=(0,i.kJ)(t),o=(0,i.kJ)(n);return a&&o?Ee(t,n):!a&&!o&&t===n}))}var Se=E("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,a=e.angle,i=e.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),f=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),p=Kt(t,e,{});n&&(p.targets=n);var d=Qt(t,l,p);r.isPinch=!1!==d,r.ables=f;var h=r.isPinch;return!!h&&(f.forEach((function(r){if(i[r.name]=i[r.name]||{},r[c]){var n=b(b({},e),{datas:i[r.name],parentRotate:a,isPinch:!0});r[c](t,n)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(t,e){var r=e.datas,n=e.scale,a=e.distance,i=e.originalDatas,o=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=a*(1-1/n),c=Kt(t,e,{});s&&(c.targets=s);var f="onPinch".concat(s?"Group":"");Qt(t,f,c);var p=r.ables,d="drag".concat(s?"Group":"","Control");return p.forEach((function(r){r[d]&&r[d](t,b(b({},e),{datas:i[r.name],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))})),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,i=e.targets,o=e.originalDatas;if(r.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=Jt(t,e,{isDrag:n});i&&(u.targets=i),Qt(t,s,u);var l=r.ables,c="drag".concat(i?"Group":"","ControlEnd");return l.forEach((function(r){r[c]&&r[c](t,b(b({},e),{isDrag:n,datas:o[r.name],inputEvent:a,isPinch:!0}))})),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,b(b({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,b(b({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,b(b({},e),{targets:t.props.targets}))}});function De(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map((function(t,n){return i[n]=i[n]||{},i[n][e]=i[n][e]||{},b(b({},r),{datas:i[n][e],originalDatas:i[n]})}))}function Me(t,e,r,n,a,i,o){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=a.isPinch,c=a.datas,f=De(t,e.name,a),p=t.moveables,d=f.map((function(t,a){var f=p[a],d=f.state,h=d.gestos,g=t;if(s)g=new q(o).dragStart(n,t);else{if(h[o]||(h[o]=c.childGestos[a]),!h[o])return;g=j(t,d,n,l,i,o)}var v=e[r](f,b(b({},g),{parentFlag:!0}));return u&&(h[o]=null),v}));return s&&(c.childGestos=p.map((function(t){return t.state.gestos[o]}))),d}function Re(t,e,r,n,a,i){void 0===a&&(a=function(t,e){return e});var o=!!r.match(/End$/g),s=De(t,e.name,n),u=t.moveables;return s.map((function(t,n){var s,l=u[n];s=a(l,t);var c=e[r](l,b(b({},s),{parentFlag:!0}));return c&&i&&i(l,t,c,n),o&&(l.state.gestos={}),c}))}var Ce=["left","right","center"],ye=["top","bottom","middle"],Pe={start:"left",end:"right",center:"center"},ze={start:"top",end:"bottom",center:"middle"};function Oe(t,e){var r=t.props,n=r.snappable,a=r.bounds,i=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return!(!n||!p||e&&!0!==n&&n.indexOf(e)<0||!(u||l||a||i||f&&f.length||o&&o.length||s&&s.length))}function Ge(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function we(t,e){var r=function(t,e){var r=Ge(t),n={};for(var a in r)a in e&&r[a]&&(n[a]=e[a]);return n}(t,e),n=ye.filter((function(t){return t in r})),a=Ce.filter((function(t){return t in r}));return{horizontal:n.map((function(t){return r[t]})),vertical:a.map((function(t){return r[t]}))}}function Te(t,e,r,n){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var a=t[n];if(!(0,i.o8)(a))return a}return t[r]}(n,t.props.snapThreshold,5);return Be(t.state.guidelines,e,r,a)}function Be(t,e,r,n){return{vertical:Ie(t,"vertical",e,n),horizontal:Ie(t,"horizontal",r,n)}}function Ae(t,e,r){var n=we(t.props.snapDirections,e);return Te(t,n.vertical,n.horizontal,r)}function ke(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:e,offset:a,dist:i,pos:r.pos,guideline:o}}function Ie(t,e,r,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===e?0:1,i=r.map((function(r,i){var o=t.map((function(t){var e=t.pos,n=r-e[a];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var r=t.guideline,a=t.dist;return!(r.type!==e||a>n)})).sort((function(t,e){return t.dist-e.dist}));return{pos:r,index:i,guidelineInfos:o}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),o=i.length>0;return{isSnap:o,index:o?i[0].index:-1,posInfos:i}}function Ne(t,e){var r=Math.abs(t.offset),n=Math.abs(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<T?1:n<T?-1:r-n}function _e(t,e){return t.slice().sort((function(t,r){var n=t.sign[e],a=r.sign[e],i=t.offset[e],o=r.offset[e];return n?a?Ne({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:r.isBound,isSnap:r.isSnap,offset:o}):-1:1}))[0]}function Fe(t,e){var r=(0,i.Y8)([e[0][0],e[1][0]]),n=(0,i.Y8)([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function We(t,e){var r,n,a=e[0],i=e[1],o=i[0]-a[0],s=i[1]-a[1];return Math.abs(o)<T&&(o=0),Math.abs(s)<T&&(s=0),o?s?(r=s/o*(t[0]-a[0])+a[1],n=t[1]):(r=a[1],n=t[1]):(r=a[0],n=t[0]),r-n}function He(t,e,r,n){return void 0===n&&(n=T),t.every((function(t){var a=We(t,e);return a<=0===r||Math.abs(a)<=n}))}function je(t,e,r,n,a){return void 0===a&&(a=0),n&&e-a<=t||!n&&t<=r+a?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function qe(t,e,r,n,a,i){var o,s=e[0],u=e[1],l=t[0],c=r[0],f=r[1],p=le(f[1]-c[1]),d=u,h=s,g=-s/u;if(!le(f[0]-c[0])){if(i&&!h)return{isBound:!1,offset:0};if(d)return je(g*(c[0]-l[0])+l[1],c[1],f[1],n,a);var v=c[0]-l[0];return{isBound:o=Math.abs(v)<=(a||0),offset:o?v:0}}return p||i&&!d?{isBound:!1,offset:0}:h?je((c[1]-l[1])/g+l[0],c[0],f[0],n,a):(v=c[1]-l[1],{isBound:o=Math.abs(v)<=(a||0),offset:o?v:0})}function Xe(t,e,r){return e.map((function(e){var n=function(t,e){var r=e.line,n=e.centerSign,a=e.verticalSign,i=e.horizontalSign,o=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,c=s.width,f=s.height,p=[[u,l],[u,l+f]],d=[[u,l],[u+c,l]],h=[[u+c,l],[u+c,l+f]],g=[[u,l+f],[u+c,l+f]];if(He([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=qe(r,o,d,a),m=qe(r,o,g,a),b=qe(r,o,p,i),x=qe(r,o,h,i),E=v.isBound&&m.isBound,S=v.isBound||m.isBound,D=b.isBound&&x.isBound,M=b.isBound||x.isBound,R=ae(v.offset,m.offset),C=ae(b.offset,x.offset),y=[0,0],P=!1,z=!1;return Math.abs(C)<Math.abs(R)?(y=[R,0],P=S,z=E):(y=[0,C],P=M,z=D),{isAllBound:z,isVerticalBound:S,isHorizontalBound:M,isBound:P,offset:y}}(t,e),a=n.isBound,i=n.offset,o=n.isVerticalBound,s=n.isHorizontalBound,u=e.multiple,l=J({datas:r,distX:i[0],distY:i[1]}).map((function(t,e){return t*(u[e]?2/u[e]:0)}));return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:s,isSnap:!1,offset:l}}))}function Ye(t,e,r,n){var a=t.state,o=zt(a.allMatrix,100,100,a.is3d?4:3),s=Q(o,[0,0]);return function(t,e){var r=[],n=t[0],a=t[1];return n&&a?r.push([[0,2*a],t,[-n,a]],[[2*n,0],t,[n,-a]]):n?(r.push([[2*n,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(r.push([[0,2*a],[1,a],[-1,a]]),e&&r.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(r,n).map((function(t){var r=t[0],n=t[1],a=t[2],u=[Q(o,n),Q(o,a)],l=function(t){var e=t[0],r=t[1],n=r[0]-e[0],a=r[1]-e[1];Math.abs(n)<i.Vp&&(n=0),Math.abs(a)<i.Vp&&(a=0);var o=0,s=0,u=0;return n?a?(s=1,u=(o=-a/n)*e[0]-e[1]):(s=1,u=-e[1]):(o=-1,u=e[0]),[o,s,u].map((function(t){return(0,i.P2)(t,i.Vp)}))}(u),c=Fe(s,u),f=c.vertical,p=c.horizontal;return{multiple:r,centerSign:We(s,u)<=0,verticalSign:f,horizontalSign:p,lineConstants:l,line:[Q(e,n),Q(e,a)]}}))}function Le(t,e,r,n){var a=n?t.map((function(t){return(0,o.U1)(t,n)})):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some((function(t){var n=We(r,t)<=0;return!He(e,t,n)}))}function Ve(t,e,r){var n=t||{},a=n.position,i=void 0===a?"client":a,o=n.left,s=void 0===o?-1/0:o,u=n.top,l=void 0===u?-1/0:u,c=n.right,f=void 0===c?1/0:c,p=n.bottom,d={position:i,left:s,top:l,right:f,bottom:void 0===p?1/0:p};return{vertical:Ke(d,e,!0),horizontal:Ke(d,r,!1)}}function Ue(t,e){var r=t.state,n=r.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},h="css"===(d.position||"client"),g=d.left,v=void 0===g?-1/0:g,m=d.top,b=void 0===m?-1/0:m,x=d.right,E=void 0===x?h?-1/0:1/0:x,S=d.bottom,D=void 0===S?h?-1/0:1/0:S;return h&&(E=i+f-l-E,D=a+p-c-D),{left:v+l-o,right:E+l-o,top:b+c-s,bottom:D+c-s}}function Ke(t,e,r){var n=t[r?"left":"top"],a=t[r?"right":"bottom"],i=Math.min.apply(Math,e),o=Math.max.apply(Math,e),s=[];return n+1>i&&s.push({isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function Je(t,e,r){return(r?t.map((function(t){return(0,o.U1)(t,r)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function Ze(t,e){return function(t,e){var r,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,l="horizontal"===n,c=l?"Y":"X";return e.createElement("div",{key:u,className:a.join(" "),style:(r={},r[l?"width":"height"]="".concat(i),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(s,")"),r)})}(b(b({},t),{classNames:x([dt("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat((0,i.P2)(t,.1),"px")}))}),e)}function Qe(t,e,r,n,a,i,o,s){var u=t.props.zoom;return r.map((function(t,r){var l=t.type,c=t.pos,f=[0,0];return f[o]=n,f[o?0:1]=-a+c,Ze({key:"".concat(e,"TargetGuideline").concat(r),classNames:[dt("target","bold",l)],posValue:f,sizeValue:i,zoom:u,direction:e},s)}))}function $e(t,e,r,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,l="horizontal"===e?Pe:ze,c=a[l.start],f=a[l.end];return r.filter((function(t){var e=t.hide,r=t.elementRect;if(e)return!1;if(u&&r){var n=r.rect;if(n[l.start]<=c&&f<=n[l.end])return!1}return!0})).map((function(t,r){var a=t.pos,o=t.size,u=t.element,l=t.className,c=[-n[0]+a[0],-n[1]+a[1]];return Ze({key:"".concat(e,"-default-guideline-").concat(r),classNames:u?[dt("bold"),l]:[dt("normal"),l],direction:e,posValue:c,sizeValue:o,zoom:s},i)}))}function tr(t,e,r,n,a,i,o,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,g=void 0===h?function(t,e){return t}:h,v=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",x=Math.abs(a),E=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:dt("guideline-group",e),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[b]="".concat(x,"px"),u)},Ze({direction:e,classNames:[dt(r),o],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:dt("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(v,")")}},E>0?g(E,e):""))}function er(t,e,r,n,a){var o=function(t,e,r,n){var a=e[0]-t[0],o=e[1]-t[1];if(Math.abs(a)<i.Vp&&(a=0),Math.abs(o)<i.Vp&&(o=0),!a)return n?[0,0]:[0,r];if(!o)return n?[r,0]:[0,0];var s=o/a,u=t[1]-s*t[0];return n?[r,s*(e[0]+r)+u-e[1]]:[(e[1]+r-u)/s-e[0],r]}(t,e,r,n);if(!o)return{isOutside:!1,offset:[0,0]};var s=(0,i.zt)(t,e),u=(0,i.zt)(o,t),l=(0,i.zt)(o,e),c=u>s||l>s,f=J({datas:a,distX:o[0],distY:o[1]});return{offset:[f[0],f[1]],isOutside:c}}function rr(t,e){return t.isBound?t.offset:e.isSnap?ke(e).offset:0}function nr(t,e,r,n,a,s){if(!Oe(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var u=Xt(s.absolutePoses,[e,r]),l=Ot(u),c=l.left,f=l.right,p=l.top,d=l.bottom,h={horizontal:u.map((function(t){return t[1]})),vertical:u.map((function(t){return t[0]}))},g=ar(t,a,we(Ge(t.props.snapDirections),{left:c,right:f,top:p,bottom:d,center:(c+f)/2,middle:(p+d)/2}),h),v=g.vertical,m=g.horizontal,x=function(t,e,r){var n,a=Xe(t,Ye(t,e,[0,0],!1).map((function(t){return b(b({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),r),i=_e(a,0),s=_e(a,1),u=0,l=0,c=i.isVerticalBound||s.isVerticalBound,f=i.isHorizontalBound||s.isHorizontalBound;return(c||f)&&(n=function(t,e){var r=t.datas,n=t.distX,a=t.distY,i=(r.beforeMatrix,r.matrix),s=r.is3d,u=(r.startDragBeforeDist,r.startDragDist),l=r.absoluteOrigin,c=s?4:3;return(0,o.h9)((0,o.Kf)(i,(0,o.PD)(u,[n,a]),c),l)}({datas:r,distX:-i.offset[0],distY:-s.offset[1]}),u=n[0],l=n[1]),{vertical:{isBound:c,offset:u},horizontal:{isBound:f,offset:l}}}(t,u,s),E=x.vertical,S=x.horizontal,D=v.isSnap,M=m.isSnap,R=v.isBound||E.isBound,C=m.isBound||S.isBound,y=function(t,e,r,n,a){var s=e[0],u=e[1],l=r[0],c=r[1],f=n[0],p=n[1],d=a[0],h=a[1],g=-d,v=-h;if(t&&s&&u){g=0,v=0;var m=[];if(l&&c?m.push([0,h],[d,0]):l?m.push([d,0]):c?m.push([0,h]):f&&p?m.push([0,h],[d,0]):f?m.push([d,0]):p&&m.push([0,h]),m.length){m.sort((function(t,e){return Tt((0,o.h9)([s,u],t))-Tt((0,o.h9)([s,u],e))}));var b=m[0];if(b[0]&&Math.abs(s)>i.Vp)g=-b[0],v=u*Math.abs(s+g)/Math.abs(s)-u;else if(b[1]&&Math.abs(u)>i.Vp){var x=u;v=-b[1],g=s*Math.abs(u+v)/Math.abs(x)-s}if(t&&c&&l)if(Math.abs(g)>i.Vp&&Math.abs(g)<Math.abs(d))g*=E=Math.abs(d)/Math.abs(g),v*=E;else if(Math.abs(v)>i.Vp&&Math.abs(v)<Math.abs(h)){var E;g*=E=Math.abs(h)/Math.abs(v),v*=E}else g=ae(-d,g),v=ae(-h,v)}}else g=s||l?-d:0,v=u||c?-h:0;return[g,v]}(n,[e,r],[R,C],[D,M],[ae(v.offset,E.offset),ae(m.offset,S.offset)]);return[{isBound:R,isSnap:D,offset:y[0]},{isBound:C,isSnap:M,offset:y[1]}]}function ar(t,e,r,n){void 0===n&&(n=r);var a=Ve(Ue(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Te(t,r.vertical,r.horizontal),u=s.horizontal,l=s.vertical,c=rr(i[0],u),f=rr(o[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l}}}function ir(t,e,r,n,a){var i=Ve(e,r,n),o=i.horizontal,s=i.vertical,u=Be(t,r,n,a),l=u.horizontal,c=u.vertical,f=rr(o[0],l),p=rr(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function or(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function sr(t){var e=t.state,r=e.containerClientRect,n=e.hasFixed,a=r.overflow,s=r.scrollHeight,c=r.scrollWidth,f=r.clientHeight,p=r.clientWidth,d=r.clientLeft,h=r.clientTop,g=t.props,v=g.snapGap,m=void 0===v||v,E=g.verticalGuidelines,S=g.horizontalGuidelines,D=g.snapThreshold,M=void 0===D?5:D,R=g.snapGridWidth,C=void 0===R?0:R,y=g.snapGridHeight,P=void 0===y?0:y,z=g.maxSnapElementGuidelineDistance,O=void 0===z?1/0:z,G=Ot(Yt(t.state)),w=G.top,T=G.left,B=G.bottom,A=G.right,k={top:w,left:T,bottom:B,right:A,center:(T+A)/2,middle:(w+B)/2},I=function(t){var e=t.state,r=t.props.elementGuidelines,n=void 0===r?[]:r;if(!n.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter((function(t){return!t.refresh})),s=n.map((function(t){return(0,i.Kn)(t)&&"element"in t?b(b({},t),{element:de(t.element,!0)}):{element:de(t,!0)}})).filter((function(t){return t.element})),c=(0,u.H)(a.map((function(t){return t.element})),s.map((function(t){return t.element}))),f=c.maintained,p=c.added,d=[];f.forEach((function(t){var e=t[0],r=t[1];d[r]=a[e]})),function(t,e){if(!e.length)return[];var r=t.state,n=r.containerClientRect,a=r.targetClientRect,i=a.top,s=a.left,u=r.rootMatrix,c=r.is3d?4:3,f=function(t,e,r){var n=Pt(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}(u,n,c),p=f[0],d=f[1],h=Yt(r),g=(0,l.i$)(h),v=g.minX,m=g.minY,x=(0,o.h9)([v,m],ie(u,[s-p,i-d],c)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),E=x[0],S=x[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),r=e.left-p,n=e.top-d,a=n+e.height,i=r+e.width,o=ie(u,[r,n],c),s=o[0],l=o[1],f=ie(u,[i,a],c),h=f[0],g=f[1];return b(b({},t),{rect:{left:s+E,right:h+E,top:l+S,bottom:g+S,center:(s+h)/2+E,middle:(l+g)/2+S}})}))}(t,p.map((function(t){return s[t]}))).map((function(t,e){d[p[e]]=t})),e.elementRects=d;var h=Ge(t.props.elementSnapDirections),g=[];return d.forEach((function(t){var e=t.element,r=t.top,n=void 0===r?h.top:r,a=t.left,o=void 0===a?h.left:a,s=t.right,u=void 0===s?h.right:s,l=t.bottom,c=void 0===l?h.bottom:l,f=t.center,p=void 0===f?h.center:f,d=t.middle,v=void 0===d?h.middle:d,m=t.className,b=t.rect,x=we({top:n,right:u,left:o,bottom:c,center:p,middle:v},b),E=x.horizontal,S=x.vertical,D=b.top,M=b.left,R=b.right-M,C=b.bottom-D,y=[R,C];S.forEach((function(r){g.push({type:"vertical",element:e,pos:[(0,i.P2)(r,.1),D],size:C,sizes:y,className:m,elementRect:t})})),E.forEach((function(r){g.push({type:"horizontal",element:e,pos:[M,(0,i.P2)(r,.1)],size:R,sizes:y,className:m,elementRect:t})}))})),g}(t),N=x([],I,!0);m&&N.push.apply(N,function(t,e,r){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=void 0===a?1/0:a,o=n.maxSnapElementGapDistance,s=void 0===o?1/0:o,u=t.state.elementRects,l=[];return[["vertical",Pe,ze],["horizontal",ze,Pe]].forEach((function(t){var n=t[0],a=t[1],o=t[2],c=e[a.start],f=e[a.end],p=e[a.center],d=e[o.start],h=e[o.end];function g(t){var e=t.rect;return e[a.end]<c+r?c-e[a.end]:f-r<e[a.start]?e[a.start]-f:-1}var v=u.filter((function(t){var e=t.rect;return!(e[o.start]>h||e[o.end]<d)&&g(t)>0})).sort((function(t,e){return g(t)-g(e)})),m=[];v.forEach((function(t){v.forEach((function(e){if(t!==e){var r=t.rect,n=e.rect,a=r[o.start],i=r[o.end],s=n[o.start];a>n[o.end]||s>i||m.push([t,e])}}))})),m.forEach((function(t){var o=t[0],u=t[1],d=o.rect,h=u.rect,g=d[a.start],v=d[a.end],m=h[a.start],b=h[a.end],x=0,E=0,S=!1,D=!1,M=!1;if(v<=c&&f<=m){if(D=!0,E=v+(x=(m-v-(f-c))/2)+(f-c)/2,Math.abs(E-p)>r)return}else if(v<m&&b<c+r){if(S=!0,E=b+(x=m-v),Math.abs(E-c)>r)return}else{if(!(v<m&&f-r<g))return;if(M=!0,E=g-(x=m-v),Math.abs(E-f)>r)return}x&&ur(e,h,n,i)&&(x>s||l.push({type:n,pos:"vertical"===n?[E,0]:[0,E],element:u.element,size:0,className:u.className,isStart:S,isCenter:D,isEnd:M,gap:x,hide:!0,gapRects:[o,u]}))}))})),l}(t,k,M)),N.push.apply(N,function(t,e,r,n,a,o){void 0===a&&(a=0),void 0===o&&(o=0);var s=[];if(e)for(var u=0;u<=n;u+=e)s.push({type:"horizontal",pos:[0,(0,i.P2)(u-o,.1)],size:r,hide:!0});if(t)for(u=0;u<=r;u+=t)s.push({type:"vertical",pos:[(0,i.P2)(u-a,.1),0],size:n,hide:!0});return s}(C,P,a?c:p,a?s:f,d,h));var _=b({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(n){var F=r.left,W=r.top;_.left+=F,_.top+=W,_.right+=F,_.bottom+=W}return N.push.apply(N,lr(S||!1,E||!1,a?c:p,a?s:f,d,h,_)),N=N.filter((function(t){var e=t.element,r=t.elementRect,n=t.type;if(!e||!r)return!0;var a=r.rect;return ur(k,a,n,O)})),N}function ur(t,e,r,n){return"horizontal"===r?Math.abs(t.right-e.left)<=n||Math.abs(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:"vertical"!==r||Math.abs(t.bottom-e.top)<=n||Math.abs(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom}function lr(t,e,r,n,a,o,s){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var u=[],l=s.left,c=s.top,f=s.bottom,p=r+s.right-l,d=n+f-c;return t&&t.forEach((function(t){var e=(0,i.Kn)(t)?t:{pos:t};u.push({type:"horizontal",pos:[l,(0,i.P2)(e.pos-o+c,.1)],size:p,className:e.className})})),e&&e.forEach((function(t){var e=(0,i.Kn)(t)?t:{pos:t};u.push({type:"vertical",pos:[(0,i.P2)(e.pos-a+l,.1),c],size:d,className:e.className})})),u}function cr(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(r!==n){var s=de(n,!0);if(s){var u=Ht(s),l=ge(e,[u.left-a.left,u.top-a.top]),c=ge(e,[u.right-a.right,u.bottom-a.bottom]);o.left=(0,i.P2)(l[0],1e-5),o.top=(0,i.P2)(l[1],1e-5),o.right=(0,i.P2)(c[0],1e-5),o.bottom=(0,i.P2)(c[1],1e-5)}}return e.snapContainer=n,e.snapOffset=o,e.guidelines=sr(t),e.enableSnap=!0,!0}function fr(t,e,r,n,a,i){var s=zt(t,e,r,i?4:3),u=Q(s,n);return Xt(s,(0,o.h9)(a,u))}function pr(t,e,r,n,a,s){var u=function(t,e,r){var n=[];if(r)1!==Math.abs(e[0])||1!==Math.abs(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(r){var i=[t*a[0],r*a[1]];e[0]===i[0]&&e[1]===i[1]||n.push([e,i])}))}))}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach((function(r){n.push([[e[0],-1],[r*t[0],-1]],[[e[0],0],[r*t[0],0]],[[e[0],1],[r*t[0],1]])})):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach((function(r){n.push([[-1,e[1]],[-1,r*t[1]]],[[0,e[1]],[0,r*t[1]]],[[1,e[1]],[1,r*t[1]]])}));return n}(r,s.fixedDirection,n),l=Ye(t,e,r,n),c=x(x([],function(t,e,r,n,a,s){return r.map((function(r){var u=r[0],l=r[1],c=Q(e,u),f=Q(e,l),p=n?function(t,e,r,n){var a=function(t,e,r){var n=Ue(t),a=n.left,i=n.top,s=n.right,u=n.bottom,l=r[0],c=r[1],f=(0,o.h9)(r,e),p=f[0],d=f[1];Math.abs(p)<T&&(p=0),Math.abs(d)<T&&(d=0);var h=d>0,g=p>0,v={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===p&&0===d)return{vertical:v,horizontal:m};if(0===p)h?u<c&&(m.pos=u,m.offset=c-u):i>c&&(m.pos=i,m.offset=c-i);else if(0===d)g?s<l&&(v.pos=s,v.offset=l-s):a>l&&(v.pos=a,v.offset=l-a);else{var b=d/p,x=r[1]-b*l,E=0,S=0,D=!1;g&&s<=l?(E=b*s+x,S=s,D=!0):!g&&l<=a&&(E=b*a+x,S=a,D=!0),D&&(E<i||E>u)&&(D=!1),D||(h&&u<=c?(S=((E=u)-x)/b,D=!0):!h&&c<=i&&(S=((E=i)-x)/b,D=!0)),D&&(v.isBound=!0,v.pos=S,v.offset=l-S,m.isBound=!0,m.pos=E,m.offset=c-E)}return{vertical:v,horizontal:m}}(t,e,r),i=a.horizontal,s=a.vertical,u=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=r[0],a=r[1],i=e[0],s=e[1],u=(0,o.h9)(r,e),l=u[0],c=u[1],f=c>0,p=l>0;l=le(l),c=le(c);var d={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:d,horizontal:h};var g=Te(t,l?[n]:[],c?[a]:[]),v=g.vertical,m=g.horizontal;v.posInfos.filter((function(t){var e=t.pos;return p?e>=i:e<=i})),m.posInfos.filter((function(t){var e=t.pos;return f?e>=s:e<=s})),v.isSnap=v.posInfos.length>0,m.isSnap=m.posInfos.length>0;var b=ke(v),x=b.isSnap,E=b.guideline,S=ke(m),D=S.isSnap,M=S.guideline,R=D?M.pos[1]:0,C=x?E.pos[0]:0;if(0===l)D&&(h.isSnap=!0,h.pos=M.pos[1],h.offset=a-h.pos);else if(0===c)x&&(d.isSnap=!0,d.pos=C,d.offset=n-C);else{var y=c/l,P=r[1]-y*n,z=0,O=0,G=!1;x?(z=y*(O=C)+P,G=!0):D&&(O=((z=R)-P)/y,G=!0),G&&(d.isSnap=!0,d.pos=O,d.offset=n-O,h.isSnap=!0,h.pos=z,h.offset=a-z)}return{vertical:d,horizontal:h}}(t,e,r),l=u.horizontal,c=u.vertical,f=or(i,l),p=or(s,c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:h}}}(t,c,f,a):ar(t,a,{vertical:[f[0]],horizontal:[f[1]]}),d=p.horizontal,h=d.offset,g=d.isBound,v=d.isSnap,m=p.vertical,b=m.offset,x=m.isBound,E=m.isSnap,S=(0,o.h9)(l,u);if(!b&&!h)return{isBound:x||g,isSnap:E||v,sign:S,offset:[0,0]};var D=function(t,e,r,n){var a=(0,i.jv)(t,e)/Math.PI*180,o=r.vertical,s=o.isBound,u=o.isSnap,l=o.dist,c=r.horizontal,f=c.isBound,p=c.isSnap,d=a%180,h=d<3||d>177,g=d>87&&d<93;return c.dist<l&&(s||u&&!g&&(!n||!h))?"vertical":!f&&(!p||h||n&&g)?"":"horizontal"}(c,f,p,n);if(!D)return{sign:S,isBound:!1,isSnap:!1,offset:[0,0]};var M="vertical"===D,R=[0,0];return R=(R=n||1!==Math.abs(l[0])||1!==Math.abs(l[1])||u[0]===l[0]||u[1]===l[1]?er(c,f,-(M?b:h),M,s).offset:J({datas:s,distX:-b,distY:-h})).map((function(t,e){return t*(S[e]?2/S[e]:0)})),{sign:S,isBound:M?x:g,isSnap:M?E:v,offset:R}}))}(t,e,u,n,a,s),!0),Xe(t,l,s),!0),f=_e(c,0),p=_e(c,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function dr(t,e,r,n,a,o,s,u){for(var l=Yt(t.state),c=t.props.keepRatio,f=0,p=0,d=0;d<2;++d){var h=pr(t,e(f,p),a,c,s,u),g=h.width,v=h.height,m=g.isBound,b=v.isBound,x=g.offset,E=v.offset;if(1===d&&(m||(x=0),b||(E=0)),0===d&&s&&!m&&!b)return[0,0];if(c){var S=Math.abs(x)*(r?1/r:1),D=Math.abs(E)*(n?1/n:1);(m&&b?S<D:b||!m&&S<D)?x=r*E/n:E=n*x/r}f+=x,p+=E}if(a[0]&&a[1]){var M=function(t,e,r,n,a){var o=[-r[0],-r[1]],s=t.state,u=s.width,l=s.height,c=t.props.bounds,f=1/0,p=1/0;if(c){var d=[[r[0],-r[1]],[-r[0],r[1]]],h=c.left,g=void 0===h?-1/0:h,v=c.top,m=void 0===v?-1/0:v,b=c.right,x=void 0===b?1/0:b,E=c.bottom,S=void 0===E?1/0:E;d.forEach((function(t){var r=t[0]!==o[0],s=t[1]!==o[1],c=Q(e,t),d=360*(0,i.jv)(n,c)/Math.PI;if(s){var h=c.slice();(Math.abs(d-360)<2||Math.abs(d-180)<2)&&(h[1]=n[1]);var v=er(n,h,(n[1]<c[1]?S:m)-c[1],!1,a),b=v.offset[1],E=v.isOutside;isNaN(b)||(p=l+(E?1:-1)*Math.abs(b))}if(r){h=c.slice(),(Math.abs(d-90)<2||Math.abs(d-270)<2)&&(h[0]=n[0]);var D=er(n,h,(n[0]<c[0]?x:g)-c[0],!0,a),M=D.offset[0],R=D.isOutside;isNaN(M)||(f=u+(R?1:-1)*Math.abs(M))}}))}return{maxWidth:f,maxHeight:p}}(t,l,a,o,u),R=M.maxWidth,C=M.maxHeight,y=function(t,e,r,n,a,o,s,u,l){var c=Q(e,s),f=ar(t,u,{vertical:[c[0]],horizontal:[c[1]]}),p=f.horizontal.offset,d=f.vertical.offset;if((0,i.P2)(d,w)||(0,i.P2)(p,w)){var h=J({datas:l,distX:-d,distY:-p}),g=h[0],v=h[1];return[Math.min(a||1/0,r+s[0]*g)-r,Math.min(o||1/0,n+s[1]*v)-n]}return[0,0]}(t,e(f,p).map((function(t){return t.map((function(t){return(0,i.P2)(t,w)}))})),r+f,n+p,R,C,a,s,u);f+=x=y[0],p+=E=y[1]}return[f,p]}function hr(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var r=t.guideline;e.indexOf(r)>-1||e.push(r)}))})),e}function gr(t,e,r,n,a,o){var s=Ve(Ue(t,o),e,r),u=s.vertical,l=s.horizontal;u.forEach((function(t){t.isBound&&n.push({type:"bounds",pos:t.pos})})),l.forEach((function(t){t.isBound&&a.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var r=t.getRect(),n=[r.pos1,r.pos2,r.pos3,r.pos4],a=Q(n,[0,0]),i=e.left,o=e.top,s=e.width,u=e.height,l=[[i,o],[i,o+u]],c=[[i,o],[i+s,o]],f=[[i+s,o],[i+s,o+u]],p=[[i,o+u],[i+s,o+u]],d=Ye(t,n,[0,0],!1),h=[],g=[],v={top:!1,bottom:!1,left:!1,right:!1};return d.forEach((function(t){var e=t.line,r=t.lineConstants,n=Fe(a,e),d=n.horizontal,m=n.vertical,b=qe(e,r,c,m,1,!0),x=qe(e,r,p,m,1,!0),E=qe(e,r,l,d,1,!0),S=qe(e,r,f,d,1,!0);b.isBound&&!v.top&&(h.push(o),v.top=!0),x.isBound&&!v.bottom&&(h.push(o+u),v.bottom=!0),E.isBound&&!v.left&&(g.push(i),v.left=!0),S.isBound&&!v.right&&(g.push(i+s),v.right=!0)})),{horizontal:h,vertical:g}}(t),f=c.vertical,p=c.horizontal;f.forEach((function(t){(0,i.cx)(n,(function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t}))>=0||n.push({type:"bounds",pos:t})})),p.forEach((function(t){(0,i.cx)(a,(function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t}))>=0||a.push({type:"bounds",pos:t})}))}var vr=fe("",["resizable","scalable"]),mr={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var r=t.state,n=r.top,a=r.left,i=r.pos1,o=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=t.props.snapRenderThreshold,f=void 0===c?1:c;if(!l||!l.render||!Oe(t,""))return[];r.guidelines=sr(t);var p=Math.min(i[0],o[0],s[0],u[0]),d=Math.min(i[1],o[1],s[1],u[1]),h=l.externalPoses||[],g=Yt(t.state),v=[],m=[],E=[],S=[],D=[],M=Ot(g),R=M.width,C=M.height,y=M.top,P=M.left,z=M.bottom,O=M.right,G={left:P,right:O,top:y,bottom:z,center:(P+O)/2,middle:(y+z)/2},w=h.length>0,T=w?Ot(h):{};if(!l.request){if(l.direction&&D.push(function(t,e,r,n){void 0===n&&(n=1);var a=[];if(r[0]&&r[1])a=[r,[-r[0],r[1]],[r[0],-r[1]]].map((function(t){return Q(e,t)}));else if(r[0]||r[1])t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],r].map((function(t){return Q(e,t)})):(a=function(t,e){return Z(e).map((function(e){return t[e]}))}(e,r),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)a.push(i[o]),a.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Te(t,a.map((function(t){return t[0]})),a.map((function(t){return t[1]})),n)}(t,g,l.direction,f)),l.snap){var B=Ot(g);l.center&&(B.middle=(B.top+B.bottom)/2,B.center=(B.left+B.right)/2),D.push(Ae(t,B,f))}w&&(l.center&&(T.middle=(T.top+T.bottom)/2,T.center=(T.left+T.right)/2),D.push(Ae(t,T,f))),D.forEach((function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;v.push.apply(v,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),m.push.apply(m,r.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),E.push.apply(E,hr(e)),S.push.apply(S,hr(r))}))}gr(t,[P,O],[y,z],v,m),w&&gr(t,[T.left,T.right],[T.top,T.bottom],v,m,l.externalBounds);var A=x(x([],E,!0),S,!0),k=A.filter((function(t){return t.element&&!t.gapRects})),I=A.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));return Qt(t,"onSnap",{guidelines:A.filter((function(t){return!t.element})),elements:k,gaps:I},!0),x(x(x(x(x(x([],function(t,e,r,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach((function(s){var u=e.filter((function(t){return t.type===s})),l="vertical"===s?1:0,c=l?0:1,f=function(t,e,r,n){var a="vertical"===t?0:1,i="vertical"===t?1:0,o=a?Pe:ze,s=r[o.start],u=r[o.end];return re(e,(function(t){return t.pos[a]})).map((function(e){var r=[],l=[];return e.forEach((function(e){var c,f,p=e.element,d=e.elementRect.rect;if(d[o.end]<s)r.push(e);else if(u<d[o.start])l.push(e);else if(d[o.start]<=s&&u<=d[o.end]&&n){var h=e.pos,g={element:p,rect:b(b({},d),(c={},c[o.end]=d[o.start],c))},v={element:p,rect:b(b({},d),(f={},f[o.start]=d[o.end],f))},m=[0,0],x=[0,0];m[a]=h[a],m[i]=h[i],x[a]=h[a],x[i]=h[i]+e.size,r.push({type:t,pos:m,size:0,elementRect:g}),l.push({type:t,pos:x,size:0,elementRect:v})}})),r.sort((function(t,e){return e.pos[i]-t.pos[i]})),l.sort((function(t,e){return t.pos[i]-e.pos[i]})),{total:e,start:r,end:l,inner:[]}}))}(s,u,n,i),p=l?ze:Pe,d=l?Pe:ze,h=n[p.start],g=n[p.end];f.forEach((function(e){var i=e.total,u=e.start,f=e.end,v=e.inner,m=r[c]+i[0].pos[c]-n[d.start],b=n;u.forEach((function(e){var n=e.elementRect.rect,i=b[p.start]-n[p.end];if(i>0){var u=[0,0];u[l]=r[l]+b[p.start]-h-i,u[c]=m,o.push(tr(t,s,"dashed",o.length,i,u,e.className,a))}b=n})),b=n,f.forEach((function(e){var n=e.elementRect.rect,i=n[p.start]-b[p.end];if(i>0){var u=[0,0];u[l]=r[l]+b[p.end]-h,u[c]=m,o.push(tr(t,s,"dashed",o.length,i,u,e.className,a))}b=n})),v.forEach((function(e){var n=e.elementRect.rect,i=h-n[p.start],u=n[p.end]-g,f=[0,0],d=[0,0];f[l]=r[l]-i,f[c]=m,d[l]=r[l]+g-h,d[c]=m,o.push(tr(t,s,"dashed",o.length,i,f,e.className,a)),o.push(tr(t,s,"dashed",o.length,u,d,e.className,a))}))}))})),o}(t,k,[p,d],G,e),!0),function(t,e,r,n,a){var i=[];return["horizontal","vertical"].forEach((function(o){var s=e.filter((function(t){return t.type===o})).slice(0,1),u="vertical"===o?0:1,l=u?0:1,c=u?ze:Pe,f=u?Pe:ze,p=n[c.start],d=n[c.end],h=n[f.start],g=n[f.end];s.forEach((function(e){var n=e.gap,o=e.gapRects,s=Math.max.apply(Math,x([h],o.map((function(t){return t.rect[f.start]})),!1)),v=Math.min.apply(Math,x([g],o.map((function(t){return t.rect[f.end]})),!1)),m=(s+v)/2;s!==v&&m!==(h+g)/2&&o.forEach((function(e){var o=e.rect,s=e.className,f=[r[0],r[1]];if(o[c.end]<p)f[u]+=o[c.end]-p;else{if(!(d<o[c.start]))return;f[u]+=o[c.start]-p-n}f[l]+=m-h,i.push(tr(t,u?"vertical":"horizontal","gap",i.length,n,f,s,a))}))}))})),i}(t,I,[p,d],G,e),!0),$e(t,"horizontal",S,[a,n],G,e),!0),$e(t,"vertical",E,[a,n],G,e),!0),Qe(t,"horizontal",m,p,n,R,0,e),!0),Qe(t,"vertical",v,d,a,C,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},cr(t)},drag:function(t){var e=t.state;cr(t)||(e.guidelines=sr(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!vr(t,e)&&!Tr(t,e))||(!e.isRequest&&e.inputEvent?(0,i.pv)(e.inputEvent.target,dt("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,cr(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,cr(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function br(t,e,r,n){var a=t.getState(),o=a.renderPoses,s=a.rotation,u=a.direction,l=It(t.props,e).zoom,c=u>0?1:-1,f=s/Math.PI*180,p={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var h=d.renderDirectionMap;return r.forEach((function(t){var e=t.dir;p[e]=!0})),r.map((function(t){var r=t.data,a=t.classNames,u=t.dir,d=F[u];if(!d||!p[u])return null;h[u]=!0;var g=((0,i.P2)(f,15)+c*W[u]+720)%180,v={};return(0,i.RR)(r).forEach((function(t){v["data-".concat(t)]=r[t]})),n.createElement("div",b({className:dt.apply(void 0,x(["control","direction",u,e],a,!1)),"data-rotation":g,"data-direction":u},v,{key:"direction-".concat(u),style:kt.apply(void 0,x([s,l],d.map((function(t){return o[t]})),!1))}))}))}function xr(t,e,r,n){var a=It(t.props,r).renderDirections,i=void 0===a?e:a;return i?br(t,r,(!0===i?N:i).map((function(t){return{data:{},classNames:[],dir:t}})),n):[]}function Er(t,e,r,n,a,o){for(var s=[],u=6;u<arguments.length;u++)s[u-6]=arguments[u];var l=(0,i.jv)(r,n),c=e?(0,i.P2)(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:dt.apply(void 0,x(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":o,"data-direction":e,style:At(r,n,a,l)})}function Sr(t,e,r,n,a){return(!0===r?I:r).map((function(r,i){var o=F[r],s=o[0],u=o[1];if(null!=u)return Er(t,r,n[s],n[u],a,"".concat(e,"Edge").concat(i),e)})).filter(Boolean)}function Dr(t){return function(e,r){var n=It(e.props,t).edge;return n&&(!0===n||n.length)?x(x([],Sr(r,t,n,e.getState().renderPoses,e.props.zoom),!0),function(t,e,r){return xr(t,["nw","ne","sw","se"],e,r)}(e,t,r),!0):Mr(e,t,r)}}function Mr(t,e,r){return xr(t,N,e,r)}var Rr={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.throttleDragRotate,a=r.zoom,o=t.getState(),s=o.dragInfo,u=o.beforeOrigin;if(!n||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=Tt(l),f=(0,i.jv)(l,[0,0]);return[e.createElement("div",{className:dt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(f,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,a=e.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||t.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],Y(t,e),et(e,"translate"),function(t,e){e.absolutePoses=Yt(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=Kt(t,e,b({set:function(t){r.startValue=t}},tt(e)));return!1!==(n||Qt(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,e){if(e){L(e,"translate");var r=e.datas,n=e.parentEvent,a=e.parentFlag,s=e.isPinch,u=e.isRequest,l=e.deltaOffset,c=e.distX,f=e.distY,p=r.isDrag,d=r.prevDist,h=r.prevBeforeDist,g=r.startValue;if(p){l&&(c+=l[0],f+=l[1]);var v=t.props,m=v.parentMoveable,x=n?0:v.throttleDrag||0,E=n?0:v.throttleDragRotate||0,S=0,D=!1,M=!1,R=!1,C=!1;if(!n&&E>0&&(c||f)){var y=v.startDragRotate||0,P=(0,i.P2)(y+180*(0,i.jv)([0,0],[c,f])/Math.PI,E)-y,z=f*Math.abs(Math.cos((P-90)/180*Math.PI)),O=Tt([c*Math.abs(Math.cos(P/180*Math.PI)),z]);S=P*Math.PI/180,c=O*Math.cos(S),f=O*Math.sin(S)}if(!s&&!n&&!a){var G=nr(t,c,f,E,u||l,r),w=G[0],B=G[1];D=w.isSnap,M=w.isBound,R=B.isSnap,C=B.isBound,c+=w.offset,f+=B.offset}var A=(0,o.PD)(K({datas:r,distX:c,distY:f}),g),k=(0,o.PD)(function(t){var e=t.datas,r=K({datas:e,distX:t.distX,distY:t.distY}),n=r[0],a=r[1],i=U(e,(0,o.vc)([n,a],4));return(0,o.Kf)(i,(0,o.WK)([0,0,0],4),4)}({datas:r,distX:c,distY:f}),g);(0,i.Xh)(k,T),(0,i.Xh)(A,T),E||(D||M||(k[0]=(0,i.P2)(k[0],x),A[0]=(0,i.P2)(A[0],x)),R||C||(k[1]=(0,i.P2)(k[1],x),A[1]=(0,i.P2)(A[1],x)));var I=(0,o.h9)(A,g),N=(0,o.h9)(k,g),_=(0,o.h9)(N,d),F=(0,o.h9)(I,h);r.prevDist=N,r.prevBeforeDist=I,r.passDelta=_,r.passDist=N;var W=r.left+I[0],H=r.top+I[1],j=r.right-I[0],q=r.bottom-I[1],X=V(r,"translate(".concat(k[0],"px, ").concat(k[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(nt(e,X),t.state.dragInfo.dist=n?[0,0]:N,n||m||!_.every((function(t){return!t}))||!F.some((function(t){return!t}))){var Y=t.state,J=Y.width,Z=Y.height,Q=Kt(t,e,b({transform:X,dist:N,delta:_,translate:k,beforeDist:I,beforeDelta:F,beforeTranslate:A,left:W,top:H,right:j,bottom:q,width:J,height:Z,isPinch:s},Vt({transform:X},e)));return!n&&Qt(t,"onDrag",Q),Q}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return!(!n[0]&&!n[1])&&(r.deltaOffset=[0,0],this.drag(t,b(b({},e),{deltaOffset:n})))},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var a=Jt(t,e,{});return!r&&Qt(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var o=Me(t,this,"dragStart",[n||0,a||0],e,!1,"draggable"),s=Qt(t,"onDragGroupStart",b(b({},i),{targets:t.props.targets,events:o}));return r.isDrag=!1!==s,!!r.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,e),n=Me(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(r){var a=b({targets:t.props.targets,events:n},r);return Qt(t,"onDragGroup",a),a}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var n=Me(t,this,"dragEnd",[0,0],e,!1,"draggable");return Qt(t,"onDragGroupEnd",Jt(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),n=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?a=t.y-r.top:"deltaY"in t&&(a+=t.deltaY),{datas:e,distX:n,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Cr=fe("resizable"),yr={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Dr("resizable"),dragControlCondition:Cr,viewClassName:ce("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,a=e.isPinch,o=e.isGroup,s=e.parentDirection,u=e.parentGesto,l=e.datas,c=e.parentFixedDirection,f=e.parentEvent,p=jt(s,a,n,l),d=t.state,h=d.target,g=d.width,v=d.height,m=d.gestos;if(!p||!h)return!1;if(m.resizable)return!1;m.resizable=u||t.controlGesto,!a&&Y(t,e),l.datas={},l.direction=p,l.startOffsetWidth=g,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var b=t.props.transformOrigin||"% %";function x(t){l.ratio=t&&isFinite(t)?t:0}function E(t){l.fixedDirection=t,l.fixedPosition=Q(l.startPositions,t)}function S(e){var r=t.state,n=r.width,a=r.height;l.fixedPosition=e,l.fixedDirection=ct(e,n,a)}function D(t){l.minSize=[(0,i.AA)("".concat(t[0]),0)||0,(0,i.AA)("".concat(t[1]),0)||0]}function M(t){var e=[t[0]||1/0,t[1]||1/0];(0,i.hj)(e[0])&&!isFinite(e[0])||(e[0]=(0,i.AA)("".concat(e[0]),0)||1/0),(0,i.hj)(e[1])&&!isFinite(e[1])||(e[1]=(0,i.AA)("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=b&&(0,i.HD)(b)?b.split(" "):b,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!p[0]&&!p[1]||p[0]||!p[1],l.startPositions=Yt(t.state),x(g/v),E(c||[-p[0],-p[1]]),l.setFixedDirection=E,l.setFixedPosition=S,l.setMin=D,l.setMax=M;var R=Kt(t,e,{direction:p,startRatio:l.ratio,set:function(t){var e=t[0],r=t[1];l.startWidth=e,l.startHeight=r},setMin:D,setMax:M,setRatio:x,setFixedDirection:E,setFixedPosition:S,setOrigin:function(t){l.transformOrigin=t},dragStart:Rr.dragStart(t,(new q).dragStart([0,0],e))}),C=f||Qt(t,"onResizeStart",R);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,!1!==C&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:p}),!!l.isResize&&R},dragControl:function(t,e){var r,n=e.datas,a=e.parentFlag,u=e.isPinch,l=e.parentKeepRatio,c=e.dragClient,f=e.parentDist,p=e.isRequest,d=e.isGroup,h=e.parentEvent,g=e.resolveMatrix,v=n.isResize,m=n.transformOrigin,x=n.startWidth,E=n.startHeight,S=n.prevWidth,D=n.prevHeight,M=n.minSize,R=n.maxSize,C=n.ratio,y=n.startOffsetWidth,P=n.startOffsetHeight,z=n.isWidth;if(v){if(g){var O=t.state.is3d,G=n.startOffsetMatrix,w=n.startTransformOrigin,B=O?4:3,A=(0,s.Y6)(it(e)),k=Math.sqrt(A.length);B!==k&&(A=(0,o.mA)(A,k,B));var I=$(G,A,w,B),N=zt(I,y,P,B);n.startPositions=N,n.nextTargetMatrix=A,n.nextAllMatrix=I}var _=It(t.props,"resizable"),F=_.resizeFormat,W=_.throttleResize,H=void 0===W?a?0:1:W,q=_.parentMoveable,X=_.keepRatioFinally,Y=n.direction,L=Y,V=0,U=0;Y[0]||Y[1]||(L=[1,1]);var K=C&&(null!=l?l:_.keepRatio)||!1,J=dt(),Z=J[0],tt=J[1];h||(n.setFixedDirection(n.fixedDirection),Qt(t,"onBeforeResize",Kt(t,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(t){var e;return n.setFixedDirection(t),e=dt(),Z=e[0],tt=e[1],[Z,tt]},setFixedPosition:function(t){var e;return n.setFixedPosition(t),e=dt(),Z=e[0],tt=e[1],[Z,tt]},boundingWidth:Z,boundingHeight:tt,setSize:function(t){Z=t[0],tt=t[1]}},!0)));var et=c;c||(et=!a&&u?pt(t,[0,0]):n.fixedPosition);var rt=[0,0];if(u||(rt=function(t,e,r,n,a,i,o){if(!Oe(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return dr(t,(function(t,n){return fr(u||c,e+t,r+n,s,a,f)}),e,r,n,a,i,o)}(t,Z,tt,Y,et,p,n)),f&&(!f[0]&&(rt[0]=0),!f[1]&&(rt[1]=0)),K){L[0]&&L[1]&&rt[0]&&rt[1]&&(Math.abs(rt[0])>Math.abs(rt[1])?rt[1]=0:rt[0]=0);var nt=!rt[0]&&!rt[1];nt&&ht(),L[0]&&!L[1]||rt[0]&&!rt[1]||nt&&z?(Z+=rt[0],tt=Z/C):(!L[0]&&L[1]||!rt[0]&&rt[1]||nt&&!z)&&(tt+=rt[1],Z=tt*C)}else Z+=rt[0],tt+=rt[1],Z=Math.max(0,Z),tt=Math.max(0,tt);r=(0,i.F1)([Z,tt],M,R,!!K&&C),Z=r[0],tt=r[1],ht(),K&&(d||X)&&(z?tt=Z/C:Z=tt*C);var at=[(V=Z-y)-S,(U=tt-P)-D];n.prevWidth=V,n.prevHeight=U;var ot=function(t,e,r,n,a,s){var u=t.props.groupable,l=t.state,c=l.transformOrigin,f=l.offsetMatrix,p=l.is3d,d=l.width,h=l.height,g=l.left,v=l.top,m=s.fixedDirection,b=s.nextTargetMatrix||l.targetMatrix,x=p?4:3,E=function(t,e,r,n,a,o){return void 0===n&&(n=e),void 0===a&&(a=r),void 0===o&&(o=[0,0]),t?t.map((function(t,s){var u=(0,i.jL)(t),l=u.value,c=u.unit,f=s?a:n,p=s?r:e;return"%"===t||isNaN(l)?p*(f?o[s]/f:0):"%"!==c?l:p*l/100})):o}(a,e,r,d,h,c),S=u?g:0,D=u?v:0,M=function(t,e,r,n,a,i){var o=Q(zt(e,r,n,a),i);return[t[0]-o[0],t[1]-o[1]]}(n,$(f,b,E,x),e,r,x,m);return(0,o.h9)(M,[S,D])}(t,Z,tt,et,m,n);if(q||!at.every((function(t){return!t}))||!ot.every((function(t){return!t}))){var st=Rr.drag(t,j(e,t.state,ot,!!u,!1,"draggable")),ut=st.transform,lt=x+V,ct=E+U,ft=Kt(t,e,b({width:lt,height:ct,offsetWidth:Math.round(Z),offsetHeight:Math.round(tt),startRatio:C,boundingWidth:Z,boundingHeight:tt,direction:Y,dist:[V,U],delta:at,isPinch:!!u,drag:st},Ut({style:{width:"".concat(lt,"px"),height:"".concat(ct,"px")},transform:ut},st,e)));return!h&&Qt(t,"onResize",ft),ft}}function dt(){var t=n.fixedDirection,r=me(L,K,n,e);V=r.distWidth,U=r.distHeight;var a=L[0]-t[0]||K?Math.max(y+V,T):y,i=L[1]-t[1]||K?Math.max(P+U,T):P;return K&&y&&P&&(z?i=a/C:a=i*C),[a,i]}function ht(){var t;F&&(t=F([Z,tt]),Z=t[0],tt=t[1]),Z=(0,i.P2)(Z,H),tt=(0,i.P2)(tt,H)}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(n&&!1!==t.props.checkResizableError){var u=t.state,l=u.width-(a+o),c=u.height-(i+s),f=Math.abs(l)>3,p=Math.abs(c)>3;return f&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),p&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),f||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var a=Jt(t,e,{});return!n&&Qt(t,"onResizeEnd",a),a}},dragGroupControlCondition:Cr,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,b(b({},e),{isGroup:!0}));if(!n)return!1;var a=De(t,"resizable",e);function i(e,n){var a=r.fixedDirection,i=r.fixedPosition,s=Q(n.datas.startPositions||Yt(e.state),a),u=(0,o.Kf)((0,o.sQ)(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}var s=r.startOffsetWidth,u=r.startOffsetHeight;function l(){var t=r.minSize;a.forEach((function(e){var r=e.datas,n=r.minSize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=s*(a?n[0]/a:0),l=u*(i?n[1]/i:0);t[0]=Math.max(t[0],o),t[1]=Math.max(t[1],l)}))}function c(){var t=r.maxSize;a.forEach((function(e){var r=e.datas,n=r.maxSize,a=r.startOffsetWidth,i=r.startOffsetHeight,o=s*(a?n[0]/a:0),l=u*(i?n[1]/i:0);t[0]=Math.min(t[0],o),t[1]=Math.min(t[1],l)}))}var f=Re(t,this,"dragControlStart",e,(function(t,e){return i(t,e)}));l(),c();var p=function(t){n.setFixedDirection(t),f.forEach((function(e,r){e.setFixedDirection(t),i(e.moveable,a[r])}))};r.setFixedDirection=p;var d=b(b({},n),{targets:t.props.targets,events:f.map((function(t){return b(b({},t),{setMin:function(e){t.setMin(e),l()},setMax:function(e){t.setMax(e),c()}})})),setFixedDirection:p,setMin:function(t){n.setMin(t),l()},setMax:function(t){n.setMax(t),c()}}),h=Qt(t,"onResizeGroupStart",d);return r.isResize=!1!==h,!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=It(t.props,"resizable");Zt(t,"onBeforeResize",(function(r){Qt(t,"onBeforeResizeGroup",Kt(t,e,b(b({},r),{targets:n.targets}),!0))}));var a=this.dragControl(t,b(b({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,s=a.boundingHeight,u=a.dist,l=n.keepRatio,c=[i/(i-u[0]),s/(s-u[1])],f=r.fixedPosition,p=Re(t,this,"dragControl",e,(function(e,r){var n=(0,o.Kf)((0,o.sQ)(t.rotation/180*Math.PI,3),[r.datas.originalX*c[0],r.datas.originalY*c[1],1],3),a=n[0],i=n[1];return b(b({},r),{parentDist:null,parentScale:c,dragClient:(0,o.PD)(f,[a,i]),parentKeepRatio:l})})),d=b({targets:n.targets,events:p},a);return Qt(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var n=Re(t,this,"dragControlEnd",e);return Qt(t,"onResizeGroupEnd",Jt(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=0,n=0,a=t.getRect();return{isControl:!0,requestStart:function(t){var r;return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(r=null==t?void 0:t.horizontal)||void 0===r||r}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-a.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-a.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Pr(t,e,r,n,a){var s=t.props.groupable,u=t.state,l=u.is3d?4:3,c=e.origin,f=Pt(t.state.rootMatrix,(0,o.h9)([c[0],c[1]],s?[0,0]:[u.left,u.top]),l),p=(0,o.PD)([a.left,a.top],f);e.startAbsoluteOrigin=p,e.prevDeg=(0,i.jv)(p,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=(0,i.zt)(p,[r,n])}function zr(t,e,r){var n=r.defaultDeg,a=r.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=e*(360*o+t-n);return r.prevDeg=n+s,s}function Or(t,e,r,n){return zr((0,i.jv)(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function Gr(t,e,r,n,a,s){var u=t.props.throttleRotate,l=void 0===u?0:u,c=r.prevSnapDeg,f=0,p=!1;if(s){var d=function(t,e,r){if(!Oe(t,"rotatable"))return{isSnap:!1,rotation:r};var n=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.origin,c=r*Math.PI/180,f=[n,a,s,u].map((function(t){return(0,o.h9)(t,l)})),p=f.map((function(t){return(0,o.U1)(t,c)})),d=x(x([],function(t,e,r,n,a){if(!t.props.bounds)return[];var o=a*Math.PI/180,s=Ue(t),u=s.left,l=s.top,c=s.right,f=s.bottom,p=u-n[0],d=c-n[0],h=l-n[1],g=f-n[1],v={left:p,top:h,right:d,bottom:g};if(!Je(r,v,0))return[];var m=[];return[[p,0],[d,0],[h,1],[g,1]].forEach((function(t){var n=t[0],a=t[1];r.forEach((function(t){var r=(0,i.jv)([0,0],t);m.push.apply(m,function(t,e,r){var n=Tt(t),a=Math.sqrt(n*n-e*e)||0;return[a,-a].sort((function(e,n){return Math.abs(e-t[r?0:1])-Math.abs(n-t[r?0:1])})).map((function(t){return(0,i.jv)([0,0],r?[t,e]:[e,t])}))}(t,n,a).map((function(t){return o+t-r})).filter((function(t){return!Je(e,v,t)})).map((function(t){return(0,i.P2)(180*t/Math.PI,T)})))}))})),m}(t,f,p,l,r),!0),function(t,e,r,n,a){var o=t.props.innerBounds,s=a*Math.PI/180;if(!o)return[];var u=o.left,l=o.top,c=o.width,f=o.height,p=u-n[0],d=u+c-n[0],h=l-n[1],g=l+f-n[1],v=[[p,h],[d,h],[p,g],[d,g]],m=Q(r,[0,0]);if(!Le(r,v,m,0))return[];var b=[],x=v.map((function(t){return[Tt(t),(0,i.jv)([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(t){var r=(0,i.jv)([0,0],function(t){var e=t[0],r=t[1],n=r[0]-e[0],a=r[1]-e[1];if(!n)return[e[0],0];if(!a)return[0,e[1]];var i=a/n,o=-i*e[0]+e[1];return[-o/(i+1/i),o/(i*i+1)]}(t)),n=function(t){var e=t[0],r=t[1],n=r[0]-e[0],a=r[1]-e[1];if(!n)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/n;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);b.push.apply(b,x.filter((function(t){var e=t[0];return e&&n<=e})).map((function(t){var e=t[0],a=t[1],i=Math.acos(e?n/e:0);return[s+(a+i)-r,s+(a-i)-r]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Le(e,v,m,t)})).map((function(t){return(0,i.P2)(180*t/Math.PI,T)})))})),b}(t,f,p,l,r),!0);d.sort((function(t,e){return Math.abs(t-r)-Math.abs(e-r)}));var h=d.length>0;return{isSnap:h,rotation:h?d[0]:r}}(t,e,n);p=d.isSnap,f=a+d.rotation}p||(f=(0,i.P2)(a+n,l));var h=f-a;return r.prevSnapDeg=h,[h-c,h,f]}function wr(t,e,r){var n=e[0],a=e[1],o=e[2],s=e[3];if("none"===t)return[];if((0,i.kJ)(t))return t.map((function(t){return wr(t,[n,a,o,s],r)[0]}));var u=(t||"top").split("-"),l=u[0],c=u[1],f=[n,a];"left"===l?f=[o,n]:"right"===l?f=[a,s]:"bottom"===l&&(f=[s,o]);var p=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=_t(f,r);if(c){var h="top"===c||"left"===c,g="bottom"===l||"left"===l;p=f[h&&!g||!h&&g?0:1]}return[[p,d]]}function Tr(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if((0,i.pv)(r,dt("rotation-control"))||(0,i.pv)(r,dt("around-control"))||(0,i.pv)(r,dt("control"))&&(0,i.pv)(r,dt("rotatable")))return!0;var n=t.props.rotationTarget;return!!n&&he(n,!0).some((function(t){return!!t&&(r===t||r.contains(t))}))}var Br=N.map((function(t){var e="",r="",n="center",a="center";return t.indexOf("n")>-1&&(e="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(r="left: -20px;",n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(n," ").concat(a,";\n    }")})).join("\n"),Ar=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Br,"\n"),kr={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Ar],viewClassName:function(t){return t.isDragging("rotatable")?dt("view-rotation-dragging"):""},render:function(t,e){var r=It(t.props,"rotatable"),n=r.rotatable,a=r.rotationPosition,o=r.zoom,s=r.renderDirections,u=r.rotateAroundControls,l=r.resolveAblesWithRotatable,c=t.getState(),f=c.renderPoses,p=c.direction;if(!n)return null;var d=wr(a,f,p),h=[];if(d.forEach((function(t,r){var n=t[0],a=t[1];h.push(e.createElement("div",{key:"rotation".concat(r),className:dt("rotation"),style:{transform:"translate(-50%) translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(a,"rad)")}},e.createElement("div",{className:dt("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:dt("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))})),s){var g=(0,i.RR)(l||{}),v={};g.forEach((function(t){l[t].forEach((function(e){v[e]=t}))}));var m=[];(0,i.kJ)(s)&&(m=s.map((function(t){var e=v[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),h.push.apply(h,br(t,"rotatable",m,e))}return u&&h.push.apply(h,function(t,e){var r=t.renderState;r.renderDirectionMap||(r.renderDirectionMap={});var n=t.getState(),a=n.renderPoses,o=n.rotation,s=n.direction,u=r.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,f=o/Math.PI*180;return(0,i.RR)(u).map((function(t){var r=F[t];if(!r)return null;var n=((0,i.P2)(f,15)+c*W[t]+720)%180;return e.createElement("div",{className:dt("around-control"),"data-rotation":n,"data-direction":t,key:"direction-around-".concat(t),style:kt.apply(void 0,x([o,l],r.map((function(t){return a[t]})),!1))})}))}(t,e)),h},dragControlCondition:Tr,dragControlStart:function(t,e){var r,n,a=e.datas,s=e.clientX,u=e.clientY,l=e.parentRotate,c=e.parentFlag,f=e.isPinch,p=e.isRequest,d=t.state,h=d.target,g=d.left,v=d.top,m=d.direction,x=d.beforeDirection,E=d.targetTransform,S=d.moveableClientRect,D=d.offsetMatrix,M=d.targetMatrix,R=d.allMatrix,C=d.width,y=d.height;if(!p&&!h)return!1;var P=t.getRect();a.rect=P,a.transform=E,a.left=g,a.top=v;var z=function(e){var r=t.state,n=r.allMatrix,i=r.is3d,o=ct(e,r.width,r.height);a.fixedDirection=o,a.fixedPosition=Pt(n,e,i?4:3),H&&H.setFixedPosition(e)},O=function(e){a.fixedDirection=e,a.fixedPosition=ft(t,e),H&&H.setFixedDirection(e)},G=s,w=u;if(p||f||c){var T=l||0;a.beforeInfo={origin:P.beforeOrigin,prevDeg:T,defaultDeg:T,prevSnapDeg:0,startDist:0},a.afterInfo=b(b({},a.beforeInfo),{origin:P.origin}),a.absoluteInfo=b(b({},a.beforeInfo),{origin:P.origin,startValue:T})}else{var B=null===(n=e.inputEvent)||void 0===n?void 0:n.target;if(B){var A=B.getAttribute("data-direction")||"",k=_[A];if(k){a.isControl=!0,a.isAroundControl=(0,i.pv)(B,dt("around-control")),a.controlDirection=k;var I=B.getAttribute("data-resolve");I&&(a.resolveAble=I);var N=function(t,e,r){var n=16===t.length?4:3,a=e.map((function(e){return Pt(t,e,n)})),i=r.left,o=r.top;return a.map((function(t){return[t[0]+i,t[1]+o]}))}(d.rootMatrix,d.renderPoses,S);r=Q(N,k),G=r[0],w=r[1]}}a.beforeInfo={origin:P.beforeOrigin},a.afterInfo={origin:P.origin},a.absoluteInfo={origin:P.origin,startValue:P.rotation};var F=z;z=function(e){var r=d.is3d?4:3,n=(0,o.PD)((0,o.P$)(M,r),e),i=n[0],s=n[1],u=(0,o.Kf)(D,(0,o.WK)([i,s],r)),l=(0,o.Kf)(R,(0,o.WK)([e[0],e[1]],r));F(e);var c=d.posDelta;a.beforeInfo.origin=(0,o.h9)(u,c),a.afterInfo.origin=(0,o.h9)(l,c),a.absoluteInfo.origin=(0,o.h9)(l,c),Pr(t,a.beforeInfo,G,w,S),Pr(t,a.afterInfo,G,w,S),Pr(t,a.absoluteInfo,G,w,S)},O=function(t){var e=Q([[0,0],[C,0],[0,y],[C,y]],t);z(e)}}a.startClientX=G,a.startClientY=w,a.direction=m,a.beforeDirection=x,a.startValue=0,a.datas={},et(e,"rotate");var W=!1,H=!1;a.isControl&&a.resolveAble&&"resizable"===a.resolveAble&&(H=yr.dragControlStart(t,b(b({},new q("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition}))),H||(W=Rr.dragStart(t,(new q).dragStart([0,0],e))),z(d.transformOrigin);var j=Kt(t,e,b(b({set:function(t){a.startValue=t*Math.PI/180},setFixedDirection:O,setFixedPosition:z},tt(e)),{dragStart:W,resizeStart:H})),X=Qt(t,"onRotateStart",j);return a.isRotate=!1!==X,d.snapRenderInfo={request:e.isRequest},!!a.isRotate&&j},dragControl:function(t,e){var r,n,a,s=e.datas,u=e.clientDistX,l=e.clientDistY,c=e.parentRotate,f=e.parentFlag,p=e.isPinch,d=e.groupDelta,h=s.beforeDirection,g=s.beforeInfo,v=s.afterInfo,m=s.absoluteInfo,x=s.isRotate,E=s.startValue,S=s.rect,D=s.startClientX,M=s.startClientY;if(x){L(e,"rotate");var R,C,y,P,z,O,G,w,T,B=function(t){return wt(t.datas.beforeTransform,[50,50],100,100).direction}(e),A=h*B,k=t.props.parentMoveable,I=180/Math.PI*E,N=m.startValue,_=!1,F=D+u,W=M+l;if(!f&&"parentDist"in e){var H=e.parentDist;C=H,z=H,w=H}else p||f?(C=zr(c,h,g),z=zr(c,A,v),w=zr(c,A,m)):(C=Or(F,W,h,g),z=Or(F,W,A,v),w=Or(F,W,A,m),_=!0);if(Qt(t,"onBeforeRotate",Kt(t,e,{beforeRotation:I+C,rotation:I+z,absoluteRotation:N+w,setRotation:function(t){C=z=t-I,w=z}},!0)),R=(r=Gr(t,S,g,C,I,_))[0],C=r[1],y=r[2],P=(n=Gr(t,S,v,z,I,_))[0],z=n[1],O=n[2],G=(a=Gr(t,S,m,w,N,_))[0],w=a[1],T=a[2],G||P||R||k){var q=V(s,"rotate(".concat(O,"deg)"),"rotate(".concat(z,"deg)")),X=function(t,e,r){var n=r.fixedDirection,a=r.fixedPosition;return lt(t,"rotate(".concat(e,"deg)"),n,a,r)}(t,z,s),Y=(0,o.h9)((0,o.PD)(d||[0,0],X),s.prevInverseDist||[0,0]);s.prevInverseDist=X,s.requestValue=null;var U=ut(t,q,Y,p,e),K=U,J=(0,i.zt)([F,W],m.startAbsoluteOrigin)-m.startDist,Z=void 0;if("resizable"===s.resolveAble){var Q=yr.dragControl(t,b(b({},j(e,t.state,[e.deltaX,e.deltaY],!!p,!1,"resizable")),{resolveMatrix:!0,parentDistance:J}));Q&&(Z=Q,K=Ut(K,Q,e))}var $=Kt(t,e,b(b({delta:P,dist:z,rotate:O,rotation:O,beforeDist:C,beforeDelta:R,beforeRotate:y,beforeRotation:y,absoluteDist:w,absoluteDelta:G,absoluteRotate:T,absoluteRotation:T,isPinch:!!p,resize:Z},U),K));return Qt(t,"onRotate",$),$}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=Jt(t,e,{});return Qt(t,"onRotateEnd",n),n}},dragGroupControlCondition:Tr,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,a=n.left,i=n.top,s=n.beforeOrigin,u=this.dragControlStart(t,e);if(!u)return!1;u.set(r.beforeDirection*t.rotation);var l=Re(t,this,"dragControlStart",e,(function(t,e){var r=t.state,n=r.left,u=r.top,l=r.beforeOrigin,c=(0,o.PD)((0,o.h9)([n,u],[a,i]),(0,o.h9)(l,s));return e.datas.startGroupClient=c,e.datas.groupClient=c,b(b({},e),{parentRotate:0})})),c=Qt(t,"onRotateGroupStart",b(b({},u),{targets:t.props.targets,events:l}));return r.isRotate=!1!==c,!!r.isRotate&&u},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){Zt(t,"onBeforeRotate",(function(r){Qt(t,"onBeforeRotateGroup",Kt(t,e,b(b({},r),{targets:t.props.targets}),!0))}));var n=this.dragControl(t,e);if(n){var a=r.beforeDirection,i=n.beforeDist,s=i/180*Math.PI,u=Re(t,this,"dragControl",e,(function(t,e){var r=e.datas.startGroupClient,n=e.datas.groupClient,u=n[0],l=n[1],c=(0,o.U1)(r,s*a),f=c[0],p=c[1],d=[f-u,p-l];return e.datas.groupClient=[f,p],b(b({},e),{parentRotate:i,groupDelta:d})}));t.rotation=a*n.beforeRotation;var l=b({targets:t.props.targets,events:u,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},n);return Qt(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var n=Re(t,this,"dragControlEnd",e);return Qt(t,"onRotateGroupEnd",Jt(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Ir=fe("scalable"),Nr={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Dr("scalable"),dragControlCondition:Ir,viewClassName:ce("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,a=e.inputEvent,o=jt(e.parentDirection,n,a,r),s=t.state,u=s.width,l=s.height,c=s.targetTransform,f=s.target,p=s.pos1,d=s.pos2,h=s.pos4;if(!o||!f)return!1;n||Y(t,e),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=o,r.startOffsetWidth=u,r.startOffsetHeight=l,r.startValue=[1,1];var g=(0,i.zt)(p,d),v=(0,i.zt)(d,h),m=!o[0]&&!o[1]||o[0]||!o[1];function x(t){r.ratio=t&&isFinite(t)?t:0}function E(t){r.fixedDirection=t,r.fixedPosition=Q(r.startPositions,t)}r.scaleWidth=g,r.scaleHeight=v,r.scaleXRatio=g/u,r.scaleYRatio=v/l,et(e,"scale"),r.isWidth=m,r.startPositions=Yt(t.state),r.setFixedDirection=E,x((0,i.zt)(p,d)/(0,i.zt)(d,h)),E([-o[0],-o[1]]);var S=Kt(t,e,b(b({direction:o,set:function(t){r.startValue=t},setRatio:x,setFixedDirection:E},tt(e)),{dragStart:Rr.dragStart(t,(new q).dragStart([0,0],e))})),D=Qt(t,"onScaleStart",S);return r.startFixedDirection=r.fixedDirection,!1!==D&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!r.isScale&&S},dragControl:function(t,e){L(e,"scale");var r=e.datas,n=e.parentKeepRatio,a=e.parentFlag,s=e.isPinch,u=e.dragClient,l=e.isRequest,c=r.prevDist,f=r.direction,p=r.startOffsetWidth,d=r.startOffsetHeight,h=r.isScale,g=r.startValue,v=r.isWidth,m=r.ratio;if(!h)return!1;var x=t.props,E=x.throttleScale,S=x.parentMoveable,D=f;f[0]||f[1]||(D=[1,1]);var M=m&&(null!=n?n:x.keepRatio)||!1,R=t.state;function C(){var t=me(D,M,r,e),n=t.distWidth,a=t.distHeight,i=p?(p+n)/p:1,o=d?(d+a)/d:1;return i=D[0]||M?i*g[0]:g[0],o=D[1]||M?o*g[1]:g[1],0===i&&(i=(c[0]>0?1:-1)*B),0===o&&(o=(c[1]>0?1:-1)*B),[i,o]}var y=C();if(!s&&t.props.groupable){var P=(R.snapRenderInfo||{}).direction;(0,i.kJ)(P)&&(P[0]||P[1])&&(R.snapRenderInfo={direction:f,request:e.isRequest})}Qt(t,"onBeforeScale",Kt(t,e,{scale:y,setFixedDirection:function(t){return r.setFixedDirection(t),y=C()},startFixedDirection:r.startFixedDirection,setScale:function(t){y=t}},!0));var z=[y[0]/g[0],y[1]/g[1]],O=u,G=[0,0];if(u||(O=!a&&s?pt(t,[0,0]):r.fixedPosition),s||(G=function(t,e,r,n,a){if(!Oe(t,"scalable"))return[0,0];var i=a.startOffsetWidth,s=a.startOffsetHeight,u=a.fixedPosition,l=a.fixedDirection,c=a.is3d,f=dr(t,(function(t,r){return fr(function(t,e){var r=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return $(n,(0,o.ml)(i,(0,o.Wi)(e,s),s),r,s)}(a,(0,o.PD)(e,[t/i,r/s])),i,s,l,u,c)}),i,s,r,u,n,a);return[f[0]/i,f[1]/s]}(t,z,f,l,r)),M){D[0]&&D[1]&&G[0]&&G[1]&&(Math.abs(G[0]*p)>Math.abs(G[1]*d)?G[1]=0:G[0]=0);var w=!G[0]&&!G[1];if(w&&(v?z[0]=(0,i.P2)(z[0]*g[0],E)/g[0]:z[1]=(0,i.P2)(z[1]*g[1],E)/g[1]),D[0]&&!D[1]||G[0]&&!G[1]||w&&v){z[0]+=G[0];var T=p*z[0]*g[0]/m;z[1]=T/d/g[1]}else if(!D[0]&&D[1]||!G[0]&&G[1]||w&&!v){z[1]+=G[1];var A=d*z[1]*g[1]*m;z[0]=A/p/g[0]}}else z[0]+=G[0],z[1]+=G[1],G[0]||(z[0]=(0,i.P2)(z[0]*g[0],E)/g[0]),G[1]||(z[1]=(0,i.P2)(z[1]*g[1],E)/g[1]);0===z[0]&&(z[0]=(c[0]>0?1:-1)*B),0===z[1]&&(z[1]=(c[1]>0?1:-1)*B);var k,I,N=[z[0]/c[0],z[1]/c[1]];I=g,y=[(k=z)[0]*I[0],k[1]*I[1]];var _=function(t,e,r,n,a){return lt(t,"scale(".concat(e.join(", "),")"),r,n,a)}(t,z,r.fixedDirection,O,r),F=(0,o.h9)(_,r.prevInverseDist||[0,0]);if(r.prevDist=z,r.prevInverseDist=_,y[0]===c[0]&&y[1]===c[1]&&F.every((function(t){return!t}))&&!S)return!1;var W=V(r,"scale(".concat(y.join(", "),")"),"scale(".concat(z.join(", "),")")),H=Kt(t,e,b({offsetWidth:p,offsetHeight:d,direction:f,scale:y,dist:z,delta:N,isPinch:!!s},ut(t,W,F,s,e)));return Qt(t,"onScale",H),H},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Jt(t,e,{});return Qt(t,"onScaleEnd",n),n},dragGroupControlCondition:Ir,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var a=De(t,"resizable",e);function i(e,n){var a=r.fixedDirection,i=r.fixedPosition,s=Q(n.datas.startPositions||Yt(e.state),a),u=(0,o.Kf)((0,o.sQ)(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}r.moveableScale=t.scale;var s=Re(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),u=function(t){n.setFixedDirection(t),s.forEach((function(e,r){e.setFixedDirection(t),i(e.moveable,a[r])}))};r.setFixedDirection=u;var l=b(b({},n),{targets:t.props.targets,events:s,setFixedDirection:u}),c=Qt(t,"onScaleGroupStart",l);return r.isScale=!1!==c,!!r.isScale&&l},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){Zt(t,"onBeforeScale",(function(r){Qt(t,"onBeforeScaleGroup",Kt(t,e,b(b({},r),{targets:t.props.targets}),!0))}));var n=this.dragControl(t,e);if(n){var a=r.moveableScale;t.scale=[n.scale[0]*a[0],n.scale[1]*a[1]];var i=t.props.keepRatio,s=n.dist,u=n.scale,l=r.fixedPosition,c=Re(t,this,"dragControl",e,(function(e,r){var n=(0,o.Kf)((0,o.sQ)(t.rotation/180*Math.PI,3),[r.datas.originalX*s[0],r.datas.originalY*s[1],1],3),a=n[0],c=n[1];return b(b({},r),{parentDist:null,parentScale:u,parentKeepRatio:i,dragClient:(0,o.PD)(l,[a,c])})})),f=b({targets:t.props.targets,events:c},n);return Qt(t,"onScaleGroup",f),f}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var n=Re(t,this,"dragControlEnd",e);return Qt(t,"onScaleGroupEnd",Jt(t,e,{targets:t.props.targets,events:n})),r}},request:function(){var t={},e=0,r=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function _r(t,e){return t.map((function(t,r){return(0,i.AK)(t,e[r],1,2)}))}function Fr(t,e,r){var n=(0,i.jv)(t,e),a=(0,i.jv)(t,r)-n;return a>=0?a:a+2*Math.PI}var Wr={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:ce("warpable"),render:function(t,e){var r=t.props,n=r.resizable,a=r.scalable,i=r.warpable,o=r.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=_r(u,l),d=_r(l,u),h=_r(u,c),g=_r(c,u),v=_r(c,f),m=_r(f,c),b=_r(l,f),E=_r(f,l);return x([e.createElement("div",{className:dt("line"),key:"middeLine1",style:At(p,v,o)}),e.createElement("div",{className:dt("line"),key:"middeLine2",style:At(d,m,o)}),e.createElement("div",{className:dt("line"),key:"middeLine3",style:At(h,b,o)}),e.createElement("div",{className:dt("line"),key:"middeLine4",style:At(g,E,o)})],Mr(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return(0,i.pv)(r,dt("direction"))&&(0,i.pv)(r,dt("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,a=t.props.target,i=qt(n.target,r);if(!i||!a)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,c=s.targetTransform,f=s.targetMatrix,p=s.width,d=s.height,h=s.left,g=s.top;return r.datas={},r.targetTransform=c,r.warpTargetMatrix=l?f:(0,o.mA)(f,3,4),r.targetInverseMatrix=(0,o.Xj)((0,o.U_)(r.warpTargetMatrix,4),3,4),r.direction=i,r.left=h,r.top=g,r.poses=[[0,0],[p,0],[0,d],[p,d]].map((function(t){return(0,o.h9)(t,u)})),r.nextPoses=r.poses.map((function(t){var e=t[0],n=t[1];return(0,o.Kf)(r.warpTargetMatrix,[e,n,0,1],4)})),r.startValue=(0,o.Te)(4),r.prevMatrix=(0,o.Te)(4),r.absolutePoses=Yt(s),r.posIndexes=Z(i),Y(t,e),et(e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:i},!1!==Qt(t,"onWarpStart",Kt(t,e,b({set:function(t){r.startValue=t}},tt(e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,a=e.distX,i=e.distY,s=r.targetInverseMatrix,u=r.prevMatrix,l=r.isWarp,c=r.startValue,f=r.poses,p=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(L(e,"matrix3d"),Oe(t,"warpable")){var h=p.map((function(t){return d[t]}));h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var g=ar(t,n,{horizontal:h.map((function(t){return t[1]+i})),vertical:h.map((function(t){return t[0]+a}))}),v=g.horizontal,m=g.vertical;i-=v.offset,a-=m.offset}var x=J({datas:r,distX:a,distY:i},!0),E=r.nextPoses.slice();if(p.forEach((function(t){E[t]=(0,o.PD)(E[t],x)})),!G.every((function(t){return e=t.map((function(t){return f[t]})),r=t.map((function(t){return E[t]})),n=Fr(e[0],e[1],e[2]),a=Fr(r[0],r[1],r[2]),!(n>=(i=Math.PI)&&a<=i||n<=i&&a>=i);var e,r,n,a,i})))return!1;var S=(0,o.mX)(f[0],f[2],f[1],f[3],E[0],E[2],E[1],E[3]);if(!S.length)return!1;var D=U(r,(0,o.ml)(s,S,4),!0),M=(0,o.ml)((0,o.U_)(u,4),D,4);r.prevMatrix=D;var R=(0,o.ml)(c,D,4),C=V(r,"matrix3d(".concat(R.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return nt(e,C),Qt(t,"onWarp",Kt(t,e,b({delta:M,matrix:R,dist:D,multiply:o.ml,transform:C},Vt({transform:C},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,Qt(t,"onWarpEnd",Jt(t,e,{})),n)}},Hr=dt("area-pieces"),jr=dt("area-piece"),qr=dt("avoid"),Xr=dt("view-dragging");function Yr(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,a=r.height;(0,i.IV)(e,qr),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function Lr(t){return t.createElement("div",{key:"area_pieces",className:Hr},t.createElement("div",{className:jr}),t.createElement("div",{className:jr}),t.createElement("div",{className:jr}),t.createElement("div",{className:jr}))}var Vr={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,s=r.groupable,u=r.passDragArea,l=t.getState(),c=l.width,f=l.height,p=l.renderPoses,d=u?dt("area","pass"):dt("area");if(s)return[e.createElement("div",{key:"area",ref:(0,a.iH)(t,"areaElement"),className:d}),Lr(e)];if(!n||!i)return[];var h=(0,o.mX)([0,0],[c,0],[0,f],[c,f],p[0],p[1],p[2],p[3]),g=h.length?Rt(h,!0):"none";return[e.createElement("div",{key:"area",ref:(0,a.iH)(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:g}}),Lr(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,a=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,l=s.renderPoses,c=s.rootMatrix,f=s.is3d,p=u.left,d=u.top,h=Ot(l),g=h.left,v=h.top,m=h.width,b=h.height,x=ie(c,[n-p,a-d],f?4:3),E=x[0],S=x[1],D=[{left:g,top:v,width:m,height:(S-=v)-10},{left:g,top:v,width:(E-=g)-10,height:b},{left:g,top:v+S+10,width:m,height:b-S-10},{left:g+E+10,top:v,width:m-E-10,height:b}],M=[].slice.call(o.nextElementSibling.children);D.forEach((function(t,e){M[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),(0,i.cn)(o,qr),s.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,Yr(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||Yr(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Yr(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&(0,i.U7)((function(){e.disableNativeEvent=!1}))}},Ur=E("origin",{render:function(t,e){var r=t.props.zoom,n=t.getState(),a=n.beforeOrigin,i=n.rotation;return[e.createElement("div",{className:dt("control","origin"),style:kt(i,r,a),key:"beforeOrigin"})]}});function Kr(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Jr={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,a=void 0===n?t.getContainer():n,i=r.scrollOptions,o=new c.Z,s=de(a,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",l=e.targets;o.on("scroll",(function(r){var n=r.container,a=r.direction,i=Kt(t,e,{scrollContainer:n,direction:a}),o=l?"onScrollGroup":"onScroll";l&&(i.targets=l),Qt(t,o,i)})).on("move",(function(e){var r=e.offsetX,n=e.offsetY,a=e.inputEvent;t[u].scrollBy(r,n,a.inputEvent,!0)})).on("scrollDrag",(function(e){(0,e.next)(t[u].getCurrentEvent())})),o.dragStart(e,b({container:s},i))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,a=n.scrollContainer,i=void 0===a?t.getContainer():a,o=n.scrollThreshold,s=void 0===o?0:o,u=n.scrollThrottleTime,l=void 0===u?0:u,c=n.getScrollPosition,f=void 0===c?Kr:c,p=n.scrollOptions;return r.drag(e,b({container:i,threshold:s,throttleTime:l,getScrollPosition:function(t){return f({scrollContainer:t.container,direction:t.direction})}},p)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,b(b({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,b(b({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,b(b({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,b(b({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,b(b({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,b(b({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,b(b({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;null===(e=r.dragScroll)||void 0===e||e.dragEnd(),r.dragScroll=null}},Zr={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},Qr=E("padding",{render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=r.padding||{},a=n.left,i=void 0===a?0:a,s=n.top,u=void 0===s?0:s,l=n.right,c=void 0===l?0:l,f=n.bottom,p=void 0===f?0:f,d=t.getState(),h=d.renderPoses,g=[d.pos1,d.pos2,d.pos3,d.pos4],v=[];return i>0&&v.push([0,2]),u>0&&v.push([0,1]),c>0&&v.push([1,3]),p>0&&v.push([2,3]),v.map((function(t,r){var n=t[0],a=t[1],i=g[n],s=g[a],u=h[n],l=h[a],c=(0,o.mX)([0,0],[100,0],[0,100],[100,100],i,s,u,l);if(c.length)return e.createElement("div",{key:"padding".concat(r),className:dt("padding"),style:{transform:Rt(c,!0)}})}))}}),$r=["nw","ne","se","sw"];function tn(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var en=[1,2,5,6],rn=[0,3,4,7],nn=[1,-1,-1,1],an=[1,1,-1,-1];function on(t,e,r,n,a,i,o,s){void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=r),void 0===s&&(s=n);var u=[],l=!1,c=t.filter((function(t){return!t.virtual})),f=c.map((function(t){var c=t.horizontal,f=t.vertical,p=t.pos;if(f&&!l&&(l=!0,u.push("/")),l){var d=Math.max(0,1===f?p[1]-i:s-p[1]);return u.push(ue(d,n,e)),d}return d=Math.max(0,1===c?p[0]-a:o-p[0]),u.push(ue(d,r,e)),d}));return{radiusPoses:c,styles:u,raws:f}}function sn(t){for(var e=[0,0],r=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(0===e[1]&&(e[0]=a),e[1]=a-e[0]+1,r[0]=a+1),i.vertical&&(0===r[1]&&(r[0]=a),r[1]=a-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function un(t,e,r,n,a,o,s){var u,l,c,f;void 0===o&&(o=[0,0]),void 0===s&&(s=!1);var p=t.indexOf("/"),d=(p>-1?t.slice(0,p):t).length,h=t.slice(0,d),g=t.slice(d+1),v=h.length,m=g.length,b=m>0,E=h[0],S=void 0===E?"0px":E,D=h[1],M=void 0===D?S:D,R=h[2],C=void 0===R?S:R,y=h[3],P=void 0===y?M:y,z=g[0],O=void 0===z?S:z,G=g[1],w=void 0===G?b?O:M:G,T=g[2],B=void 0===T?b?O:C:T,A=g[3],k=void 0===A?b?w:P:A,I=[S,M,C,P].map((function(t){return(0,i.AA)(t,e)})),N=[O,w,B,k].map((function(t){return(0,i.AA)(t,r)})),_=I.slice(),F=N.slice();u=tn([_[0],_[1]],e),_[0]=u[0],_[1]=u[1],l=tn([_[3],_[2]],e),_[3]=l[0],_[2]=l[1],c=tn([F[0],F[3]],r),F[0]=c[0],F[3]=c[1],f=tn([F[1],F[2]],r),F[1]=f[0],F[2]=f[1];var W=s?_:_.slice(0,Math.max(o[0],v)),H=s?F:F.slice(0,Math.max(o[1],m));return x(x([],W.map((function(t,e){var i=$r[e];return{virtual:e>=v,horizontal:nn[e],vertical:0,pos:[n+t,a+(-1===an[e]?r:0)],sub:!0,raw:I[e],direction:i}})),!0),H.map((function(t,r){var i=$r[r];return{virtual:r>=m,horizontal:0,vertical:an[r],pos:[n+(-1===nn[r]?e:0),a+t],sub:!0,raw:N[r],direction:i}})),!0)}var ln=[[0,-1,"n"],[1,0,"e"]],cn=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function fn(t,e,r){var n=t.props.clipRelative,a=t.state,i=a.width,s=a.height,u=e,l=u.type,c=u.poses,f="rect"===l,p="circle"===l;if("polygon"===l)return r.map((function(t){return"".concat(ue(t[0],i,n)," ").concat(ue(t[1],s,n))}));if(f||"inset"===l){var d=r[1][1],h=r[3][0],g=r[7][0],v=r[5][1];if(f)return[d,h,v,g].map((function(t){return"".concat(t,"px")}));var m=[d,i-h,s-v,g].map((function(t,e){return ue(t,e%2?i:s,n)}));if(r.length>8){var E=(0,o.h9)(r[4],r[0]),S=E[0],D=E[1];m.push.apply(m,x(["round"],on(c.slice(8).map((function(t,e){return b(b({},t),{pos:r[e]})})),n,S,D,g,d,h,v).styles,!1))}return m}if(p||"ellipse"===l){var M=r[0],R=ue(Math.abs(r[1][1]-M[1]),p?Math.sqrt((i*i+s*s)/2):s,n);return(m=p?[R]:[ue(Math.abs(r[2][0]-M[0]),i,n),R]).push("at",ue(M[0],i,n),ue(M[1],s,n)),m}}function pn(t,e,r,n){var a=[n,(n+e)/2,e],i=[t,(t+r)/2,r];return cn.map((function(t){var e=t[0],r=t[1],n=t[2],o=a[e+1],s=i[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(e),direction:n,pos:[o,s]}}))}function dn(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach((function(t){var n=t.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])})),[Math.abs(e[1]-e[0]),Math.abs(r[1]-r[0])]}function hn(t,e,r,n,a){var o,s,u,c,f,p,d;if(t){var h=a;if(!h){var g=getComputedStyle(t),v=g.clipPath;h="none"!==v?v:g.clip}if(h&&"none"!==h&&"auto"!==h||(h=n)){var m=(0,i.Le)(h),b=m.prefix,E=void 0===b?h:b,S=m.value,D=void 0===S?"":S,M="circle"===E,R=" ";if("polygon"===E){R=",";var C=(A=(0,i.W6)(D||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var n=t.split(" "),a=n[0],o=n[1];return{vertical:1,horizontal:1,pos:[(0,i.AA)(a,e),(0,i.AA)(o,r)]}})),y=(0,l.i$)(C.map((function(t){return t.pos})));return{type:E,clipText:h,poses:C,splitter:R,left:y.minX,right:y.maxX,top:y.minY,bottom:y.maxY}}if(M||"ellipse"===E){var P,z,O,G="",w="",T=0,B=0,A=(0,i.WE)(D);if(M)P=void 0===(o=A[0])?"50%":o,G=void 0===(s=A[2])?"50%":s,w=void 0===(u=A[3])?"50%":u,T=(0,i.AA)(P,Math.sqrt((e*e+r*r)/2)),B=T;else z=void 0===(c=A[0])?"50%":c,O=void 0===(f=A[1])?"50%":f,G=void 0===(p=A[3])?"50%":p,w=void 0===(d=A[4])?"50%":d,T=(0,i.AA)(z,e),B=(0,i.AA)(O,r);var k=[(0,i.AA)(G,e),(0,i.AA)(w,r)];return C=x([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],ln.slice(0,M?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[k[0]+t[0]*T,k[1]+t[1]*B]}})),!0),{type:E,clipText:h,radiusX:T,radiusY:B,left:k[0]-T,top:k[1]-B,right:k[0]+T,bottom:k[1]+B,poses:C,splitter:R}}if("inset"===E){var I=(A=(0,i.WE)(D||"0 0 0 0")).indexOf("round"),N=(I>-1?A.slice(0,I):A).length,_=A.slice(N+1),F=A.slice(0,N),W=F[0],H=F[1],j=void 0===H?W:H,q=F[2],X=void 0===q?W:q,Y=F[3],L=void 0===Y?j:Y,V=[W,X].map((function(t){return(0,i.AA)(t,r)})),U=V[0],K=V[1],J=[L,j].map((function(t){return(0,i.AA)(t,e)})),Z=J[0],Q=J[1],$=e-Q,tt=r-K,et=un(_,$-Z,tt-U,Z,U);return{type:"inset",clipText:h,poses:C=x(x([],pn(U,$,tt,Z),!0),et,!0),top:U,left:Z,right:$,bottom:tt,radius:_,splitter:R}}if("rect"===E){R=",";var rt=(A=(0,i.W6)(D||"0px, ".concat(e,"px, ").concat(r,"px, 0px"))).map((function(t){return(0,i.jL)(t).value}));return{type:"rect",clipText:h,poses:C=pn(U=rt[0],Q=rt[1],K=rt[2],Z=rt[3]),top:U,right:Q,bottom:K,left:Z,values:A,splitter:R}}}}}var gn={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,n=r.customClipPath,a=r.defaultClipPath,s=r.clipArea,u=r.zoom,l=r.groupable,c=t.getState(),f=c.target,p=c.width,d=c.height,h=c.allMatrix,g=c.is3d,v=c.left,m=c.top,b=c.pos1,E=c.pos2,S=c.pos3,D=c.pos4,M=c.clipPathState,R=c.snapBoundInfos,C=c.rotation;if(!f||l)return[];var y=hn(f,p,d,a||"inset",M||n);if(!y)return[];var P=g?4:3,z=y.type,O=y.poses.map((function(t){var e=Pt(h,t.pos,P);return[e[0]-v,e[1]-m]})),G=[],w=[],T="rect"===z,B="inset"===z,A="polygon"===z;if(T||B||A){var k=B?O.slice(0,8):O;w=k.map((function(t,r){var n=0===r?k[k.length-1]:k[r-1],a=(0,i.jv)(n,t),o=Bt(n,t);return e.createElement("div",{key:"clipLine".concat(r),className:dt("line","clip-line","snap-control"),"data-clip-index":r,style:{width:"".concat(o,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(a,"rad) scaleY(").concat(u,")")}})}))}if(G=O.map((function(t,r){return e.createElement("div",{key:"clipControl".concat(r),className:dt("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(C,"rad) scale(").concat(u,")")}})})),B&&G.push.apply(G,O.slice(8).map((function(t,r){return e.createElement("div",{key:"clipRadiusControl".concat(r),className:dt("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(C,"rad) scale(").concat(u,")")}})}))),"circle"===z||"ellipse"===z){var I=y.left,N=y.top,_=y.radiusX,F=y.radiusY,W=(0,o.h9)(Pt(h,[I,N],P),Pt(h,[0,0],P)),H=W[0],j=W[1],q="none";if(!s){for(var X=Math.max(10,_/5,F/5),Y=[],L=0;L<=X;++L){var V=2*Math.PI/X*L;Y.push([_+(_-u)*Math.cos(V),F+(F-u)*Math.sin(V)])}Y.push([_,-2]),Y.push([-2,-2]),Y.push([-2,2*F+2]),Y.push([2*_+2,2*F+2]),Y.push([2*_+2,-2]),Y.push([_,-2]),q="polygon(".concat(Y.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}G.push(e.createElement("div",{key:"clipEllipse",className:dt("clip-ellipse","snap-control"),style:{width:"".concat(2*_,"px"),height:"".concat(2*F,"px"),clipPath:q,transform:"translate(".concat(-v+H,"px, ").concat(-m+j,"px) ").concat(Rt(h))}}))}if(s){var U=Ot(x([b,E,S,D],O,!0)),K=U.width,J=U.height,Z=U.left,Q=U.top;(A||T||B)&&(Y=B?O.slice(0,8):O,G.push(e.createElement("div",{key:"clipArea",className:dt("clip-area","snap-control"),style:{width:"".concat(K,"px"),height:"".concat(J,"px"),transform:"translate(".concat(Z,"px, ").concat(Q,"px)"),clipPath:"polygon(".concat(Y.map((function(t){return"".concat(t[0]-Z,"px ").concat(t[1]-Q,"px")})).join(", "),")")}})))}return R&&["vertical","horizontal"].forEach((function(t){var r=R[t],n="horizontal"===t;r.isSnap&&w.push.apply(w,r.snap.posInfos.map((function(r,a){var i=r.pos,s=(0,o.h9)(Pt(h,n?[0,i]:[i,0],P),[v,m]),l=(0,o.h9)(Pt(h,n?[p,i]:[i,d],P),[v,m]);return Er(e,"",s,l,u,"clip".concat(t,"snap").concat(a),"guideline")}))),r.isBound&&w.push.apply(w,r.bounds.map((function(r,a){var i=r.pos,s=(0,o.h9)(Pt(h,n?[0,i]:[i,0],P),[v,m]),l=(0,o.h9)(Pt(h,n?[p,i]:[i,d],P),[v,m]);return Er(e,"",s,l,u,"clip".concat(t,"bounds").concat(a),"guideline","bounds","bold")})))})),x(x([],G,!0),w,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return!(void 0===r||r)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,b(b({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=hn(o,s,u,a||"inset",i);if(!p)return!1;var d=p.clipText;return!1===Qt(t,"onClipStart",Kt(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map((function(t){return t.pos}))}))?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,r.clipPathState=d,Y(t,e),!0)},dragControl:function(t,e){var r,n,a=e.datas,s=e.originalDatas,u=e.isDragTarget;if(!a.isClipStart)return!1;var l=a,c=l.isControl,f=l.isLine,p=l.isArea,d=l.clipIndex,h=l.clipPath;if(!h)return!1;var g=It(t.props,"clippable"),v=g.keepRatio,m=0,E=0,S=s.draggable,D=J(e);u&&S?(r=S.prevBeforeDist,m=r[0],E=r[1]):(m=D[0],E=D[1]);var M=[m,E],R=t.state,C=R.width,y=R.height,P=!p&&!c&&!f,z=h.type,O=h.poses,G=h.splitter,w=O.map((function(t){return t.pos}));P&&(m=-m,E=-E);var T=!c||"nesw"===O[d].direction,B="inset"===z||"rect"===z,A=O.map((function(){return[0,0]}));if(c&&!T){var k=O[d],I=k.horizontal,N=k.vertical,_=[m*Math.abs(I),E*Math.abs(N)];A=function(t,e,r,n,a){var i=t[e],o=i.direction,s=i.sub,u=t.map((function(){return[0,0]})),l=o?o.split(""):[];if(n&&e<8){var c=l.filter((function(t){return"w"===t||"e"===t})),f=l.filter((function(t){return"n"===t||"s"===t})),p=c[0],d=f[0];u[e]=r;var h=dn(t),g=h[0],v=h[1],m=g&&v?g/v:0;if(m&&a){var b=t[(e+4)%8].pos,x=[0,0];o.indexOf("w")>-1?x[0]=-1:o.indexOf("e")>-1&&(x[0]=1),o.indexOf("n")>-1?x[1]=-1:o.indexOf("s")>-1&&(x[1]=1);var E=ve([g,v],r,m,x,!0),S=g+E[0],D=v+E[1],M=b[1],R=b[1],C=b[0],y=b[0];-1===x[0]?C=y-S:1===x[0]?y=C+S:(C-=S/2,y+=S/2),-1===x[1]?M=R-D:R=1===x[1]?M+D:(M=R-D/2)+D;var P=pn(M,y,R,C);t.forEach((function(t,e){u[e][0]=P[e].pos[0]-t.pos[0],u[e][1]=P[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var n=t.direction;n&&(n.indexOf(p)>-1&&(u[e][0]=r[0]),n.indexOf(d)>-1&&(u[e][1]=r[1]))})),p&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),d&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else o&&!s?l.forEach((function(e){var n="n"===e||"s"===e;t.forEach((function(t,a){var i=t.direction,o=t.horizontal,s=t.vertical;i&&-1!==i.indexOf(e)&&(u[a]=[n||!o?0:r[0],n&&s?r[1]:0])}))})):u[e]=r;return u}(O,d,_,B,v)}else T&&(A=w.map((function(){return[m,E]})));var F=w.map((function(t,e){return(0,o.PD)(t,A[e])})),W=x([],F,!0);R.snapBoundInfos=null;var H="circle"===h.type,j="ellipse"===h.type;if(H||j){var q=Ot(F),X=Math.abs(q.bottom-q.top),Y=Math.abs(j?q.right-q.left:X),L=F[0][1]+X,V=F[0][0]-Y,U=F[0][0]+Y;H&&(W.push([U,q.bottom]),A.push([1,0])),W.push([q.left,L]),A.push([0,1]),W.push([V,q.bottom]),A.push([1,0])}var K=lr((g.clipHorizontalGuidelines||[]).map((function(t){return(0,i.AA)("".concat(t),y)})),(g.clipVerticalGuidelines||[]).map((function(t){return(0,i.AA)("".concat(t),C)})),C,y),Z=[],Q=[];if(H||j)Z=[W[4][0],W[2][0]],Q=[W[1][1],W[3][1]];else if(B){var $=[W[0],W[2],W[4],W[6]],tt=[A[0],A[2],A[4],A[6]];Z=$.filter((function(t,e){return tt[e][0]})).map((function(t){return t[0]})),Q=$.filter((function(t,e){return tt[e][1]})).map((function(t){return t[1]}))}else Z=W.filter((function(t,e){return A[e][0]})).map((function(t){return t[0]})),Q=W.filter((function(t,e){return A[e][1]})).map((function(t){return t[1]}));var et=[0,0],rt=ir(K,g.clipTargetBounds&&{left:0,top:0,right:C,bottom:y},Z,Q,5),nt=rt.horizontal,at=rt.vertical,it=nt.offset,ot=at.offset;if(nt.isBound&&(et[1]+=it),at.isBound&&(et[0]+=ot),(j||H)&&0===A[0][0]&&0===A[0][1]){var st=(q=Ot(F)).bottom-q.top,ut=j?q.right-q.left:st;ut-=at.isBound?Math.abs(ot):0===at.snapIndex?-ot:ot,st-=nt.isBound?Math.abs(it):0===nt.snapIndex?-it:it,H&&(ut=st=Ne(at,nt)>0?st:ut);var lt=W[0];W[1][1]=lt[1]-st,W[2][0]=lt[0]+ut,W[3][1]=lt[1]+st,W[4][0]=lt[0]-ut}else if(B&&v&&c){var ct=dn(O),ft=ct[0],pt=ct[1],dt=ft&&pt?ft/pt:0,ht=O[d].direction||"",gt=W[1][1];L=W[5][1],V=W[7][0],U=W[3][0],it<=ot?it=ot/dt:ot=it*dt,ht.indexOf("w")>-1?V-=ot:ht.indexOf("e")>-1?U-=ot:(V+=ot/2,U-=ot/2),ht.indexOf("n")>-1?gt-=it:ht.indexOf("s")>-1?L-=it:(gt+=it/2,L-=it/2);var vt=pn(gt,U,L,V);W.forEach((function(t,e){var r;r=vt[e].pos,t[0]=r[0],t[1]=r[1]}))}else W.forEach((function(t,e){var r=A[e];r[0]&&(t[0]-=ot),r[1]&&(t[1]-=it)}));var mt=fn(t,h,F),bt="".concat(z,"(").concat(mt.join(G),")");if(R.clipPathState=bt,H||j?(Z=[W[4][0],W[2][0]],Q=[W[1][1],W[3][1]]):B?(Z=($=[W[0],W[2],W[4],W[6]]).map((function(t){return t[0]})),Q=$.map((function(t){return t[1]}))):(Z=W.map((function(t){return t[0]})),Q=W.map((function(t){return t[1]}))),R.snapBoundInfos=ir(K,g.clipTargetBounds&&{left:0,top:0,right:C,bottom:y},Z,Q,1),S){var xt=R.is3d,Et=R.allMatrix,St=xt?4:3,Dt=et;u&&(Dt=[M[0]+et[0]-D[0],M[1]+et[1]-D[1]]),S.deltaOffset=(0,o.ml)(Et,[Dt[0],Dt[1],0,0],St)}return Qt(t,"onClip",Kt(t,e,b({clipEventType:"changed",clipType:z,poses:F,clipStyle:bt,clipStyles:mt,distX:m,distY:E},Vt(((n={})["rect"===z?"clip":"clipPath"]=bt,n),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,a=e.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return!!o&&(Qt(t,"onClipEnd",Jt(t,e,{})),a&&(s?function(t,e){var r=e.datas,n=r.clipPath,a=r.clipIndex,i=n,o=i.type,s=i.poses,u=i.splitter,l=s.map((function(t){return t.pos})),c=l.length;if("polygon"===o)s.splice(a,1),l.splice(a,1);else{if("inset"!==o)return;if(a<8)return;if(function(t,e,r,n,a){void 0===a&&(a=e.length);var i=sn(t.slice(8)),o=i.horizontalRange,s=i.verticalRange,u=r-8,l=0;if(0===u)l=a;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}(s,l,a,0,c),c===s.length)return}var f=fn(t,n,l),p="".concat(o,"(").concat(f.join(u),")");Qt(t,"onClip",Kt(t,e,b({clipEventType:"removed",clipType:o,poses:l,clipStyles:f,clipStyle:p,distX:0,distY:0},Vt({clipPath:p},e))))}(t,e):i&&function(t,e){var r=X(t,e),n=r[0],a=r[1],i=e.datas,o=i.clipPath,s=i.clipIndex,u=o,l=u.type,c=u.poses,f=u.splitter,p=c.map((function(t){return t.pos}));if("polygon"===l)p.splice(s,0,[n,a]);else{if("inset"!==l)return;var d=en.indexOf(s),h=rn.indexOf(s),g=c.length;if(function(t,e,r,n,a,i,o,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=sn(t.slice(8)),p=f.horizontalRange,d=f.verticalRange;if(n>-1)for(var h=1===nn[n]?i-l:s-i,g=p[1];g<=n;++g){var v=1===an[g]?c:u,m=0;if(n===g?m=i:0===g?m=l+h:-1===nn[g]&&(m=s-(e[8][0]-l)),t.splice(8+g,0,{horizontal:nn[g],vertical:0,pos:[m,v]}),e.splice(8+g,0,[m,v]),0===g)break}else if(a>-1){var b=1===an[a]?o-c:u-o;if(0===p[1]&&0===d[1]){var x=[l+b,c];t.push({horizontal:nn[0],vertical:0,pos:x}),e.push(x)}var E=d[0];for(g=d[1];g<=a&&(m=1===nn[g]?l:s,v=0,a===g?v=o:0===g?v=c+b:1===an[g]?v=e[8+E][1]:-1===an[g]&&(v=u-(e[8+E][1]-c)),t.push({horizontal:0,vertical:an[g],pos:[m,v]}),e.push([m,v]),0!==g);++g);}}(c,p,0,d,h,n,a,p[4][0],p[4][1],p[0][0],p[0][1]),g===c.length)return}var v=fn(t,o,p),m="".concat(l,"(").concat(v.join(f),")");Qt(t,"onClip",Kt(t,e,b({clipEventType:"added",clipType:l,poses:p,clipStyles:v,clipStyle:m,distX:0,distY:0},Vt({clipPath:m},e))))}(t,e)),a||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},vn={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:(0,i.pv)(e.inputEvent.target,dt("origin"))},dragControlStart:function(t,e){var r=e.datas;Y(t,e);var n=Kt(t,e,{dragStart:Rr.dragStart(t,(new q).dragStart([0,0],e))}),a=Qt(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===a?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,a=e.isRequest;if(!r.isDragOrigin)return!1;var i=J(e),s=i[0],u=i[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,x=[s,u];if(a){var E=e.distOrigin;(E[0]||E[1])&&(x=E)}var S=(0,o.PD)(r.startOrigin,x),D=(0,o.PD)(r.startTargetOrigin,x),M=(0,o.h9)(x,r.prevOrigin),R=$(p,d,S,m),C=t.getRect(),y=Ot(zt(R,c,f,m)),P=[C.left-y.left,C.top-y.top];r.prevOrigin=x;var z=[ue(D[0],c,v),ue(D[1],f,v)].join(" "),O=Rr.drag(t,j(e,t.state,P,!!n,!1)),G=Kt(t,e,b(b({width:c,height:f,origin:S,dist:x,delta:M,transformOrigin:z,drag:O},Vt({transformOrigin:z,transform:O.transform},e)),{afterTransform:O.transform}));return Qt(t,"onDragOrigin",G),G},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Qt(t,"onDragOriginEnd",Jt(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,a=0,i=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-i[0],o[1]=t.origin[1]-i[1]):("x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?a=t.y-r.top:"deltaY"in t&&(a+=t.deltaY)),{datas:e,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function mn(t,e,r,n,a){return void 0===n&&(n=[0,0]),un(t&&"0px"!==t?(0,i.WE)(t):[],e,r,0,0,n,a)}function bn(t,e,r,n,a){var i=t.state,o=i.width,s=i.height,u=on(a,t.props.roundRelative,o,s),l=u.raws,c=u.styles,f=function(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,r){return t.horizontal?e[r]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,r){return t.vertical?e[r]:null})).filter((function(t){return null!=t}))}}(u.radiusPoses,l),p=f.horizontals,d=f.verticals,h=c.join(" ");i.borderRadiusState=h;var g=Kt(t,e,b({horizontals:p,verticals:d,borderRadius:h,width:o,height:s,delta:n,dist:r},Vt({borderRadius:h},e)));return Qt(t,"onRound",g),g}function xn(t){var e=t.getState().style,r=e.borderRadius||"";if(!r&&t.props.groupable){var n=t.getTargets()[0];n&&(r=getComputedStyle(n).borderRadius,e.borderRadius=r)}return r}var En={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n    z-index: 3;\n}",".control.border-radius.vertical {\n    background: #d6d;\n    z-index: 2;\n}",".control.border-radius.virtual {\n    opacity: 0.5;\n    z-index: 1;\n}",":host.round-line-clickable .line.direction {\n    cursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?dt("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,a=r.width,i=r.height,s=r.allMatrix,u=r.is3d,l=r.left,c=r.top,f=r.borderRadiusState,p=t.props,d=p.minRoundControls,h=void 0===d?[0,0]:d,g=p.maxRoundControls,v=void 0===g?[4,4]:g,m=p.zoom,b=p.roundPadding,E=void 0===b?0:b,S=p.isDisplayShadowRoundControls,D=p.groupable;if(!n)return null;var M=f||xn(t),R=u?4:3,C=mn(M,a,i,h,!0);if(!C)return null;var y=0,P=0,z=D?[0,0]:[l,c];return C.map((function(t,r){var n=t.horizontal,a=t.vertical,i=t.direction||"",u=x([],t.pos,!0);P+=Math.abs(n),y+=Math.abs(a),n&&i.indexOf("n")>-1&&(u[1]-=E),a&&i.indexOf("w")>-1&&(u[0]-=E),n&&i.indexOf("s")>-1&&(u[1]+=E),a&&i.indexOf("e")>-1&&(u[0]+=E);var l=(0,o.h9)(Pt(s,u,R),z),c=t.vertical?y<=v[1]&&(S||!t.virtual):P<=v[0]&&(S||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(r),className:dt("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":r,style:{display:c?"block":"none",transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) scale(").concat(m,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,a=r.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var c=a.getAttribute("data-line-key")||"";c&&(l=parseInt(c.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!o&&!s)return!1;var f=Kt(t,e,{});if(!1===Qt(t,"onRoundStart",f))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=o,n.isLine=s,Y(t,e);var p=t.props,d=p.roundRelative,h=p.minRoundControls,g=void 0===h?[0,0]:h,v=t.state,m=v.width,b=v.height;n.isRound=!0,n.prevDist=[0,0];var x=mn(xn(t)||"",m,b,g,!0)||[];return n.controlPoses=x,v.borderRadiusState=on(x,d,m,b).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var a=r.controlIndex,i=J(e),s=i[0],u=i[1],l=[s,u],c=(0,o.h9)(l,r.prevDist),f=t.props.maxRoundControls,p=void 0===f?[4,4]:f,d=t.state,h=d.width,g=d.height,v=n[a],m=v.vertical,x=v.horizontal,E=n.map((function(t){var e=t.horizontal,r=t.vertical,n=[e*x*l[0],r*m*l[1]];if(e){if(1===p[0])return n;if(p[0]<4&&e!==x)return n}else{if(0===p[1])return n[1]=r*x*l[0]/h*g,n;if(m){if(1===p[1])return n;if(p[1]<4&&r!==m)return n}}return[0,0]}));E[a]=l;var S=n.map((function(t,e){return b(b({},t),{pos:(0,o.PD)(t.pos,E[e])})}));return a<4?S.slice(0,a+1).forEach((function(t){t.virtual=!1})):S.slice(4,a+1).forEach((function(t){t.virtual=!1})),r.prevDist=[s,u],bn(t,e,l,c,S)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,a=e.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,c=l.filter((function(t){return t.virtual})).length,f=t.props.roundClickable,p=void 0===f||f;if(a&&p){if(!i||!0!==p&&"control"!==p){if(s&&(!0===p||"line"===p)){var d=X(t,e);!function(t,e,r,n){var a=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,i=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,o=-1;if(0===e&&(0===a?o=0:1===a&&(o=1)),2===e&&(a<=2?o=2:a<=3&&(o=3)),3===e&&(0===i?o=4:i<4&&(o=7)),1===e&&(i<=1?o=5:i<=2&&(o=6)),-1!==o&&t[o].virtual){var s=t[o];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,o),o<4?s.pos[0]=r:s.pos[1]=n}}(l,u,d[0],d[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(l,o);c!==l.filter((function(t){return t.virtual})).length&&bn(t,e,[0,0],[0,0],l)}var h=Jt(t,e,{});return Qt(t,"onRoundEnd",h),r.borderRadiusState="",h},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,a=t.props.targets,i=De(t,"roundable",e);return Qt(t,"onRoundGroupStart",b({targets:t.props.targets,events:i.map((function(t,e){return b(b({},t),{target:a[e],moveable:n[e],currentTarget:n[e]})}))},r)),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,a=t.props.targets,i=De(t,"roundable",e),o=b({targets:t.props.targets,events:i.map((function(t,e){return b(b(b({},t),{target:a[e],moveable:n[e],currentTarget:n[e]}),Vt({borderRadius:r.borderRadius},t))}))},r);return Qt(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,a=De(t,"roundable",e);Zt(t,"onRound",(function(e){var i=b({targets:t.props.targets,events:a.map((function(t,a){return b(b(b({},t),{target:n[a],moveable:r[a],currentTarget:r[a]}),Vt({borderRadius:e.borderRadius},t))}))},e);Qt(t,"onRoundGroup",i)}));var i=this.dragControlEnd(t,e);if(!i)return!1;var o=b({targets:t.props.targets,events:a.map((function(t,e){var a;return b(b({},t),{target:n[e],moveable:r[e],currentTarget:r[e],lastEvent:null===(a=t.datas)||void 0===a?void 0:a.lastEvent})}))},i);return Qt(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}},Sn={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var r=t.state,n=r.is3d,a=r.target,s=r.targetMatrix,u=null==a?void 0:a.style.transform,l=n?"matrix3d(".concat(s.join(","),")"):"matrix(".concat((0,o.pQ)(s,!0),")"),c=u&&"none"!==u?u:l;e.datas.startTransforms=function(t,e){var r=e?4:3,n=(0,o.Te)(r);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(c,n)?[]:(0,i.WE)(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Kt(t,e,{setTransform:function(t){e.datas.startTransforms=(0,i.kJ)(t)?t:(0,i.WE)(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Kt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Qt(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),Qt(t,"onBeforeRender",Kt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Qt(t,"onBeforeRenderEnd",Kt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=De(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.setTransform(n,t),r.resetStyle(t),r.fillDragStartParams(n,t)}));Qt(t,"onBeforeRenderGroupStart",Kt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=De(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.resetStyle(t),r.fillDragParams(n,t)}));Qt(t,"onBeforeRenderGroup",Kt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Qt(t,"onBeforeRenderGroupEnd",Kt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Dn={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Qt(t,"onRenderStart",Kt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Qt(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Qt(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Qt(t,"onRenderGroupStart",Kt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=De(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.fillDragParams(n,t)}));Qt(t,"onRenderGroup",Kt(t,e,b(b({isPinch:!!e.isPinch,targets:t.props.targets,transform:ot(e)},Vt(st(e))),{events:i})))},dragGroupEnd:function(t,e){var r=this,n=De(t,"beforeRenderable",e),a=t.moveables,i=n.map((function(t,e){var n=a[e];return r.fillDragEndParams(n,t)}));Qt(t,"onRenderGroupEnd",Kt(t,e,b({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:ot(e)},Vt(st(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return Kt(t,e,b({isPinch:!!e.isPinch,transform:ot(e)},Vt(st(e))))},fillDragEndParams:function(t,e){return Kt(t,e,b({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:ot(e)},Vt(st(e))))}};function Mn(t,e,r,n,a,i,o){var s="Start"===a,u=t.state.target,l=i.isRequest;if(!u||s&&n.indexOf("Control")>-1&&!l&&t.areaElement===i.inputEvent.target)return!1;var c="".concat(r).concat(n).concat(a),f="".concat(r).concat(n,"Condition"),p="End"===a,d="After"===a,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,""!==a||l||oe(t.state,i);var g=x([],t[e],!0);if(l){var v=i.requestAble;g.some((function(t){return t.name===v}))||g.push.apply(g,t.props.ables.filter((function(t){return t.name===v})))}if(!g.length||g.every((function(t){return t.dragRelation})))return!1;var m=x(x([Sn],g,!0),[Dn],!1).filter((function(t){return t[c]})),E=i.datas;h&&m.forEach((function(e){e.unset&&e.unset(t)}));var S,D=i.inputEvent;p&&D&&(S=document.elementFromPoint(i.clientX,i.clientY)||D.target);var M=0,R=!1,C=function(){var t;R=!0,null===(t=i.stop)||void 0===t||t.call(i)},y=m.filter((function(e){var r=e.name,n=E[r]||(E[r]={});if(s&&(n.isEventStart=!e[f]||e[f](t,i)),n.isEventStart){var a=e[c](t,b(b({},i),{stop:C,resultCount:M,datas:n,originalDatas:E,inputTarget:S}));return t._emitter.off(),s&&!1===a&&(n.isEventStart=!1),M+=a||n.isEventStart?1:0,a}return!1})).length,P=!1;return R&&(P=!0),!P&&s&&m.length&&!y&&(P=m.filter((function(t){var e=t.name;return!!E[e].isEventStart&&"strong"!==t.dragRelation})).length),(p||P)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}})),m.forEach((function(e){e.unset&&e.unset(t)}))),s&&!P&&!l&&y&&(null==i||i.preventDefault()),!t.isUnmounted&&!P&&((!s&&y&&!o||p)&&(t.props.flushSync||ht)((function(){t.updateRect(p?a:"",!0,!1),t.forceUpdate()})),s||p||d||!y||o||Mn(t,e,r,n,a+"After",i),!0)}function Rn(t){return function(e){var r=t.props.dragTarget,n=e.inputEvent.target,a=t.areaElement;return r&&(n===r||r.contains(n))||n===a||!t.isMoveableElement(n)&&!t.controlBox.getElement().contains(n)||(0,i.pv)(n,"moveable-area")||(0,i.pv)(n,"moveable-padding")||(0,i.pv)(n,"moveable-edgeDraggable")}}function Cn(t,e,r){var n=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(n),t.props.dragArea&&!i||a.push(e),yn(t,a,"targetAbles",r,{dragStart:Rn(t),pinchStart:Rn(t)})}function yn(t,e,r,n,a){void 0===a&&(a={});var i="targetAbles"===r,o=t.props,s=o.pinchOutside,u=o.pinchThreshold,l=o.preventClickEventOnDrag,c=o.preventClickDefault,f=o.checkInput,d={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:!!i&&l,preventClickEventOnDragStart:!!i&&c,preventClickEventByCondition:i?null:function(e){return t.controlBox.getElement().contains(e.target)},checkInput:!!i&&f},h=new p.Z(e,d),g="Control"===n;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(i){h.on("".concat(e).concat(i),(function(o){var s,u=o.eventType;(!a[u]||a[u](o))&&Mn(t,r,e,n,i,o)?(t.props.stopPropagation||"Start"===i&&g)&&(null===(s=null==o?void 0:o.inputEvent)||void 0===s||s.stopPropagation()):o.stop()}))}))})),h}var Pn=function(){function t(t,e,r){var n=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(t){var e=n.eventName,r=n.moveable;r.state.disableNativeEvent||n.ables.forEach((function(n){n[e](r,{inputEvent:t})}))},t.addEventListener(r.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function zn(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function On(t,e,r){for(var n,a,i,s=t,u=[],l=document.documentElement||document.body,c=!r&&t===e||t===l,f=c,p=!1,d=3,h=!1,g=xt(e,e,!0).offsetParent,v=1;s&&!f;){f=c;var m=getComputedStyle(s),b=m.position,x=bt(s,m),E=(0,o.YX)(gt(x)),S="fixed"===b,D={hasTransform:!1,fixedContainer:null};S&&(h=!0,g=(D=Mt(s)).fixedContainer);var M=E.length;p||16!==M||(p=!0,d=4,Dt(u),i&&(i=(0,o.mA)(i,3,4))),p&&9===M&&(E=(0,o.mA)(E,3,4));var C=Et(s,t,m),z=C.tagName,O=C.hasOffset,G=C.isSVG,w=C.origin,T=C.targetOrigin,B=C.offset,A=B[0],k=B[1];"svg"===z&&i&&(u.push({type:"target",target:s,matrix:yt(s,d)}),u.push({type:"offset",target:s,matrix:(0,o.Te)(d)}));var I=void 0,N=!1,_=!1,F=parseFloat(m.zoom)||1;if(S)I=D.fixedContainer,N=!0;else{var W=xt(s,e,!1,!0,m),H=W.offsetZoom;if(I=W.offsetParent,N=W.isEnd,_=W.isStatic,v*=H,1!==H&&_)A-=I.offsetLeft,k-=I.offsetTop;else if(y&&W.parentSlotElement){for(var j=I,q=0,X=0;j&&zn(j);)q+=j.offsetLeft,X+=j.offsetTop,j=j.offsetParent;A-=q,k-=X}}!R||P||!O||G||!_||"relative"!==b&&"static"!==b||(A-=I.offsetLeft,k-=I.offsetTop,c=c||N);var Y=0,L=0,V=0,U=0;if(S)O&&D.hasTransform&&(V=I.clientLeft,U=I.clientTop);else if(O&&g!==I&&(Y=I.clientLeft,L=I.clientTop),O&&I===l){var K=St(s,!1,m);A+=K[0],k+=K[1]}if(u.push({type:"target",target:s,matrix:vt(E,d,w)}),O){var J=s===t,Z=J?0:s.scrollLeft,Q=J?0:s.scrollTop;u.push({type:"offset",target:s,matrix:(0,o.Jm)([A-Z+Y-V,k-Q+L-U],d)})}else u.push({type:"offset",target:s,origin:w});if(1!==F&&u.push({type:"zoom",target:s,matrix:vt((0,o.Wi)([F,F],d),d,[0,0])}),i||(i=E),n||(n=w),a||(a=T),f||S)break;s=I,c=N,r&&s!==l||(f=c)}return i||(i=(0,o.Te)(d)),n||(n=[0,0]),a||(a=[0,0]),{zoom:v,offsetContainer:g,matrixes:u,targetMatrix:i,transformOrigin:n,targetOrigin:a,is3d:p,hasFixed:h}}function Gn(t,e,r,n){void 0===r&&(r=e);var a=0,i=0,s=0,u={},l=Nt(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var c=function(t,e,r,n){var a;void 0===r&&(r=e);var i=On(t,e),s=i.matrixes,u=i.is3d,l=i.targetMatrix,c=i.transformOrigin,f=i.targetOrigin,p=i.offsetContainer,d=i.hasFixed,h=i.zoom,g=On(p,r,!0),v=g.matrixes,m=g.is3d,b=g.offsetContainer,x=g.zoom,E=n||m||u,S=E?4:3,D="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,M=l,R=(0,o.Te)(S),C=(0,o.Te)(S),y=(0,o.Te)(S),P=(0,o.Te)(S),z=s.length;v.reverse(),s.reverse(),!u&&E&&(M=(0,o.mA)(M,3,4),Dt(s)),!m&&E&&Dt(v),v.forEach((function(t){C=(0,o.ml)(C,t.matrix,S)}));var O=r||document.body,G=(null===(a=v[0])||void 0===a?void 0:a.target)||xt(O,O,!0).offsetParent,w=v.slice(1).reduce((function(t,e){return(0,o.ml)(t,e.matrix,S)}),(0,o.Te)(S));s.forEach((function(t,e){if(z-2===e&&(y=R.slice()),z-1===e&&(P=R.slice()),!t.matrix){var r=function(t,e,r,n,a){var i,s=t.target,u=t.origin,l=e.matrix,c=Nt(s),f=c.offsetWidth,p=c.offsetHeight,d=r.getBoundingClientRect(),h=[0,0];r===document.body&&(h=St(s,!0));for(var g=s.getBoundingClientRect(),v=g.left-d.left+r.scrollLeft-(r.clientLeft||0)+h[0],m=g.top-d.top+r.scrollTop-(r.clientTop||0)+h[1],b=g.width,x=g.height,E=(0,o.KF)(n,a,l),S=Gt(E,f,p,n),D=S.left,M=S.top,R=S.width,C=S.height,y=Pt(E,u,n),P=(0,o.h9)(y,[D,M]),z=[v+P[0]*b/R,m+P[1]*x/C],O=[0,0],G=0;++G<10;){var w=(0,o.U_)(a,n);i=(0,o.h9)(Pt(w,z,n),Pt(w,y,n)),O[0]=i[0],O[1]=i[1];var T=Gt((0,o.KF)(n,a,(0,o.Jm)(O,n),l),f,p,n),B=T.left-v,A=T.top-m;if(Math.abs(B)<2&&Math.abs(A)<2)break;z[0]-=B,z[1]-=A}return O.map((function(t){return Math.round(t)}))}(t,s[e+1],G,S,(0,o.ml)(w,R,S));t.matrix=(0,o.Jm)(r,S)}R=(0,o.ml)(R,t.matrix,S)}));var T=!D&&u;M||(M=(0,o.Te)(T?4:3));var B=Rt(D&&16===M.length?(0,o.mA)(M,4,3):M,T),A=C;return{hasZoom:1!==h||1!==x,hasFixed:d,rootMatrix:C=(0,o.Xj)(C,S,S),originalRootMatrix:A,beforeMatrix:y,offsetMatrix:P,allMatrix:R,targetMatrix:M,targetTransform:B,transformOrigin:c,targetOrigin:f,is3d:E,offsetContainer:p,offsetRootContainer:b}}(t,e,r,n),f=wt(c.allMatrix,c.transformOrigin,a,i);u=b(b({},c),f);var p=wt(c.allMatrix,[50,50],100,100);s=_t([p.pos1,p.pos2],p.direction)}var d=n?4:3;return b(b(b({hasZoom:!1,width:a,height:i,rotation:s},l),{originalRootMatrix:(0,o.Te)(d),rootMatrix:(0,o.Te)(d),beforeMatrix:(0,o.Te)(d),offsetMatrix:(0,o.Te)(d),allMatrix:(0,o.Te)(d),targetMatrix:(0,o.Te)(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),u)}function wn(t,e,r){return void 0===r&&(r=e),Gn(t,e,r,!0)}function Tn(t,e,r,n,a,i){void 0===i&&(i=[]);var s=1,u=[0,0],l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d=[0,0],h={},g=Gn(e,r,a,!0);if(e){var v=getComputedStyle(e);i.forEach((function(t){h[t]=v[t]}));var m=g.is3d?4:3,x=wt(g.offsetMatrix,(0,o.PD)(g.transformOrigin,(0,o.P$)(g.targetMatrix,m)),g.width,g.height);s=x.direction,u=(0,o.PD)(x.origin,[x.left-g.left,x.top-g.top]),p=Ht(g.offsetRootContainer);var E=xt(n,n,!0).offsetParent||g.offsetRootContainer;if(g.hasZoom){var S=wt((0,o.ml)(g.originalRootMatrix,g.allMatrix),g.transformOrigin,g.width,g.height),D=wt(g.originalRootMatrix,mt(getComputedStyle(E)).map((function(t){return parseFloat(t)})),E.offsetWidth,E.offsetHeight);if(l=Wt(S,p),f=Wt(D,p,E,!0),t){var M=S.left,R=S.top;c=Wt({left:M,top:R,bottom:R,right:R},p)}}else{l=Ht(e),f=Ht(E,!0),t&&(c=Ht(t));var C=f.left,y=f.top,P=f.clientLeft,z=f.clientTop,O=[l.left-C,l.top-y];d=(0,o.h9)(ie(g.rootMatrix,O,4),[P+g.left,z+g.top])}}return b({targetClientRect:l,containerClientRect:f,moveableClientRect:c,rootContainerClientRect:p,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:e,style:h,offsetDelta:d},g)}function Bn(t){var e=t.pos1,r=t.pos2,n=t.pos3,a=t.pos4;if(!(e&&r&&n&&a))return null;var i=(0,l.i$)([e,r,n,a]),s=[i.minX,i.minY],u=(0,o.h9)(t.origin,s);return e=(0,o.h9)(e,s),r=(0,o.h9)(r,s),n=(0,o.h9)(n,s),a=(0,o.h9)(a,s),b(b({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:r,pos3:n,pos4:a,origin:u,beforeOrigin:u,isPersisted:!0})}var An=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=b({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Tn(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new h.Z,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._observer=null,e._observerId=0,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():((0,i.Wx)(e._observerId),e._observerId=(0,i.U7)((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}m(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.getState(),r=t.parentPosition,n=t.className,i=t.target,o=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled,c=t.portalContainer,p=t.groupable,d=t.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=r||[0,0],g=h[0],v=h[1],m=e.left,x=e.top,E=e.target,S=e.direction,D=e.hasFixed,M=e.offsetDelta,R=t.targets,C=this.isDragging(),y={};this.getEnabledAbles().forEach((function(t){y["data-able-".concat(t.name.toLowerCase())]=!0}));var P=this._getAbleClassName(),z=R&&R.length&&(E||p)||i||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,G=[m-g,x-v];!p&&t.useAccuratePosition&&(G[0]+=M[0],G[1]+=M[1]);var w={position:D?"fixed":"absolute",display:z?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(G[0],"px, ").concat(G[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return d&&(w["--moveable-line-padding"]=d),f.createElement(l,b({cspNonce:s,ref:(0,a.iH)(this,"controlBox"),className:"".concat(dt("control-box",-1===S?"reverse":"",C?"dragging":"")," ").concat(P," ").concat(n)},y,{onClick:this._onPreventClick,portalContainer:c,style:w}),this.renderAbles(),this._renderLines())},r.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,r=t.container,n=t.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),r||e||n||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},r.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},r.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),this._viewContainer&&this._changeAbleViewClassNames([]),Lt(this,"targetGesto"),Lt(this,"controlGesto");var t=this.events;for(var e in t){var r=t[e];r&&r.destroy()}},r.getTargets=function(){var t=this.props.target;return t?[t]:[]},r.getAble=function(t){var e=this.props.ables||[];return(0,i.sE)(e,(function(e){return e.name===t}))},r.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(z)>-1},r.dragStart=function(t){var e=this.targetGesto,r=this.controlGesto;return e&&Rn(this)({inputEvent:t})?e.isFlag()||e.triggerDragStart(t):r&&this.isMoveableElement(t.target)&&(r.isFlag()||r.triggerDragStart(t)),this},r.hitTest=function(t){var e,r=this.state,n=r.target,a=r.pos1,i=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;if(!n)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=b({width:0,height:0},t);var f=e.left,p=e.top,d=e.width,h=e.height,g=(0,l.aD)([a,i,s,o],u),v=(0,l.IW)(g,[[f,p],[f+d,p],[f+d,p+h],[f,p+h]]),m=(0,l.tB)(g);return v&&m?Math.min(100,v/m*100):0},r.isInside=function(t,e){var r=this.state,n=r.target,a=r.pos1,i=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;return!!n&&(0,l.V0)([t,e],(0,l.aD)([a,i,s,o],u))},r.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,a=n.parentMoveable,i=this.state.target||this.props.target,o=this.getContainer(),s=a?a._rootContainer:this._rootContainer,u=Tn(this.controlBox&&this.controlBox.getElement(),i,o,o,s||o,this._getRequestStyles());if(!i&&this._hasFirstTarget&&n.persistData){var l=Bn(n.persistData);for(var c in l)u[c]=l[c]}this.updateState(u,!a&&r)},r.isDragging=function(t){var e,r,n=this.targetGesto,a=this.controlGesto;return(null==n?void 0:n.isFlag())?!t||!!(null===(e=n.getEventData()[t])||void 0===e?void 0:e.isEventStart):!(!(null==a?void 0:a.isFlag())||t&&!(null===(r=a.getEventData()[t])||void 0===r?void 0:r.isEventStart))},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=Yt(this.state),r=e[0],n=e[1],a=e[2],i=e[3],s=Ot(e),u=t.width,l=t.height,c=s.width,f=s.height,p=s.left,d=s.top,h=[t.left,t.top],g=(0,o.PD)(h,t.origin);return{width:c,height:f,left:p,top:d,pos1:r,pos2:n,pos3:a,pos4:i,offsetWidth:u,offsetHeight:l,beforeOrigin:(0,o.PD)(h,t.beforeOrigin),origin:g,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.stopDrag=function(t){var e,r;t&&"target"!==t||null===(e=this.targetGesto)||void 0===e||e.stop(),t&&"control"!==t||null===(r=this.controlGesto)||void 0===r||r.stop()},r.getRotation=function(){var t,e,r,n,a=this.state;return t=a.pos1,e=a.pos2,r=a.direction,n=(0,i.jv)(t,e)/Math.PI*180,(n=r>=0?n:180-n)>=0?n:360+n},r.request=function(t,e,r){void 0===e&&(e={});var n=this.props,a=n.ables,i=n.groupable,o=a.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=o.request(this),l=r||e.isInstant,c=u.isControl?"controlAbles":"targetAbles",f="".concat(i?"Group":"").concat(u.isControl?"Control":""),p={request:function(e){return Mn(s,c,"drag",f,"",b(b({},u.request(e)),{requestAble:t,isRequest:!0}),l),this},requestEnd:function(){return Mn(s,c,"drag",f,"End",b(b({},u.requestEnd()),{requestAble:t,isRequest:!0}),l),this}};return Mn(s,c,"drag",f,"Start",b(b({},u.requestStart(e)),{requestAble:t,isRequest:!0}),l),l?p.request(e).requestEnd():p},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t,e=this.getState(),r=this.props,n=e.originalBeforeOrigin,a=e.transformOrigin,i=e.allMatrix,s=e.is3d,u=e.pos1,l=e.pos2,c=e.pos3,f=e.pos4,p=e.left,d=e.top,h=e.isPersisted,g=r.padding||{},v=g.left,m=void 0===v?0:v,b=g.top,x=void 0===b?0:b,E=g.bottom,S=void 0===E?0:E,D=g.right,M=void 0===D?0:D,R=s?4:3;t=h?a:this.controlBox&&r.groupable?n:(0,o.PD)(n,[p,d]),e.renderPoses=[(0,o.PD)(u,se(i,[-m,-x],a,t,R)),(0,o.PD)(l,se(i,[M,-x],a,t,R)),(0,o.PD)(c,se(i,[-m,S],a,t,R)),(0,o.PD)(f,se(i,[M,S],a,t,R))]},r.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,a=this.state,i=a.target,o=a.container;if(i||e){this.updateAbles();var s=!ee(i,e);if(s||!ee(o,r)){var u=r||this.controlBox;u&&this.unsetAbles(),this.updateState({target:e,container:r}),!n&&u&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},r.waitToChangeTarget=function(){return new Promise((function(){}))},r.triggerEvent=function(t,e){this._emitter.trigger(t,e);var r=this.props[t];return r&&r(e)},r.useCSS=function(t,e){var r=this.props.customStyledMap,n=t+e;return r[n]||(r[n]=(0,d.ZP)(t,e)),r[n]},r.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var r=this.controlBox,n=e.persistData,a=e.firstRenderState;if(a&&!r)return a;if(!this._hasFirstTarget&&n){var i=Bn(n);if(i)return this.updateState(i,!1),this.state}return this.state.isPersisted=!1,this.state},r.updateSelectors=function(){},r.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props.triggerAblesSimultaneously,n=this.getEnabledAbles(t),a="drag".concat(e,"Start"),i="pinch".concat(e,"Start"),o="drag".concat(e,"ControlStart"),s=te(n,[a,i],r),u=te(n,[o],r);this.enabledAbles=n,this.targetAbles=s,this.controlAbles=u},r.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var r=this.state;for(var n in t)r[n]=t[n]}},r.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter((function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}))},r.renderAbles=function(){var t,e,r,n,a=this,i=this.props.triggerAblesSimultaneously,o={createElement:f.createElement};return this.renderState={},(t=ne(te(this.getEnabledAbles(),["render"],i).map((function(t){return(0,t.render)(a,o)||[]}))).filter((function(t){return t})),e=function(t){return t.key},r=[],n={},t.forEach((function(t,a){var i=e(t),o=n[i];o||(o=[],n[i]=o,r.push(o)),o.push(t)})),r).map((function(t){return t[0]}))},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r._getRequestStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var r,n,a=null!==(n=null===(r=e.requestStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return x(x([],t,!0),a,!0)}),[])},r._updateObserver=function(t){var e,r=this.props,n=r.target;if(window.ResizeObserver&&n&&r.useResizeObserver){if(t.target!==n||!this._observer){var a=new ResizeObserver(this.checkUpdateRect);a.observe(n,{box:"border-box"}),this._observer=a}}else null===(e=this._observer)||void 0===e||e.disconnect()},r._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,r=this.controlAbles.length,n=this.props,a=n.dragTarget||n.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(Lt(this,"targetGesto"),this.updateState({gesto:null})),r||Lt(this,"controlGesto"),a&&e&&!this.targetGesto&&(this.targetGesto=Cn(this,a,"")),!this.controlGesto&&r&&(this.controlGesto=yn(this,t,"controlAbles","Control"))},r._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},r._renderLines=function(){var t=this.props,e=t.zoom,r=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,a=t.parentMoveable;if(r||a&&n)return[];var i=this.getState().renderPoses,o={createElement:f.createElement};return[[0,1],[1,3],[3,2],[2,0]].map((function(t,r){var n=t[0],a=t[1];return Er(o,"",i[n],i[a],e,"render-line-".concat(r))}))},r._isTargetChanged=function(t){var e=this.props,r=e.dragTarget||e.target,n=this._prevTarget,a=this._prevDragArea,i=e.dragArea;return!i&&n!==r||(t||i)&&a!==i},r._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,r=this.events,n=(0,i.RR)(r);if(this._isTargetChanged())for(var a in r){var o=r[a];o&&o.destroy(),r[a]=null}if(e){var s=this.enabledAbles;n.forEach((function(n){var a=te(s,[n]),i=a.length>0,o=r[n];i?(o||(o=new Pn(e,t,n),r[n]=o),o.setAbles(a)):o&&(o.destroy(),r[n]=null)}))}},r._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=de(t,!0))},r._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=de(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(x(x([],this._getAbleViewClassNames(),!0),[this.isDragging()?Xr:""],!1))},r._changeAbleViewClassNames=function(t){var e=this._viewContainer,r=re(t.filter(Boolean),(function(t){return t})).map((function(t){return t[0]})),n=this._viewClassNames,a=(0,g.H)(n,r),o=a.removed,s=a.added;o.forEach((function(t){(0,i.IV)(e,n[t])})),s.forEach((function(t){(0,i.cn)(e,r[t])})),this._viewClassNames=r},r._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map((function(e){var r;return(null===(r=e.viewClassName)||void 0===r?void 0:r.call(e,t))||""})).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var r=this.getEnabledAbles(),n=this.targetGesto,a=this.controlGesto,i=(null==n?void 0:n.isFlag())?n.getEventData():{},o=(null==a?void 0:a.isFlag())?a.getEventData():{};return r.map((function(r){var n,a,s,u=r.name,l=(null===(n=r.className)||void 0===n?void 0:n.call(r,e))||"";return((null===(a=i[u])||void 0===a?void 0:a.isEventStart)||(null===(s=o[u])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(dt("".concat(u).concat(t,"-dragging")))),l.trim()})).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:ht,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(f.PureComponent),kn={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var r,n=t.props,i=n.targets||[];t.moveables=[];var s=t.getState(),u=s.left,l=s.top,c=s.isPersisted,f=[u,l],p=n.zoom||1,d=t.renderGroupRects,h=(null===(r=n.persistData)||void 0===r?void 0:r.children)||[];return c?i=h.map((function(){return null})):h=[],x(x([],i.map((function(r,i){return e.createElement(An,{key:"moveable"+i,ref:(0,a.xL)(t,"moveables",i),target:r,origin:!1,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:f,persistData:h[i],zoom:p})})),!0),ne(d.map((function(t,r){var n=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,a){var i=t[0],s=t[1];return Er(e,"",(0,o.h9)(n[i],f),(0,o.h9)(n[s],f),p,"group-rect-".concat(r,"-").concat(a))}))}))),!0)}},In=E("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,a=e.inputTarget,i=!t.isMoveableElement(a)&&t.controlBox.getElement().contains(a);if(n&&a&&!e.isDrag&&!t.isMoveableElement(a)&&!i){var o=r.contains(a);Qt(t,"onClick",Kt(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:r===a,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(r&&n&&!e.isDrag&&!t.isMoveableElement(n)&&e.datas.inputTarget!==n){var a=t.props.targets,o=a.indexOf(n),s=o>-1,u=!1;-1===o&&(u=(o=(0,i.cx)(a,(function(t){return t.contains(n)})))>-1),Qt(t,"onClickGroup",Kt(t,e,{isDouble:e.isDouble,targets:a,inputTarget:n,targetIndex:o,isTarget:s,containsTarget:u,moveableTarget:a[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Nn(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),b(b({},t),{datas:e})}var _n=E("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?Sr(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,n=t.props,a=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!n.edgeDraggable||!a)&&!n.draggable&&(0,i.pv)(a,dt("direction"))&&(0,i.pv)(a,dt("edge"))&&(0,i.pv)(a,dt("edgeDraggable"))},dragStart:function(t,e){return Rr.dragStart(t,Nn(e))},drag:function(t,e){return Rr.drag(t,Nn(e))},dragEnd:function(t,e){return Rr.dragEnd(t,Nn(e))},dragGroupCondition:function(t,e){var r,n=t.props,a=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!n.edgeDraggable||!a)&&!n.draggable&&(0,i.pv)(a,dt("direction"))&&(0,i.pv)(a,dt("line"))},dragGroupStart:function(t,e){return Rr.dragGroupStart(t,Nn(e))},dragGroup:function(t,e){return Rr.dragGroup(t,Nn(e))},dragGroupEnd:function(t,e){return Rr.dragGroupEnd(t,Nn(e))},unset:function(t){return Rr.unset(t)}}),Fn={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Wn=[Sn,Zr,mr,Se,Rr,_n,yr,Nr,Wr,kr,Jr,Qr,Ur,vn,gn,En,kn,Fn,In,Vr,Dn],Hn=Wn.reduce((function(t,e){return b(b({},t),"events"in e?e.events:{})}),{}),jn=Wn.reduce((function(t,e){return b(b({},t),e.props)}),{}),qn=pe(Hn),Xn=Object.keys(qn),Yn=Object.keys(jn);function Ln(t,e){var r=t[0],n=t[1],a=t[2];return(r*e[0]+n*e[1]+a)/Math.sqrt(r*r+n*n)}function Vn(t,e){var r=t[0],n=t[1];return-r*e[0]-n*e[1]}function Un(t,e){return Math.max.apply(Math,t.map((function(t){var r=t[0],n=t[1],a=t[2],i=t[3];return Math.max(r[e],n[e],a[e],i[e])})))}function Kn(t,e){return Math.min.apply(Math,t.map((function(t){var r=t[0],n=t[1],a=t[2],i=t[3];return Math.min(r[e],n[e],a[e],i[e])})))}function Jn(t,e){var r=e.map((function(e){if((0,i.kJ)(e)){var r=Jn(t,e),n=r.length;return n>1?r:1===n?r[0]:null}var a=(0,i.sE)(t,(function(t){return t.manager.props.target===e}));return a?(a.finded=!0,a.manager):null})).filter(Boolean);return 1===r.length&&(0,i.kJ)(r[0])?r[0]:r}var Zn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new u.Z,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}m(e,t);var r=e.prototype;return r.componentDidMount=function(){t.prototype.componentDidMount.call(this)},r.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.getTargets=function(){return this.props.targets},r.updateRect=function(t,e,r){var n;void 0===r&&(r=!0);var a=this.state;if(this.controlBox&&!a.isPersisted){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var s=this.props,u=this.moveables,c=a.target||s.target,f=u.map((function(t){return{finded:!1,manager:t}})),p=this.props.targetGroups||[],d=Jn(f,p);d.push.apply(d,f.filter((function(t){return!t.finded})).map((function(t){return t.manager})));var h=[],g=!e||""!==t&&s.updateGroup,v=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=null===(n=this.props.persistData)||void 0===n?void 0:n.rotation;null!=m&&(v=m)}var x=function t(e,r,n){var a,o=e.map((function(e){if((0,i.kJ)(e)){var n=t(e,r),a=[n.pos1,n.pos2,n.pos3,n.pos4];return h.push(n),{poses:a,rotation:n.rotation}}return{poses:Yt(e.state),rotation:e.getRotation()}})),s=o.map((function(t){return t.rotation})),u=s[0],c=s.every((function(t){return Math.abs(u-t)<.1}));a=g?c?u:v:!n&&c?u:r;var f=o.map((function(t){return t.poses})),p=function(t,e){var r,n=[0,0],a=[0,0],o=[0,0],s=[0,0],u=0,c=0;if(!t.length)return{pos1:n,pos2:a,pos3:o,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var f=(0,i.P2)(e,T);if(f%90){var p=f/180*Math.PI,d=Math.tan(p),h=-1/d,g=[A,k],v=[[0,0],[0,0]],m=[A,k],b=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=Ln([-d,1,0],t),r=Ln([-h,1,0],t);g[0]>e&&(v[0]=t,g[0]=e),g[1]<e&&(v[1]=t,g[1]=e),m[0]>r&&(b[0]=t,m[0]=r),m[1]<r&&(b[1]=t,m[1]=r)}))}));var x=v[0],E=v[1],S=b[0],D=b[1],M=[-d,1,Vn([-d,1],x)],R=[-d,1,Vn([-d,1],E)],C=[-h,1,Vn([-h,1],S)],y=[-h,1,Vn([-h,1],D)];n=(r=[[M,C],[M,y],[R,C],[R,y]].map((function(t){var e=t[0],r=t[1];return(0,l.jv)(e,r)[0]})))[0],a=r[1],o=r[2],s=r[3],u=m[1]-m[0],c=g[1]-g[0]}else{var P,z=Kn(t,0),O=Kn(t,1),G=Un(t,0),w=Un(t,1);n=[z,O],a=[G,O],o=[z,w],s=[G,w],u=G-z,c=w-O,f%180&&(n=(P=[o,n,s,a])[0],a=P[1],o=P[2],s=P[3],u=w-O,c=G-z)}f%360>180&&(n=(P=[s,o,a,n])[0],a=P[1],o=P[2],s=P[3]);var B=(0,l.i$)([n,a,o,s]);return{pos1:n,pos2:a,pos3:o,pos4:s,width:u,height:c,minX:B.minX,minY:B.minY,maxX:B.maxX,maxY:B.maxY,rotation:e}}(f,a);return p}(d,this.rotation,!0);g&&(this.rotation=x.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=p,this.renderGroupRects=h;var E,S,D,M,R,C=this.transformOrigin,y=this.rotation,P=this.scale,z=x.width,O=x.height,G=x.minX,w=x.minY,B=(E=[[0,0],[z,0],[0,O],[z,O]],S=xe(C,z,O),D=this.rotation/180*Math.PI,M=E.map((function(t){return(0,o.h9)(t,S)})),R=M.map((function(t){return(0,o.U1)(t,D)})),{prev:M,next:R,result:R.map((function(t){return(0,o.PD)(t,S)}))}),I=(0,l.i$)(B.result),N=I.minX,_=I.minY,F=" rotate(".concat(y,"deg)")+" scale(".concat(P[0]>=0?1:-1,", ").concat(P[1]>=0?1:-1,")"),W="translate(".concat(-N,"px, ").concat(-_,"px)").concat(F);this.controlBox.getElement().style.transform="translate3d(".concat(G,"px, ").concat(w,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(C,";")+"width:".concat(z,"px;height:").concat(O,"px;")+"transform: ".concat(W),a.width=z,a.height=O;var H=this.getContainer(),j=Tn(this.controlBox.getElement(),c,this.controlBox.getElement(),this.getContainer(),this._rootContainer||H,[]),q=[j.left,j.top],X=Yt(j),Y=X[0],L=X[1],V=X[2],U=X[3],K=(0,l.i$)([Y,L,V,U]),J=[K.minX,K.minY],Z=P[0]*P[1]>0?1:-1;j.pos1=(0,o.h9)(Y,J),j.pos2=(0,o.h9)(L,J),j.pos3=(0,o.h9)(V,J),j.pos4=(0,o.h9)(U,J),j.left=G-j.left+J[0],j.top=w-j.top+J[1],j.origin=(0,o.h9)((0,o.PD)(q,j.origin),J),j.beforeOrigin=(0,o.h9)((0,o.PD)(q,j.beforeOrigin),J),j.originalBeforeOrigin=(0,o.PD)(q,j.originalBeforeOrigin),j.transformOrigin=(0,o.h9)((0,o.PD)(q,j.transformOrigin),J),c.style.transform="translate(".concat(-N-J[0],"px, ").concat(-_-J[1],"px)")+F,this.updateState(b(b({},j),{posDelta:J,direction:Z,beforeDirection:Z}),r)}},r.getRect=function(){return b(b({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.triggerEvent=function(e,r,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},r.updateAbles=function(){t.prototype.updateAbles.call(this,x(x([],this.props.ables,!0),[kn],!1),"Group")},r._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},r._updateEvents=function(){var t=this.state,e=this.props,r=this._prevTarget,n=e.dragTarget||this.areaElement;r!==n&&(Lt(this,"targetGesto"),Lt(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Cn(this,n,"Group")),this.controlGesto||(this.controlGesto=yn(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var a=!ee(t.container,e.container);a&&(t.container=e.container);var i=e.targets,o=this.differ.update(i),s=o.added,u=o.changed,l=o.removed,c=s.length||l.length;(a||c||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||u.length||i.length&&!Ee(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},r._updateObserver=function(){},e.defaultProps=b(b({},An.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(An),Qn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}m(e,t);var r=e.prototype;return r.render=function(){var t,e=this,r=this.props,n=r.cspNonce,i=r.cssStyled,o=r.persistData,s=r.targets||[],u=s.length,l=this.isUnmounted||!u,c=null!==(t=null==o?void 0:o.children)&&void 0!==t?t:[];return l&&!u&&c.length?s=c.map((function(){return null})):l||(c=[]),f.createElement(i,{cspNonce:n,ref:(0,a.iH)(this,"controlBox"),className:dt("control-box")},s.map((function(t,r){return f.createElement(An,b({key:"moveable"+r,ref:(0,a.xL)(e,"moveables",r)},e.props,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[r]}))})))},r.componentDidUpdate=function(){},r.getTargets=function(){return this.props.targets},r.updateRect=function(t,e,r){void 0===r&&(r=!0),this.moveables.forEach((function(n){n.updateRect(t,e,r)}))},r.getRect=function(){return b(b({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},r._updateEvents=function(){},r._updateObserver=function(){},e}(An);function $n(t,e){var r=[];return t.forEach((function(t){t&&((0,i.HD)(t)?e[t]&&r.push.apply(r,e[t]):(0,i.kJ)(t)?r.push.apply(r,$n(t,e)):r.push(t))})),r}function ta(t,e){var r=[];return t.forEach((function(t){t&&((0,i.HD)(t)?e[t]&&r.push.apply(r,e[t]):(0,i.kJ)(t)?r.push(ta(t,e)):r.push(t))})),r}function ea(t,e){return t.length!==e.length||t.some((function(t,r){var n=e[r];return!(!t&&!n)&&t!=n&&(!(0,i.kJ)(t)||!(0,i.kJ)(n)||ea(t,n))}))}var ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new u.Z,e._elementTargets=[],e._onChangeTargets=null,e}m(e,t);var r=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var r=e.css;r&&r.forEach((function(e){t[e]=!0}))}));var e=(0,i.RR)(t).join("\n");this.defaultStyled=(0,d.ZP)("div",(0,a.$i)(z,O+e))},e.getTotalAbles=function(){return x([Zr,kn,Fn,Vr],this.defaultAbles,!0)},r.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,n=r.ables,o=r.props,s=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]])}return r}(r,["ables","props"]),u=this._updateRefs(!0),l=$n(u,this.selectorMap),c=l.length>1,p=x(x([],e.getTotalAbles(),!0),n||[],!0),d=b(b(b({},s),o||{}),{ables:p,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=l;var h=null,g=this.moveable,v=s.persistData;if((null==v?void 0:v.children)&&(c=!0),c){if(s.individualGroupable)return f.createElement(Qn,b({key:"individual-group",ref:(0,a.iH)(this,"moveable")},d,{target:null,targets:l}));var m=ta(u,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var E=g.props.target;E&&l.indexOf(E)>-1&&(h=b({},g.state))}return f.createElement(Zn,b({key:"group",ref:(0,a.iH)(this,"moveable")},d,null!==(t=s.groupableProps)&&void 0!==t?t:{},{target:null,targets:l,targetGroups:m,firstRenderState:h}))}var S=l[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var D=g.moveables||[],M=(0,i.sE)(D,(function(t){return t.props.target===S}));M&&(h=b({},M.state))}return f.createElement(An,b({key:"single",ref:(0,a.iH)(this,"moveable")},d,{target:S,firstRenderState:h}))},r.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},r.componentDidUpdate=function(){this._checkChangeTargets()},r.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},r.updateSelectors=function(){this.selectorMap={},this._updateRefs()},r.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise((function(e){t=e}))},r.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.getManager=function(){return this.moveable},r._updateRefs=function(t){var e=this.refTargets,r=he(this.props.target||this.props.targets),n="undefined"!=typeof document,a=ea(e,r),o=this.selectorMap,s={};return this.refTargets.forEach((function t(e){(0,i.HD)(e)?o[e]?s[e]=o[e]:n&&(a=!0,s[e]=[].slice.call(document.querySelectorAll(e))):(0,i.kJ)(e)&&e.forEach(t)})),this.refTargets=r,this.selectorMap=s,!t&&a&&this.forceUpdate(),r},r._checkChangeTargets=function(){var t,e,r,n=this._differ.update(this._elementTargets),a=n.added,i=n.removed;(a.length||i.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(r=this._onChangeTargets)||void 0===r||r.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,r,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);i>3&&o&&Object.defineProperty(e,r,o)}([(0,a.qE)(H)],e.prototype,"moveable",void 0),e}(f.PureComponent),na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.defaultAbles=Wn,e}(ra);function aa(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(ra),e.defaultAbles=t,e}}}]);