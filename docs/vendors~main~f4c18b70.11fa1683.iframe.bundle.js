(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{49:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return y}));var n=r(0),o=r.n(n),a=r(3),i=r.n(a),c=r(260);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=o.a.createContext({}),f=d.Provider,m=function(e){var t=e.children,r=s(Object(n.useState)(void 0),2),a=r[0],i=r[1],c=s(Object(n.useState)([]),2),l=c[0],p=c[1],d=Object(n.useRef)([]),m=Object(n.useRef)({}),g=s(Object(n.useState)({}),2);g[0];var h=g[1],y=Object(n.useRef)({}),v={map:a,setMap:function(e){if(i(e),0===l.length){p([].concat(u(l),["anonymous_map"])),m.current.anonymous_map=e}},maps:m.current,mapIds:l,registerMap:function(e,t){e&&t&&(m.current[e]=t,d.current.push(e),p(u(d.current)),a||i(t))},removeMap:function e(t){if(t){void 0!==m.current[t]&&delete m.current[t];var r=d.current.indexOf(t);r>-1&&d.current.splice(r,1),p(u(d.current)),1===l.length&&a&&i(void 0)}else i(void 0),e("anonymous_map")},mapExists:function(e){return(!e||-1!==Object.keys(m.current).indexOf(e))&&!(!e&&!a)},getMap:function(e){return e&&-1!==l.indexOf(e)?m.current[e]:!e&&a?a:null},setMapStates:h,mapStatesRef:y};return o.a.createElement(f,{value:v},t)};m.propTypes={children:i.a.node.isRequired};var g=o.a.createContext({}),h=g.Provider,y=function(e){var t=s(Object(n.useState)(null),2),r=t[0],a=t[1];Object(n.useEffect)((function(){if(e.url){var t=null;"json"===e.format?t=c.c(e.url):"csv"===e.format?t=c.a(e.url):"xml"===e.format&&(t=c.e(e.url)),t&&t.then((function(t){if("xml"===e.format){if(e.nodeType){var r=[];t.querySelectorAll(e.nodeType).forEach((function(t){r.push(e.formatData(t))})),a(r)}}else e.data_property&&(t=t[e.data_property]),"function"==typeof e.formatData?a(t.map(e.formatData)):a(t);"function"==typeof e.onData&&e.onData()}))}}),[e.url,e]);var i={data:r,setData:a};return o.a.createElement(h,{value:i},e.children)};y.propTypes={children:i.a.node.isRequired}},89:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return Ot})),r.d(t,"b",(function(){return Y})),r.d(t,"c",(function(){return vt})),r.d(t,"d",(function(){return te})),r.d(t,"e",(function(){return jt})),r.d(t,"f",(function(){return bt})),r.d(t,"g",(function(){return Et})),r.d(t,"h",(function(){return Oe})),r.d(t,"i",(function(){return $}));var n=r(0),o=r.n(n),a=r(3),i=r.n(a),c=r(49),s=r(378),u=r.n(s),l=(r(1339),r(234)),p=r(295),d=r(608),f=r.n(d),m=r(52),g=r(833),h=r(837),y=r.n(h),v=(r(1403),r(838),r(839),r(333)),b=r(341),x=r(883),C=(r(792),r(336),r(462)),w=r.n(C),j=r(463),O=r.n(j),E=r(602),S=r.n(E),H=r(1404),I=r(886),k=r(1395),L=r(889),M=r(841),P=r.n(M),F=r(840),A=r.n(F),T=r(1405),R=r(1397),U=r(1406),B=r(603);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=["lng","lat"],X=function(e){var t=this,r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[]},this.wrapper={on:function(e,t,n,o){if(r.eventHandlers[e]){"string"==typeof n&&(o=n,n={}),r.eventHandlers[e].push({handler:t,options:n});var a=[e,t];o&&"string"==typeof o&&(r.initRegisteredElements(o),r.registeredElements[o].wrapperEvents.push(a))}},off:function(e,t){r.eventHandlers[e]&&(r.eventHandlers[e]=r.eventHandlers[e].filter((function(e){return!Object.is(e.handler,t)&&e})))},fire:function(e,t){if(r.eventHandlers[e]){var n=t||window,o=new Event(e);o.data=r,r.eventHandlers[e].forEach((function(e){e.handler.call(n,o)}))}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(e){return{id:e.id,type:e.type,visible:"none"!==e.visibility,baseLayer:-1!==r.baseLayers.indexOf(e.id)}},buildLayerObjects:function(){return r.style._order.map((function(e){return r.wrapper.buildLayerObject(r.map.style._layers[e])})).filter((function(e){return e}))},refreshLayerState:function(){r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return"function"==typeof r.map.getCenter?{center:function(e){var t=e.lng,r=e.lat;W(e,Q);return{lng:t,lat:r}}(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{}},refreshViewport:function(){r.wrapper.viewportState=r.wrapper.getViewport()}},this.initRegisteredElements=function(e,t){(void 0===r.registeredElements[e]||"undefined"!==t&&t)&&(r.registeredElements[e]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(e,t,n){r.map.style&&(n&&"string"==typeof n&&void 0!==e.id&&(r.initRegisteredElements(n),r.registeredElements[n].layers.push(e.id),"object"===D(e.source)&&r.registeredElements[n].sources.push(e.id)),r.map.addLayer(e,t))},this.addSource=function(e,t,n,o){if(r.map.style){if("string"==typeof n&&void 0===o)return r.addSource.call(r,e,t,void 0,n);o&&"string"==typeof o&&void 0!==e&&(r.initRegisteredElements(o),r.registeredElements[o].sources.push(e)),r.map.addSource(e,t,n)}},this.addImage=function(e,t,n,o){if(r.map.style){if("string"==typeof n&&void 0===o)return r.addImage.call(r,e,t,void 0,n);o&&"string"==typeof o&&void 0!==e&&(r.initRegisteredElements(o),r.registeredElements[o].images.push(e)),r.map.addImage(e,t,n)}},this.on=function(e,t,n,o){var a;if("string"==typeof n&&"function"==typeof t)return r.on.call(r,e,void 0,t,n);var i=[e,t,n];t||(i=[e,n]),o&&"string"==typeof o&&(r.initRegisteredElements(o),r.registeredElements[o].events.push(i)),(a=r.map).on.apply(a,q(i))},this.addControl=function(e,t,n){n&&"string"==typeof n&&(r.initRegisteredElements(n),r.registeredElements[n].controls.push(e)),r.map.addControl(e,t)},this.cleanup=function(e){r.map.style&&void 0!==r.registeredElements[e]&&(r.registeredElements[e].layers.forEach((function(e){r.map.style.getLayer(e)&&r.map.style.removeLayer(e)})),r.registeredElements[e].sources.forEach((function(e){r.map.style.getSource(e)&&r.map.style.removeSource(e)})),r.registeredElements[e].images.forEach((function(e){r.map.hasImage(e)&&r.map.style.removeImage(e)})),r.registeredElements[e].events.forEach((function(e){var t;(t=r.map).off.apply(t,q(e))})),r.registeredElements[e].controls.forEach((function(e){r.map.removeControl(e)})),r.registeredElements[e].wrapperEvents.forEach((function(e){var t;(t=r.wrapper).off.apply(t,q(e))})),r.initRegisteredElements(e,!0))};["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach((function(e){t[e]=function(){var n;r.map&&t.map.style&&"function"==typeof r.map.style[e]&&(n=r.map.style)[e].apply(n,arguments);return r.map._update?r.map._update(!0):void 0}}));["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach((function(e){t[e]=function(){var t;return!(!r.map||!r.map.style)&&(t=r.map.style)[e].apply(t,arguments)}})),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(t.map)).forEach((function(e){void 0===t[e]&&(t[e]=function(){var t;return(t=r.map)[e].apply(t,arguments)})})),Object.keys(t.map).forEach((function(e){void 0===t[e]&&(t[e]=r.map[e])}))};["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach((function(e){t[e]=function(){if("function"==typeof r.map[e]){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=r.map[e]).call.apply(t,[r.map].concat(o))}}})),function(){var t,n=(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e.mapOptions.style||-1!==e.mapOptions.style.indexOf("mapbox://")){t.next=3;break}return t.next=3,fetch(e.mapOptions.style).then((function(e){if(e.ok)return e.json();throw new Error("error loading map style.json")})).then((function(t){t.layers.forEach((function(e){r.baseLayers.push(e.id),r.firstSymbolLayer||"symbol"!==e.type||(r.firstSymbolLayer=e.id)})),r.styleJson=t,e.mapOptions.style=t})).catch((function(e){console.log(e)}));case 3:r.map=new u.a.Map(e.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",(function(){r.addNativeMaplibreFunctionsAndProps()})),r.map.on("move",(function(){r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")})),r.map.on("idle",(function(){r.wrapper.refreshLayerState()})),r.map.on("data",(function(){r.wrapper.refreshLayerState()})),"function"==typeof e.onReady&&e.onReady(r.map,r);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){N(a,n,o,i,c,"next",e)}function c(e){N(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}()()},Y=function(e){var t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useContext)(c.b),i=Object(n.useRef)(a),s=Object(n.useRef)(e.mapId),u=e.options;return Object(n.useEffect)((function(){var e=s.current,r=i.current;return function(){var n,o;r.removeMap(e),null===(n=t.current)||void 0===n||null===(o=n.remove)||void 0===o||o.call(n),t.current=null}}),[]),Object(n.useEffect)((function(){r.current&&(t.current=new X({mapOptions:z({container:r.current},u),onReady:function(t,r){t.once("load",(function(){e.mapId?a.registerMap(e.mapId,r):a.setMap(r)})),window.map=r}}))}),[r]),o.a.createElement("div",{ref:r,className:"mapContainer"})};function K(e){var t=Object(n.useContext)(c.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),a=V(Object(n.useState)(void 0),2),i=a[0],s=a[1],u=Object(n.useRef)(void 0),p=V(Object(n.useState)(void 0),2),d=p[0],f=p[1],m=Object(n.useRef)(void 0),g=Object(n.useRef)(Object(l.a)()),h=Object(n.useCallback)((function(t){var r,n;return!((null==e||null===(r=e.filter)||void 0===r||!r.includeBaseLayers)&&t.baseLayer)&&(void 0===(null===(n=e.filter)||void 0===n?void 0:n.matchLayerIds)||(e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(t.id):t.id.includes(e.filter.matchLayerIds)))}),[e.filter]),y=Object(n.useCallback)((function(){var e=o.current.wrapper.layerState.filter(h),t=JSON.stringify(e);m.current!==t&&(m.current=t,f(e))}),[h]);return Object(n.useEffect)((function(){var e=g.current;return function(){o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}}),[]),Object(n.useEffect)((function(){var n,a,i,c;t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),null!=e&&null!==(n=e.watch)&&void 0!==n&&n.viewport&&(s(o.current.wrapper.viewportState),o.current.wrapper.on("viewportchange",(function(){var e,t;u.current!==(null===(e=o.current)||void 0===e?void 0:e.wrapper.viewportStateString)&&s(null===(t=o.current)||void 0===t?void 0:t.wrapper.viewportState)}),g.current)),null!=e&&null!==(a=e.watch)&&void 0!==a&&a.layers&&(y(),o.current.wrapper.on("layerchange",y,{includeBaseLayers:null==e||null===(i=e.filter)||void 0===i?void 0:i.includeBaseLayers,matchLayerIds:null==e||null===(c=e.filter)||void 0===c?void 0:c.matchLayerIds},g.current)))}),[t.mapIds,t,e.mapId,y,e]),{layers:d,viewport:i}}function $(e){var t=Object(n.useContext)(c.b),r=K({mapId:e.mapId,watch:{viewport:!1,layers:!!e.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=Object(n.useRef)(!1),a=Object(n.useRef)(void 0),i=Object(n.useRef)(Object(l.a)()),s=V(Object(n.useState)(!1),2),u=s[0],p=s[1];return Object(n.useEffect)((function(){var e=i.current;return function(){a.current&&(a.current.cleanup(e),a.current=void 0),o.current=!1,p(!1)}}),[]),Object(n.useEffect)((function(){if(t.mapExists(e.mapId)&&!o.current){if(e.waitForLayer){var n,i=!1;if(null==r||null===(n=r.layers)||void 0===n||n.forEach((function(t){t.id===e.waitForLayer&&(i=!0)})),!i)return}o.current=!0,a.current=t.getMap(e.mapId),p(!0)}}),[t.mapIds,r.layers,t,e.waitForLayer,e.mapId]),{map:a.current,mapIsReady:u,componentId:i.current,layers:r.layers}}Y.defaultProps={mapId:void 0,options:{lng:8.607,lat:53.1409349,zoom:10,accessToken:"pk.eyJ1IjoibWF4dG9iaSIsImEiOiJjaW1rcWQ5bWMwMDJvd2hrbWZ2ZTBhcnM5In0.NcGt5NmLP5Q1WC7P5u6qUA"}},Y.propTypes={mapId:i.a.string,options:i.a.object},K.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},K.propTypes={mapId:i.a.string,watch:i.a.shape({layers:i.a.bool,sources:i.a.bool,viewport:i.a.bool}),filter:i.a.shape({includeBaseLayers:i.a.bool,matchLayerIds:i.a.oneOfType([i.a.string,i.a.instanceOf(RegExp)]),matchSourceIds:i.a.oneOfType([i.a.string,i.a.instanceOf(RegExp)])})};var ee=function(e){var t=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1);return Object(n.useEffect)((function(){t.mapIsReady&&!r.current&&(r.current=!0,t.map.setCenter([7.132122000552613,50.716405378037706]))}),[t.map,t.mapIsReady,e.mapId]),o.a.createElement(o.a.Fragment,null)};ee.defaultProps={mapId:void 0},ee.propTypes={mapId:i.a.string};var te=function(e){var t=Object(n.useContext)(c.b),r=Object(n.useRef)(null),a=V(Object(n.useState)(!0),2),i=a[0],s=a[1],u=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlFillExtrusionLayer-")+Object(l.a)()),d=Object(n.useRef)(!1),f=Object(n.useRef)(e.layerId||"MlFillExtrusionLayer-"+Object(l.a)());return Object(n.useEffect)((function(){var e=u.current;return function(){r.current&&(r.current.cleanup(e),r.current=void 0),d.current=!1}}),[]),Object(n.useEffect)((function(){if(t.mapExists(e.mapId)&&!d.current){d.current=!0,r.current=t.getMap(e.mapId);var n=void 0;t.map.getLayer("waterway-name")&&(n="waterway-name"),t.map.getLayer("poi_label")&&(n="poi_label"),t.map.addLayer({id:f.current,type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||14,paint:z({},e.paint)},e.insertBeforeLayer||n,u.current)}}),[t,e.insertBeforeLayer,e.mapId,e.minZoom,e.paint,e.sourceId,e.sourceLayer]),Object(n.useEffect)((function(){d.current&&r.current.setLayoutProperty(f.current,"visibility",i?"visible":"none")}),[i,t]),o.a.createElement(p.a,{color:"primary",variant:i?"contained":"outlined",onClick:function(){return s(!i)}},"Composite")};te.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}},te.propTypes={mapId:i.a.string,layerId:i.a.string,idPrefix:i.a.string,paint:i.a.object,sourceId:i.a.string,sourceLayer:i.a.string,minZoom:i.a.number,insertBeforeLayer:i.a.string};var re=function(e,t){switch(e){case"fill":return null!=t&&t.fill?t.fill:{"fill-color":"rgba(10,240,256,0.6)"};case"line":return null!=t&&t.line?t.line:{"line-color":"rgb(203,211,2)","line-width":5};case"circle":default:return null!=t&&t.circle?t.circle:{"circle-color":"rgba(10,240,256)","circle-stroke-color":"#fff","circle-stroke-width":2}}},ne={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},oe=["circle","fill","line"],ae=function(e){var t=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),a=Object(n.useRef)(e.layerId||"MlGeoJsonLayer-"+t.componentId),i=Object(n.useRef)(void 0);Object(n.useEffect)((function(){if(t.map&&r.current)for(var n in e.layout)t.map.setLayoutProperty(a.current,n,e.layout[n])}),[e.layout,t.map,e.mapId]),Object(n.useEffect)((function(){if(t.map&&r.current){var n=e.paint||re(i.current,e.defaultPaintOverrides);for(var o in n)t.map.setPaintProperty(a.current,o,n[o])}}),[e.paint,t.map,e.mapId,e.defaultPaintOverrides]),Object(n.useEffect)((function(){var n;null!=t&&null!==(n=t.map)&&void 0!==n&&n.getSource(a.current)&&r.current&&t.map.getSource(a.current).setData(e.geojson)}),[e.geojson,t.map,e.type]);var c=Object(n.useCallback)((function(){var r=e.geojson;i.current=e.type||function e(t){var r;return"Feature"===(null==t?void 0:t.type)?null!=ne&&ne[null==t||null===(r=t.geometry)||void 0===r?void 0:r.type]?ne[t.geometry.type]:"circle":"FeatureCollection"===(null==t?void 0:t.type)?t.features.length?e(t.features[0]):"circle":void 0}(e.geojson),t.map.addLayer(z({id:a.current,source:{type:"geojson",data:r},type:i.current,paint:e.paint||re(i.current,e.defaultPaintOverrides),layout:e.layout||{}},e.options),e.insertBeforeLayer,t.componentId),void 0!==e.onHover&&t.map.on("mousemove",a.current,e.onHover,t.componentId),void 0!==e.onClick&&t.map.on("click",a.current,e.onClick,t.componentId),void 0!==e.onLeave&&t.map.on("mouseleave",a.current,e.onLeave,t.componentId)}),[t,e]);return Object(n.useEffect)((function(){if(t.map&&e.geojson){if(r.current&&-1!==oe.indexOf(e.type)&&i.current&&e.type!==i.current)t.map.cleanup(t.componentId);else if(r.current&&(-1===oe.indexOf(e.type)||-1!==oe.indexOf(e.type)&&e.type===i.current))return;r.current=!0,c()}}),[t,c,e]),o.a.createElement(o.a.Fragment,null)};ae.propTypes={mapId:i.a.string,type:i.a.string,layout:i.a.object,paint:i.a.object,defaultPaintOverrides:i.a.object,options:i.a.object,geojson:i.a.object,insertBeforeLayer:i.a.string,layerId:i.a.string,onClick:i.a.func,onHover:i.a.func,onLeave:i.a.func};var ie=function(e){var t=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=V(Object(n.useState)(!1),2),a=r[0],i=r[1],c=V(Object(n.useState)(void 0),2),s=c[0],u=c[1],l=V(Object(n.useState)(!1),2),d=l[0],g=l[1],h=V(Object(n.useState)(),2),y=h[0],v=h[1],b=V(Object(n.useState)(0),2),x=b[0],C=b[1],w=Object(n.useCallback)((function(r){if(t.map&&(t.map.flyTo({center:[r.coords.longitude,r.coords.latitude],zoom:18,speed:1,curve:1}),e.showUserLocation)){var n=Object(m.point)([r.coords.longitude,r.coords.latitude]);u(n),v(Object(m.circle)(n,r.coords.accuracy/1e3))}}),[t.map,e]),j=function(e){console.log("Access of user location denied"),g(!0)},O=Object(n.useMemo)((function(){if(s){var e=x-15,t=x+15,r=Object(m.lineArc)(s,.02,e,t,{steps:65});return r.geometry.coordinates.push(s.geometry.coordinates),r.geometry.coordinates.slice(0,0,s.geometry.coordinates),r}}),[x,s]),E=function(e){C(-e.alpha)};return Object(n.useEffect)((function(){if(a){var e=E;return window.addEventListener("deviceorientation",e),function(){window.removeEventListener("deviceorientation",e)}}}),[a]),Object(n.useEffect)((function(){if(t.map&&a){var e=navigator.geolocation.watchPosition(w,j);return function(){navigator.geolocation.clearWatch(e)}}}),[t.map,a,w]),o.a.createElement(o.a.Fragment,null,a&&s&&o.a.createElement(ae,{geojson:y,type:"fill",paint:z({"fill-color":"#cbd300","fill-opacity":.3},e.accuracyPaint),insertBeforeLayer:e.insertBeforeLayer}),a&&O&&o.a.createElement(ae,{geojson:O,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3},insertBeforeLayer:e.insertBeforeLayer}),a&&s&&o.a.createElement(ae,{geojson:s,type:"circle",paint:z({"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1},e.circlePaint),insertBeforeLayer:e.insertBeforeLayer}),o.a.createElement(p.a,{sx:z({zIndex:1002,color:a?e.onColor:e.offColor},e.style),disabled:d,onClick:function(){i(!a)}}," ",o.a.createElement(f.a,{sx:{fontSize:e.style.fontSize}})," "))};ie.defaultProps={mapId:void 0,style:{minWidth:"30px",minHeight:"30px",width:"30px",height:"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:"1.3em",":hover":{backgroundColor:"#515151",color:"#ececec"}},onColor:"#ececec",offColor:"#666",showAccuracyCircle:!0,showUserLocation:!0,showOrientation:!0},ie.propTypes={mapId:i.a.string,style:i.a.object,onColor:i.a.string,offColor:i.a.string,accuracyPaint:i.a.object,circlePaint:i.a.object,showAccuracyCircle:i.a.bool,showUserLocation:i.a.bool,showOrientation:i.a.bool};var ce={street:["footway","street","road","street_name","residential","path","pedestrian","road_reference","road_reference_intl","square","place"],number:["house_number","street_number"],place:["city","village","hamlet","locality","croft","neighbourhood","suburb","city_district","district","quarter","borough","city_block","residential","commercial","industrial","houses","subdivision","allotments","postal_city","town","municipality","local_administrative_area"],zip:["postcode","partial_postcode"],state:["state","province","state_code"]},se=function(e){return 25.4,96/25.4*e+"px"},ue=function(e,t,r){r(!0);var n=window.devicePixelRatio,o=document.createElement("div");o.className="hidden-map",document.body.appendChild(o);var a=document.createElement("div");a.style.width=se(210),a.style.height=se(297),o.appendChild(a);var i=new u.a.Map({container:a,center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1}),c=e.getStyle(),s=function(e){var t=c.sources[e];Object.keys(t).forEach((function(e){t[e]||delete t[e]}))};for(var l in c.sources)s(l);i.setStyle(c),i.once("idle",(function(){var e,a=new g.a({orientation:"p",unit:"mm",compress:!0});Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});var c=(t?function(e){var t=[];for(var r in ce)ce[r].some((function(r){return!!e.hasOwnProperty(r)&&(t.push(e[r]),!0)}));return t.join(", ")}(t.address):"").split(","),s=[];s.length&&c.forEach((function(e){var t=e.match(/.{1,34}/g);s.push.apply(s,q(t))})),a.addImage(i.getCanvas().toDataURL("image/png"),"png",0,0,210,297,null,"FAST"),a.setFillColor("white"),a.rect(138,287,297,10,"F"),a.setFontSize(10),a.text("Datenquelle: © OpenStreetMap-Mitwirkende",140,a.internal.pageSize.height-3),a.setFillColor("white");var u=3.25*s.length+3+3+6.5+4+1;a.rect(2.5,2,66.5,u,"F"),a.setFontSize(10),a.text("Karten PDF:",6,5.5),a.rect(6,7,60,3.25*s.length+4+1),a.setFontSize(10),s.forEach((function(e,t){a.text(e.trim(),8,10+3.5*t+2)})),a.addImage("data:image/png;base64,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","png",5,12+3*s.length+4,3,3,null,"FAST"),a.setFontSize(10),a.text("wheregroup.com",40,12+3.25*s.length+4+1),a.setProperties({title:"Map export",subject:"Map export",creator:"WhereGroup GmbH",author:"(c)WhereGroup GmbH, (c)OpenStreetMap"}),a.save("Map.pdf"),i.remove(),null===(e=o.parentNode)||void 0===e||e.removeChild(o),Object.defineProperty(window,"devicePixelRatio",{get:function(){return n}}),r(!1)}))},le=function(e){var t=Object(n.useContext)(c.b),r=Object(n.useRef)(!1),a=Object(n.useRef)(void 0);return Object(n.useEffect)((function(){t.mapExists(e.mapId)&&!r.current&&(r.current=!0,a.current=t.getMap(e.mapId))}),[t.mapIds,t,e.mapId]),o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){ue(a.current,null,(function(){}))}},o.a.createElement(y.a,null)))};le.defaultProps={mapId:void 0},le.propTypes={mapId:i.a.string};var pe,de;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e){return Object(n.createElement)("svg",fe({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064"},e),Object(n.createElement)("g",{transform:"translate(-86.019554,-58.032633)"},Object(n.createElement)("path",{style:{strokeWidth:.744756},d:"m 442.74023,219.33594 -117.62695,32.32422 54.71094,31.12304 c -21.99397,41.5931 -32.8507,84.88283 -38.33008,127.89649 -6.86182,50.94051 -5.95715,103.99765 20.23828,155.46484 5.97246,11.72776 13.65817,23.59773 24.38867,35.06641 2.6597,2.84073 5.65602,5.75455 9.12891,8.68164 0.87557,0.7378 1.85363,1.52609 2.95117,2.35547 0.29669,0.22563 0.63616,0.47742 1.02149,0.75586 l 0.58203,0.42578 34.57812,-15.12305 -0.33789,-0.2207 c -0.0265,-0.0151 -0.0842,-0.0587 -0.18359,-0.13086 -0.46723,-0.34885 -0.9819,-0.76796 -1.56055,-1.25 -2.29757,-1.91343 -4.46539,-4.04643 -6.64062,-6.33985 -8.80052,-9.27114 -15.30333,-19.4993 -20.83985,-30.13867 -24.42289,-46.90715 -24.77465,-97.03535 -18.58008,-146.68164 4.94388,-37.37493 13.65299,-74.4847 30.20508,-109.92969 l 58.6211,33.34766 z",transform:"scale(0.26458333)"})))}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function he(e){return Object(n.createElement)("svg",ge({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064"},e),pe||(pe=Object(n.createElement)("g",{transform:"translate(-86.019554,-58.032633)"},Object(n.createElement)("path",{d:"m 94.572523,58.032633 31.122127,8.55245 -14.4756,8.234638 c 5.81924,11.004841 8.69175,22.458582 10.1415,33.839279 1.81552,13.47801 1.57616,27.51604 -5.35471,41.13341 -1.58021,3.10296 -3.61373,6.24356 -6.45284,9.27798 -0.70371,0.75161 -1.49649,1.52256 -2.41535,2.29702 -0.23167,0.19521 -0.49044,0.40378 -0.78083,0.62322 -0.0785,0.0597 -0.16832,0.12632 -0.27027,0.19999 l -0.154,0.11265 -9.148793,-4.00131 0.0894,-0.0584 c 0.007,-0.004 0.02228,-0.0155 0.04857,-0.0346 0.123621,-0.0923 0.259794,-0.20319 0.412895,-0.33073 0.607899,-0.50626 1.181468,-1.07062 1.756997,-1.67742 2.328481,-2.45299 4.049011,-5.15919 5.513881,-7.97419 6.46189,-12.41085 6.55496,-25.67394 4.91598,-38.80952 -1.30807,-9.888781 -3.61235,-19.707408 -7.99176,-29.085561 l -15.510171,8.823235 z"}))))}function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ve(e){return Object(n.createElement)("svg",ye({width:"75.967445mm",height:"234.71339mm",viewBox:"0 0 75.967445 234.71339"},e),de||(de=Object(n.createElement)("g",{transform:"translate(-76.705281,-29.77268)"},Object(n.createElement)("path",{d:"m 114.68901,29.77268 37.98372,117.3567 H 76.705281 Z"}),Object(n.createElement)("path",{d:"m 114.68901,264.48608 37.98372,-117.3567 H 76.705281 Z"}))))}var be=Object(v.a)("div",{target:"e12lzm5x2"})({name:"1204o9",styles:"width:40%;display:flex;align-items:center;&:hover{cursor:pointer;}path{filter:drop-shadow(0px 0px 15px rgba(0, 0, 0, 0.2));}&:hover path{filter:drop-shadow(0px 0px 13px rgba(255, 255, 255, 0.1));}path:nth-of-type(2){fill:#343434;}&:hover path:nth-of-type(2){fill:#434343;}path:nth-of-type(1){fill:#e90318;}&:hover path:nth-of-type(1){fill:#fb4052;}"}),xe=Object(v.a)("div",{target:"e12lzm5x1"})({name:"1m8y6tb",styles:"pointer-events:none;display:flex;z-index:1002;position:absolute;align-items:center;margin-left:-30%;path:nth-of-type(2){}svg g{transform:translate(-76.7053, -29.7727) scale(2, 1);}svg{z-index:9990;height:150px;width:200px;}"}),Ce=Object(v.a)("div",{target:"e12lzm5x0"})({name:"1j4uu1m",styles:"width:30%;margin-top:14px;z-index:999;display:flex;svg:hover{cursor:pointer;}svg:hover path{fill:#ececec;filter:drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));}path{fill:#bbb;}svg{transform:scale(0.6);z-index:9990;height:172px;}"}),we=function(e){var t=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=V(Object(n.useState)(0),2),a=r[0],i=r[1];return Object(n.useEffect)((function(){if(t.map){var e=function(){i(Math.round(t.map.getBearing()))};return t.map.on("rotate",e,t.componentId),e(),function(){t.map.off("rotate",e)}}}),[t.map,e.mapId]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Object(b.a)(z({zIndex:1e3,top:0,position:"absolute"},e.style),"","")},o.a.createElement("div",{className:Object(b.a)(z({position:"absolute",border:"10px solid #bcbcbc",backgroundColor:"#717171",background:"radial-gradient(#717171, #414141)",height:"200px",width:"200px",borderRadius:"50%",display:"flex",justifyContent:"center",transform:"scale(0.2) translateX(-448px) translateY(-448px)"},e.backgroundStyle),"","")},o.a.createElement(Ce,{className:Object(b.a)(z({},e.rotateRightStyle),"","")},o.a.createElement(me,{onClick:function(){var e,r,n=Math.round(null===(e=t.map)||void 0===e?void 0:e.getBearing()),o=Math.round(n%90);n>0&&(o=90-o),0===o&&(o=90),null===(r=t.map)||void 0===r||r.setBearing(Math.round(n+Math.abs(o)))}})),o.a.createElement(be,{className:Object(b.a)(z({},e.needleStyle),"",""),onClick:function(){var e;null===(e=t.map)||void 0===e||e.setBearing(0)}},o.a.createElement(xe,{style:{transform:"rotate("+a+"deg)"}},o.a.createElement(ve,null))),o.a.createElement(Ce,{className:Object(b.a)(z({},e.rotateLeftStyle),"","")},o.a.createElement(he,{onClick:function(){var e,r,n=Math.round(null===(e=t.map)||void 0===e?void 0:e.getBearing()),o=Math.round(n%90);n<0&&(o=90+o),0===o&&(o=90),null===(r=t.map)||void 0===r||r.setBearing(Math.round(n-Math.abs(o)))}})))))};we.propTypes={idPrefix:i.a.string,style:i.a.object,backgroundStyle:i.a.object,needleStyle:i.a.object,rotateRightStyle:i.a.object,rotateLeftStyle:i.a.object};i.a.string,i.a.string,i.a.object,i.a.object,i.a.string;i.a.string,i.a.object,i.a.object,i.a.string;var je={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}},Oe=function(e){var t=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),a=Object(n.useRef)(e.layerId||"MlWmsLayer-"+t.componentId);return Object(n.useEffect)((function(){var n;if(t.map&&!r.current){var o;r.current=!0;var i=e.url;-1!==e.url.indexOf("?")&&(i=(o=e.url.split("?"))[0]);var c=new URLSearchParams(null===(n=o)||void 0===n?void 0:n[1]),s=z(z(z({},je.urlParameters),Object.fromEntries(c)),e.urlParameters),u=new URLSearchParams(s),l=decodeURIComponent(u.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");t.map.addSource(a.current,z({type:"raster",tiles:[i+"?"+l],tileSize:s.width,attribution:e.attribution},e.sourceOptions),t.componentId),t.map.addLayer(z({id:a.current,type:"raster",source:a.current},e.layerOptions),e.insertBeforeLayer,t.componentId),e.visible||t.map.setLayoutProperty(a.current,"visibility","none")}}),[t,e]),Object(n.useEffect)((function(){t.map&&r.current&&(e.visible?t.map.setLayoutProperty(a.current,"visibility","visible"):t.map.setLayoutProperty(a.current,"visibility","none"))}),[e.visible,t.map]),o.a.createElement(o.a.Fragment,null)};Oe.defaultProps=z({},je),Oe.propTypes={url:i.a.string.isRequired,urlParameters:i.a.shape({layers:i.a.string.isRequired,bbox:i.a.string,format:i.a.string,service:i.a.string,version:i.a.string,request:i.a.string,srs:i.a.string,width:i.a.number,height:i.a.number}),mapId:i.a.string,attribution:i.a.string,layerOptions:i.a.object,sourceOptions:i.a.object,insertBeforeLayer:i.a.string,visible:i.a.bool};var Ee="mapbox-gl-draw_boxselect",Se="add",He="move",Ie="pointer",ke="none",Le="polygon",Me="Feature",Pe="Polygon",Fe="LineString",Ae="Point",Te="Multi",Re="MultiPoint",Ue="MultiLineString",Be="MultiPolygon",Ge="draw.create",ze="draw.update",De="draw.combine",Ne="draw.uncombine",_e="move",We="change_coordinates",Ve="feature",qe="midpoint",Je="vertex",Ze="true",Qe="false";function Xe(e){return function(t){var r=t.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===e)}}function Ye(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===Ze&&e.featureTarget.properties.meta===Ve))}function Ke(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===Qe&&e.featureTarget.properties.meta===Ve))}function $e(e){return void 0===e.featureTarget}function et(e){var t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===Je)}function tt(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}var rt=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},nt=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)};var ot=function(e,t,r,n){return{type:Me,properties:{meta:Je,parent:e,coord_path:r,active:n?Ze:Qe},geometry:{type:Ae,coordinates:t}}},at={};function it(e,t){var r=t.getBoundingClientRect();return new w.a(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}at.onSetup=function(){console.log("Change mode: custom polygon");var e=this.newFeature({type:Me,properties:{},geometry:{type:Pe,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),nt(this),this.updateUIClasses({mouse:Se}),this.activateUIButton(Le),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},at.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&(r=t,n=e.polygon.coordinates[0][e.currentVertexPosition-1],r.lngLat&&r.lngLat.lng===n[0]&&r.lngLat.lat===n[1]))return this.changeMode("custom_select",{featureIds:[e.polygon.id]});var r,n;this.updateUIClasses({mouse:Se}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),this.map.fire(Ge,{features:[e.polygon.toGeoJSON()]})},at.clickOnVertex=function(e){return this.changeMode("custom_select",{featureIds:[e.polygon.id]})},at.onMouseMove=function(e,t){e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),et(t)&&this.updateUIClasses({mouse:Ie})},at.onTap=at.onClick=function(e,t){return et(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},at.onKeyUp=function(e,t){!function(e){return 27===e.keyCode}(t)?function(e){return 13===e.keyCode}(t)&&this.changeMode("custom_select",{featureIds:[e.polygon.id]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select"))},at.onStop=function(e){this.updateUIClasses({mouse:ke}),rt(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0.".concat(e.currentVertexPosition)),e.polygon.isValid()?this.map.fire(Ge,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select",{},{silent:!0})))},at.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.polygon.id;if(t.properties.active=n?Ze:Qe,!n)return r(t);if(0!==t.geometry.coordinates.length){var o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=Ve,r(ot(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){var a=t.geometry.coordinates[0].length-3;r(ot(e.polygon.id,t.geometry.coordinates[0][a],"0.".concat(a),!1))}if(o<=4){var i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:Me,properties:t.properties,geometry:{coordinates:i,type:Fe}}),3===o)return}return r(t)}}},at.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select")};var ct=function(e,t,r){var n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>85||n[1]<-85||o[1]>85||o[1]<-85)return null;var a={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:Me,properties:{meta:qe,parent:e,lng:a.lng,lat:a.lat,coord_path:r.properties.coord_path},geometry:{type:Ae,coordinates:[a.lng,a.lat]}}};function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.geometry,o=n.type,a=n.coordinates,i=e.properties&&e.properties.id,c=[];function s(e,r){var n="",o=null;e.forEach((function(e,a){var s=null!=r?"".concat(r,".").concat(a):String(a),l=ot(i,e,s,u(s));if(t.midpoints&&o){var p=ct(i,o,l);p&&c.push(p)}o=l;var d=JSON.stringify(e);n!==d&&c.push(l),0===a&&(n=d)}))}function u(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}function l(){var r=o.replace(Te,"");a.forEach((function(n,o){var a={type:Me,properties:e.properties,geometry:{type:r,coordinates:n}};c=c.concat(st(a,t,o))}))}return o===Ae?c.push(ot(i,a,r,u(r))):o===Pe?a.forEach((function(e,t){s(e,null!==r?"".concat(r,".").concat(t):String(t))})):o===Fe?s(a,r):0===o.indexOf(Te)&&l(),c}function ut(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,r=e.length;t<r;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}ut.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},ut.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},ut.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},ut.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(r){t.push({k:r,v:e._items[r]})})),Object.keys(this._nums).forEach((function(r){t.push({k:JSON.parse(r),v:e._nums[r]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},ut.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var lt=function(e,t){var r=-90,n=90,o=-90,a=90,i=270,c=-270;e.forEach((function(e){var t=O()(e),s=t[1],u=t[3],l=t[0],p=t[2];s>r&&(r=s),u<n&&(n=u),u>o&&(o=u),s<a&&(a=s),l<i&&(i=l),p>c&&(c=p)}));var s=t;return r+s.lat>85&&(s.lat=85-r),o+s.lat>90&&(s.lat=90-o),n+s.lat<-85&&(s.lat=-85-n),a+s.lat<-90&&(s.lat=-90-a),i+s.lng<=-270&&(s.lng+=360*Math.ceil(Math.abs(s.lng)/360)),c+s.lng>=270&&(s.lng-=360*Math.ceil(Math.abs(s.lng)/360)),s},pt=function(e,t){var r=lt(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,n=e.getCoordinates(),o=function(e){var t={lng:e[0]+r.lng,lat:e[1]+r.lat};return[t.lng,t.lat]},a=function(e){return e.map((function(e){return o(e)}))};e.type===Ae?t=o(n):e.type===Fe||e.type===Re?t=n.map(o):e.type===Pe||e.type===Ue?t=n.map(a):e.type===Be&&(t=n.map((function(e){return e.map((function(e){return a(e)}))}))),e.incomingCoords(t)}))},dt={onSetup:function(e){var t=this;console.log("Change mode: custom select");var r={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(r.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),r},fireUpdate:function(){this.map.fire(ze,{action:_e,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),r=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),n=!1;if(t.length>1){n=!0;var o=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==o&&(n=!1)}))}var a=r.length>0,i=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:a,trash:i})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new ut).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){rt(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};dt.onTap=dt.onClick=function(e,t){return $e(t)?this.clickAnywhere(e,t):Xe(Je)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===Ve)}(t)?this.clickOnFeature(e,t):void 0},dt.clickAnywhere=function(e){var t=this,r=this.getSelectedIds();r.length&&(this.clearSelectedFeatures(),r.forEach((function(e){return t.doRender(e)}))),rt(this),this.stopExtendedInteractions(e)},dt.clickOnVertex=function(e,t){this.changeMode("custom_direct_select",{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:He})},dt.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},dt.clickOnFeature=function(e,t){var r=this;nt(this),this.stopExtendedInteractions(e);var n=tt(t),o=this.getSelectedIds(),a=t.featureTarget.properties.id,i=this.isSelected(a);if(!n&&i&&this.getFeature(a).type!==Ae)return this.changeMode("custom_direct_select",{featureId:a});i&&n?(this.deselect(a),this.updateUIClasses({mouse:Ie}),1===o.length&&rt(this)):!i&&n?(this.select(a),this.updateUIClasses({mouse:He})):i||n||(o.forEach((function(e){return r.doRender(e)})),this.setSelected(a),this.updateUIClasses({mouse:He})),this.doRender(a)},dt.onMouseDown=function(e,t){return Ye(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}(t)?this.startBoxSelect(e,t):void 0},dt.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=it(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},dt.onTouchStart=function(e,t){if(Ye(t))return this.startOnActiveFeature(e,t)},dt.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},dt.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:Se}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Ee),this.map.getContainer().appendChild(e.boxSelectElement));var r=it(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),a=Math.min(e.boxSelectStartLocation.y,r.y),i=Math.max(e.boxSelectStartLocation.y,r.y),c="translate(".concat(n,"px, ").concat(a,"px)");e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width="".concat(o-n,"px"),e.boxSelectElement.style.height="".concat(i-a,"px")},dt.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};pt(this.getSelected(),r),e.dragMoveLocation=t.lngLat},dt.onMouseUp=function(e,t){var r=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var n=[e.boxSelectStartLocation,it(t.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),a=this.getUniqueIds(o).filter((function(e){return!r.isSelected(e)}));a.length&&(this.select(a),a.forEach((function(e){return r.doRender(e)})),this.updateUIClasses({mouse:He}))}this.stopExtendedInteractions(e)},dt.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?Ze:Qe,r(t),this.fireActionable(),t.properties.active===Ze&&t.geometry.type!==Ae&&st(t).forEach(r)},dt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},dt.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],r=[],n=e[0].type.replace("Multi",""),o=0;o<e.length;o++){var a=e[o];if(a.type.replace("Multi","")!==n)return;a.type.includes("Multi")?a.getCoordinates().forEach((function(e){t.push(e)})):t.push(a.getCoordinates()),r.push(a.toGeoJSON())}if(r.length>1){var i=this.newFeature({type:Me,properties:r[0].properties,geometry:{type:"Multi".concat(n),coordinates:t}});this.addFeature(i),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([i.id]),this.map.fire(De,{createdFeatures:[i.toGeoJSON()],deletedFeatures:r})}this.fireActionable()}},dt.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var r=[],n=[],o=function(o){var a=t[o];e.isInstanceOf("MultiFeature",a)&&(a.getFeatures().forEach((function(t){e.addFeature(t),t.properties=a.properties,r.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(a.id,{silent:!0}),n.push(a.toGeoJSON()))},a=0;a<t.length;a++)o(a);r.length>1&&this.map.fire(Ne,{createdFeatures:r,deletedFeatures:n}),this.fireActionable()}};var ft=function(e,t,r,n){for(var o=[],a=e[0].toFixed(5),i=e[1].toFixed(5),c=0;c<r.length;c++)if(r[c].id!==t)for(var s=0;s<r[c].geometry.coordinates.length;s++)for(var u=0;u<r[c].geometry.coordinates[s].length;u++)a===r[c].geometry.coordinates[s][u][0].toFixed(5)&&i===r[c].geometry.coordinates[s][u][1].toFixed(5)&&o.push({featureId:r[c].id,coord_path:s+"."+u,lng:r[c].geometry.coordinates[s][u][0],lat:r[c].geometry.coordinates[s][u][1]});return o},mt=function(e){for(var t=e._controls.length-1;t>=0;t--)if(e._controls[t].options&&"custom_select"===e._controls[t].options.defaultMode)return e._controls[t];return null},gt=Xe(Je),ht=Xe(qe),yt={};yt.fireUpdate=function(){this.map.fire(ze,{action:We,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},yt.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},yt.startDragging=function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},yt.stopDragging=function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},yt.onVertex=function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);tt(t)||-1!==n?tt(t)&&-1===n&&e.selectedCoordPaths.push(r.coord_path):e.selectedCoordPaths=[r.coord_path];var o=mt(this.map).getAll(),a=ft(t.featureTarget._geometry.coordinates,t.featureTarget.properties.parent,o.features,this.map);e.groupMove_vertices=a;for(var i=0;i<e.groupMove_vertices.length;i++)e.groupMove_vertices[i].feature=this.getFeature(e.groupMove_vertices[i].featureId);var c=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(c)},yt.onMidpoint=function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]},yt.pathsToCoordinates=function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},yt.onFeature=function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},yt.dragFeature=function(e,t,r){pt(this.getSelected(),r),e.dragMoveLocation=t.lngLat},yt.dragVertex=function(e,t,r){for(var n=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),o=n.map((function(e){return{type:Me,properties:{},geometry:{type:Ae,coordinates:e}}})),a=lt(o,r),i=0;i<n.length;i++){var c=n[i];e.feature.updateCoordinate(e.selectedCoordPaths[i],c[0]+a.lng,c[1]+a.lat);for(var s=0;s<e.groupMove_vertices.length;s++){var u=e.groupMove_vertices[s].coord_path.split(".");if(void 0!==u[0]&&void 0!==u[1]&&void 0!==e.groupMove_vertices[s].feature.coordinates[u[0]]&&void 0!==e.groupMove_vertices[s].feature.coordinates[u[0]][u[1]]){var l=e.groupMove_vertices[s].feature.coordinates[u[0]][u[1]];e.groupMove_vertices[s].feature.updateCoordinate(e.groupMove_vertices[s].coord_path,l[0]+a.lng,l[1]+a.lat)}}}},yt.clickNoTarget=function(){this.changeMode("custom_select")},yt.clickInactive=function(){this.changeMode("custom_select")},yt.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},yt.onSetup=function(e){var t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===Ae)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[],groupMove_vertices:e.groupMove_vertices?e.groupMove_vertices:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),nt(this),this.setActionableState({trash:!0}),n},yt.onStop=function(){rt(this),this.clearSelectedCoordinates()},yt.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=Ze,r(t),st(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=Qe,r(t)),this.fireActionable(e)},yt.onTrash=function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode("custom_select",{}))},yt.onMouseMove=function(e,t){var r=Ye(t),n=gt(t),o=0===e.selectedCoordPaths.length;r&&o||n&&!o?this.updateUIClasses({mouse:He}):this.updateUIClasses({mouse:ke}),this.stopDragging(e)},yt.onMouseOut=function(e){e.dragMoving&&this.fireUpdate()},yt.onTouchStart=yt.onMouseDown=function(e,t){return gt(t)?this.onVertex(e,t):Ye(t)?this.onFeature(e,t):ht(t)?this.onMidpoint(e,t):void 0},yt.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat}},yt.onClick=function(e,t){return $e(t)?this.clickNoTarget(e,t):Ye(t)?this.clickActiveFeature(e,t):Ke(t)?this.clickInactive(e,t):void this.stopDragging(e)},yt.onTap=function(e,t){return $e(t)?this.clickNoTarget(e,t):Ye(t)?this.clickActiveFeature(e,t):Ke(t)?this.clickInactive(e,t):void 0},yt.onTouchEnd=yt.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var vt=function(e){var t=Object(n.useContext)(c.b);return Object(n.useEffect)((function(){if(t.mapExists())return function(){"function"==typeof e.cleanup&&e.cleanup(t.getMap(e.mapId))}})),Object(n.useEffect)((function(){t.mapExists(e.mapId)&&"function"==typeof e.mapIsReady&&e.mapIsReady(t.getMap(e.mapId))}),[t.mapIds,t,e]),o.a.createElement(o.a.Fragment,null)},bt=function(e){var t=Object(n.useContext)(c.b),r=Object(n.useRef)(!1),a=Object(n.useRef)(null),i=V(Object(n.useState)(50),2),s=i[0],u=i[1],l=Object(n.useRef)(50),p=V(Object(n.useState)(50),2),d=p[0],f=p[1],m=Object(n.useRef)(50),g=Object(n.useRef)(e.magnifierRadius),h=V(Object(n.useState)(g.current),2),y=h[0],v=h[1],b=Object(n.useCallback)((function(){return!(!e.map1Id||!e.map2Id)&&!(!t.getMap(e.map1Id)||!t.getMap(e.map2Id))}),[e,t]),x=Object(n.useRef)((function(){b()&&C({clientX:l.current,clientY:m.current})}));Object(n.useEffect)((function(){window.addEventListener("resize",x.current);var e=x.current;return function(){window.removeEventListener("resize",e),a.current&&a.current()}}),[]);var C=Object(n.useCallback)((function(r){if(b()){var n=t.maps[e.map1Id].getCanvas().getBoundingClientRect(),o=r.clientX||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientX:0),a=r.clientY||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientY:0);o-=n.x,a-=n.y;var i=(o/n.width*100).toFixed(2),c=(a/n.height*100).toFixed(2);l.current===i&&m.current===c||(u(i),l.current=i,f(c),m.current=c,t.maps[e.map2Id].getContainer().style.clipPath="circle(".concat(g.current,"px at ")+l.current*n.width/100+"px "+m.current*n.height/100+"px)")}}),[t,b,e]);Object(n.useEffect)((function(){b()&&!r.current&&(r.current=!0,a.current=S()(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),t.maps[e.map1Id].getCanvas().clientWidth>t.maps[e.map1Id].getCanvas().clientHeight&&2*g.current>t.maps[e.map1Id].getCanvas().clientHeight&&(g.current=Math.floor(t.maps[e.map1Id].getCanvas().clientHeight/2),v(g.current)),t.maps[e.map1Id].getCanvas().clientHeight>t.maps[e.map1Id].getCanvas().clientWidth&&2*g.current>t.maps[e.map1Id].getCanvas().clientWidth&&(g.current=Math.floor(t.maps[e.map1Id].getCanvas().clientWidth/2),v(g.current)),C({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))}),[t.mapIds,t,b,e,C]);var w=function(e){e.touches?(document.addEventListener("touchmove",C),document.addEventListener("touchend",j)):(document.addEventListener("mousemove",C),document.addEventListener("mouseup",O))},j=function e(){document.removeEventListener("touchmove",C),document.removeEventListener("touchend",e)},O=function e(){document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",e)};return o.a.createElement("div",{style:{position:"absolute",left:s+"%",top:d+"%",borderRadius:"50%",width:2*y+1+"px",height:2*y+1+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:-1*y-1+"px",marginTop:-1*y-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none"},onTouchStart:w,onMouseDown:w,onWheel:function(e){var r=new WheelEvent(e.type,e);t.map.getCanvas().dispatchEvent(r)}})};bt.defaultProps={magnifierRadius:200},bt.propTypes={map1Id:i.a.string,map2Id:i.a.string,magnifierRadius:i.a.number};i.a.string,i.a.string;var xt=o.a.createContext({}),Ct=xt.Provider,wt=function(){var t,n=/\s*/g,o=/^\s*|\s*$/g,a=/\s+/;function i(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function c(e,t){return e.getElementsByTagName(t)}function s(e,t){return e.getAttribute(t)}function u(e,t){return parseFloat(s(e,t))}function l(e,t){var r=c(e,t);return r.length?r[0]:null}function p(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function f(e,t){var r,n,o={};for(n=0;n<t.length;n++)(r=l(e,t[n]))&&(o[t[n]]=d(r));return o}function m(e,t){for(var r in t)e[r]=t[r]}function g(e){return p(e.replace(n,"").split(","))}function h(e){for(var t=e.replace(o,"").split(a),r=[],n=0;n<t.length;n++)r.push(g(t[n]));return r}function y(e){var t,r=[u(e,"lon"),u(e,"lat")],n=l(e,"ele"),o=l(e,"gpxtpx:hr")||l(e,"hr"),a=l(e,"time");return n&&(t=parseFloat(d(n)),isNaN(t)||r.push(t)),{coordinates:r,time:a?d(a):null,heartRate:o?parseFloat(d(o)):null}}if("undefined"!=typeof XMLSerializer)t=new XMLSerializer;else{var v="object"===(void 0===e?"undefined":D(e))&&!e.browser,b="object"===("undefined"==typeof Titanium?"undefined":D(Titanium));if("object"!==("undefined"==typeof exports?"undefined":D(exports))||!v&&!b)throw new Error("Unable to initialize serializer");t=new(r(1346).XMLSerializer)}function x(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return{kml:function(e){for(var t={type:"FeatureCollection",features:[]},r={},n={},o={},a=["Polygon","LineString","Point","Track","gx:Track"],u=c(e,"Placemark"),f=c(e,"Style"),m=c(e,"StyleMap"),y=0;y<f.length;y++){var v=i(x(f[y])).toString(16);r["#"+s(f[y],"id")]=v,n[v]=f[y]}for(var b=0;b<m.length;b++){r["#"+s(m[b],"id")]=i(x(m[b])).toString(16);for(var C=c(m[b],"Pair"),w={},j=0;j<C.length;j++)w[d(l(C[j],"key"))]=d(l(C[j],"styleUrl"));o["#"+s(m[b],"id")]=w}for(var O=0;O<u.length;O++)t.features=t.features.concat(H(u[O]));function E(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function S(e){var t=c(e,"coord"),r=[],n=[];0===t.length&&(t=c(e,"gx:coord"));for(var o=0;o<t.length;o++)r.push(p(d(t[o]).split(" ")));for(var a=c(e,"when"),i=0;i<a.length;i++)n.push(d(a[i]));return{coords:r,times:n}}function H(e){var t,i=function e(t){var r,n,o,i,s,u=[],p=[];if(l(t,"MultiGeometry"))return e(l(t,"MultiGeometry"));if(l(t,"MultiTrack"))return e(l(t,"MultiTrack"));if(l(t,"gx:MultiTrack"))return e(l(t,"gx:MultiTrack"));for(o=0;o<a.length;o++)if(n=c(t,a[o]))for(i=0;i<n.length;i++)if(r=n[i],"Point"===a[o])u.push({type:"Point",coordinates:g(d(l(r,"coordinates")))});else if("LineString"===a[o])u.push({type:"LineString",coordinates:h(d(l(r,"coordinates")))});else if("Polygon"===a[o]){var f=c(r,"LinearRing"),m=[];for(s=0;s<f.length;s++)m.push(h(d(l(f[s],"coordinates"))));u.push({type:"Polygon",coordinates:m})}else if("Track"===a[o]||"gx:Track"===a[o]){var y=S(r);u.push({type:"LineString",coordinates:y.coords}),y.times.length&&p.push(y.times)}return{geoms:u,coordTimes:p}}(e),u={},p=d(l(e,"name")),f=d(l(e,"address")),m=d(l(e,"styleUrl")),y=d(l(e,"description")),v=l(e,"TimeSpan"),b=l(e,"TimeStamp"),x=l(e,"ExtendedData"),C=l(e,"LineStyle"),w=l(e,"PolyStyle"),j=l(e,"visibility");if(!i.geoms.length)return[];if(p&&(u.name=p),f&&(u.address=f),m){"#"!==m[0]&&(m="#"+m),u.styleUrl=m,r[m]&&(u.styleHash=r[m]),o[m]&&(u.styleMapHash=o[m],u.styleHash=r[o[m].normal]);var O=n[u.styleHash];if(O){C||(C=l(O,"LineStyle")),w||(w=l(O,"PolyStyle"));var H=l(O,"IconStyle");if(H){var I=l(H,"Icon");if(I){var k=d(l(I,"href"));k&&(u.icon=k)}}}}if(y&&(u.description=y),v){var L=d(l(v,"begin")),M=d(l(v,"end"));u.timespan={begin:L,end:M}}if(b&&(u.timestamp=d(l(b,"when"))),C){var P=E(d(l(C,"color"))),F=P[0],A=P[1],T=parseFloat(d(l(C,"width")));F&&(u.stroke=F),isNaN(A)||(u["stroke-opacity"]=A),isNaN(T)||(u["stroke-width"]=T)}if(w){var R=E(d(l(w,"color"))),U=R[0],B=R[1],G=d(l(w,"fill")),z=d(l(w,"outline"));U&&(u.fill=U),isNaN(B)||(u["fill-opacity"]=B),G&&(u["fill-opacity"]="1"===G?u["fill-opacity"]||1:0),z&&(u["stroke-opacity"]="1"===z?u["stroke-opacity"]||1:0)}if(x){var D=c(x,"Data"),N=c(x,"SimpleData");for(t=0;t<D.length;t++)u[D[t].getAttribute("name")]=d(l(D[t],"value"));for(t=0;t<N.length;t++)u[N[t].getAttribute("name")]=d(N[t])}j&&(u.visibility=d(j)),i.coordTimes.length&&(u.coordTimes=1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes);var _={type:"Feature",geometry:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:u};return s(e,"id")&&(_.id=s(e,"id")),[_]}return t},gpx:function(e){var t,r,n=c(e,"trk"),o=c(e,"rte"),a=c(e,"wpt"),i={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(r=g(n[t]))&&i.features.push(r);for(t=0;t<o.length;t++)(r=h(o[t]))&&i.features.push(r);for(t=0;t<a.length;t++)i.features.push(v(a[t]));function u(e,t){for(var r=0;r<t;r++)e.push(null);return e}function p(e,t){var r=c(e,t),n=[],o=[],a=[],i=r.length;if(i<2)return{};for(var s=0;s<i;s++){var l=y(r[s]);n.push(l.coordinates),l.time&&o.push(l.time),(l.heartRate||a.length)&&(a.length||u(a,s),a.push(l.heartRate||null))}return{line:n,times:o,heartRates:a}}function g(e){for(var t,r=c(e,"trkseg"),n=[],o=[],a=[],i=0;i<r.length;i++)if((t=p(r[i],"trkpt"))&&(t.line&&n.push(t.line),t.times&&t.times.length&&o.push(t.times),a.length||t.heartRates&&t.heartRates.length)){if(!a.length)for(var s=0;s<i;s++)a.push(u([],n[s].length));t.heartRates&&t.heartRates.length?a.push(t.heartRates):a.push(u([],t.line.length||0))}if(0!==n.length){var d=x(e);return m(d,b(l(e,"extensions"))),o.length&&(d.coordTimes=1===n.length?o[0]:o),a.length&&(d.heartRates=1===n.length?a[0]:a),{type:"Feature",properties:d,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function h(e){var t=p(e,"rtept");if(t.line){var r=x(e);return m(r,b(l(e,"extensions"))),{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t.line}}}}function v(e){var t=x(e);return m(t,f(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:y(e).coordinates}}}function b(e){var t={};if(e){var r=l(e,"line");if(r){var n=d(l(r,"color")),o=parseFloat(d(l(r,"opacity"))),a=parseFloat(d(l(r,"width")));n&&(t.stroke=n),isNaN(o)||(t["stroke-opacity"]=o),isNaN(a)||(t["stroke-width"]=96*a/25.4)}}return t}function x(e){var t=f(e,["name","cmt","desc","type","time","keywords"]),r=c(e,"link");r.length&&(t.links=[]);for(var n,o=0;o<r.length;o++)m(n={href:s(r[o],"href")},f(r[o],["text","type"])),t.links.push(n);return t}return i}}}(),jt=function(e){var t=Object(n.useContext)(xt),r=Object(n.useRef)(!1),a=$({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),i="importer-layer-lines",c="importer-layer-points",u=V(Object(n.useState)(!1),2),l=u[0],p=u[1],d=Object(n.useRef)(null),f=V(Object(n.useState)(0),2),g=f[0],h=f[1],y=V(Object(n.useState)([]),2),v=y[0],b=y[1],C=Object(n.useRef)(null),w=Object(x.a)("(max-width:900px)"),j=Object(n.useRef)(new s.Popup({closeButton:!1,closeOnClick:!0}));Object(n.useEffect)((function(){a.map&&!r.current&&(r.current=!0,a.map.addSource("import-source",{type:"geojson",data:t.data},a.componentId),a.map.addLayer({id:i,source:"import-source",type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"}},e.insertBeforeLayer,a.componentId),a.map.addLayer({id:c,source:"import-source",type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"]},e.insertBeforeLayer,a.componentId),[i,c].forEach((function(e){a.map.setLayoutProperty(e,"visibility","visible")})),a.map.on("mouseenter",c,(function(e){for(var t=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.name;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;j.current.setLngLat(t).setHTML(r).addTo(a.map)}),a.componentId),a.map.on("mouseleave","places",(function(){a.map.getCanvas().style.cursor="",j.current.remove()}),a.componentId),a.map.setZoom(10))}),[a.map]),Object(n.useEffect)((function(){var e=d.current,t=function(e){h(1e3),O(e)},r=function(){h(0)},n=function(e){h(0),O(e)};return window.addEventListener("dragenter",t),window.addEventListener("dragover",O),e.addEventListener("dragleave",r),window.addEventListener("drop",n),function(){window.removeEventListener("dragenter",t),window.removeEventListener("dragover",O),e.removeEventListener("dragleave",r),window.removeEventListener("drop",n)}}));var O=function(e){e.preventDefault(),e.stopPropagation()};Object(n.useEffect)((function(){if(a.map){var t=e.visible?"visible":"none";[i,c].forEach((function(e){a.map.setLayoutProperty(e,"visibility",t)}))}}),[e.visible]);var E=function(e){if(a.map)try{b([]);var r=(new DOMParser).parseFromString(e,"application/xml");r.querySelector("metadata").childNodes.forEach((function(e){var t=e.textContent,r=e.nodeName;if("link"===e.nodeName&&(t=e.getAttribute("href")),t.trim().length){var n={title:r,value:t,id:(new Date).getTime()};b((function(e){return[].concat(q(e),[n])}))}}));var n=wt.gpx(r);t.setData(n),a.map.getSource("import-source").setData(n);var o=Object(m.bbox)(n);a.map.fitBounds(o)}catch(e){console.log(e)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{position:"fixed",right:"5px",bottom:w?"40px":"25px",display:"flex",flexDirection:"column",gap:"5px",zIndex:1e3}},o.a.createElement(L.a,{onClick:function(){C.current.click()},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large"},o.a.createElement("input",{ref:C,onChange:function(){var e=C.current.files[0];if(!e)return!1;var t=new FileReader;t.onload=function(e){E(e.currentTarget.result)},t.readAsText(e)},type:"file",id:"input",multiple:!0,style:{display:"none"}}),o.a.createElement(A.a,null)),o.a.createElement(L.a,{onClick:function(){p((function(e){return!e}))},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large"},o.a.createElement(P.a,null))),o.a.createElement(k.a,{variant:"persistent",anchor:"left",open:l},o.a.createElement(I.a,{variant:"h6",style:{textAlign:"center",padding:"1em"},noWrap:!0},"Informationen zur Route"),o.a.createElement(H.a,null),o.a.createElement(T.a,null,v.map((function(e){return o.a.createElement(R.a,{key:"item--".concat(e.id)},o.a.createElement(U.a,{primary:e.value}))})))),o.a.createElement("div",{onDrop:function(e){if(e.preventDefault(),e.dataTransfer.items){if(e.dataTransfer.items.length>1)return!1;if("file"===e.dataTransfer.items[0].kind){var t=new FileReader;t.onload=function(e){E(e.currentTarget.result)};var r=e.dataTransfer.items[0].getAsFile();t.readAsText(r)}}},ref:d,style:{position:"absolute",left:"0",top:"0",backgroundColor:"rgba(255,255,255,0.5)",width:"100%",height:"100%",zIndex:g}},o.a.createElement(I.a,{variant:"h6",style:{top:"50%",position:"absolute",left:"50%",msTransform:"translate(-50%, -50%)",transform:" translate(-50%, -50%)"},noWrap:!0},"Gpx-Datei ablegen")))};jt.defaultProps={visible:!0},jt.propTypes={mapId:i.a.string,idPrefix:i.a.string,visible:i.a.bool,insertBeforeLayer:i.a.string};var Ot=function(e){var t=e.children,r=V(Object(n.useState)({type:"FeatureCollection",features:[]}),2),a={data:r[0],setData:r[1],getEmptyFeatureCollection:function(){return{type:"FeatureCollection",features:[]}}};return o.a.createElement(Ct,{value:a},t)};Ot.propTypes={children:i.a.node.isRequired};var Et=function(e){var t=Object(n.useContext)(c.b),r=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlSpatialElevationProfile-")+Object(l.a)()),a=Object(n.useRef)(null),i=Object(n.useRef)(!1),s=Object(n.useContext)(xt),u=Object(n.useRef)("elevationprofile-"+Object(l.a)()),p=Object(n.useRef)("elevationprofile-layer-"+Object(l.a)()),d=Object(n.useCallback)((function(t,r,n,o,a){var i=Object(B.a)([[t,r],[o,a]]),c=Object(m.lineOffset)(i,5,{units:"meters"}),s=c.geometry.coordinates[0][0],u=c.geometry.coordinates[0][1],l=c.geometry.coordinates[1][0],p=c.geometry.coordinates[1][1];return Object(B.b)([[[t,r],[o,a],[l,p],[s,u],[t,r]]],{height:n*e.elevationFactor})}),[e.elevationFactor]);return Object(n.useEffect)((function(){var e=r.current;return function(){a.current&&(a.current.cleanup(e),a.current=null)}}),[]),Object(n.useEffect)((function(){t.mapExists(e.mapId)&&!i.current&&(i.current=!0,a.current=t.getMap(e.mapId),a.current.addSource(u.current,{type:"geojson",data:s.data},r.current),a.current.addLayer({id:p.current,source:u.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"]}},e.insertBeforeLayer,r.current))}),[t.mapIds,e.insertBeforeLayer,e.mapId,s,t]),Object(n.useEffect)((function(){var t;if(a.current&&a.current.getLayer(p.current)){var r=s.data;if(r&&r.features){var n=r.features.find((function(e){return"LineString"===e.geometry.type}));if(n&&n.geometry){var o=n.geometry.coordinates.map((function(e,t){return e[2]})),i=Math.min.apply(Math,q(o)),c=Math.max.apply(Math,q(o))-i;c=0===c?1:c,a.current.setPaintProperty(p.current,"fill-extrusion-color",["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",c*e.elevationFactor,"rgb(255,0,0)"]);var l=function(e,t,r){return e*(1-r)+t*r},f=[];n.geometry.coordinates.forEach((function(e,t){if(n.geometry.coordinates[t+1]){var r=~~(1e3*Object(m.distance)([e[0],e[1]],[n.geometry.coordinates[t+1][0],n.geometry.coordinates[t+1][1]],{units:"kilometers"})/10);r=r<1?1:r;for(var o=0;o<r;o++){var a=l(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],o/r),c=l(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],o/r),s=l(n.geometry.coordinates[t][2]-i,n.geometry.coordinates[t+1][2]-i,o/r),u=l(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],(o+1)/r),p=l(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],(o+1)/r),g=d(a,c,s,u,p);f.push(g)}}}));var g=s.getEmptyFeatureCollection();g.features=f,null===(t=a.current.getSource(u.current))||void 0===t||t.setData(g)}}}}),[s.data,d,s,e.elevationFactor,t]),o.a.createElement(o.a.Fragment,null)};Et.defaultProps={elevationFactor:1},Et.propTypes={mapId:i.a.string,idPrefix:i.a.string,elevationFactor:i.a.number,insertBeforeLayer:i.a.string};i.a.string,i.a.string,i.a.object,i.a.object,i.a.object,i.a.object,i.a.object,i.a.string,i.a.func,i.a.func,i.a.func,i.a.number}).call(this,r(148))}}]);
//# sourceMappingURL=vendors~main~f4c18b70.11fa1683.iframe.bundle.js.map